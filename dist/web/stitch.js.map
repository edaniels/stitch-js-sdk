{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap e5d1b5ee4b64f872667d","webpack:///./src/util.js","webpack:///./src/auth/common.js","webpack:///./src/common.js","webpack:///./src/errors.js","webpack:///./src/client.js","webpack:///./~/mongodb-extjson/index.js","webpack:///./src/auth/providers.js","webpack:///./~/buffer/index.js","webpack:///./~/fetch-everywhere/fetch-npm-browserify.js","webpack:///(webpack)/buildin/global.js","webpack:///./src/admin.js","webpack:///./~/Base64/base64.js","webpack:///./~/bson/dist/bson.js","webpack:///./src/auth/index.js","webpack:///./src/auth/storage.js","webpack:///./src/index.js","webpack:///./src/services/aws/s3_service.js","webpack:///./src/services/aws/ses_service.js","webpack:///./src/services/http/http_service.js","webpack:///./src/services/index.js","webpack:///./src/services/mongodb/collection.js","webpack:///./src/services/mongodb/db.js","webpack:///./src/services/mongodb/mongodb_service.js","webpack:///./src/services/twilio/twilio_service.js","webpack:///./~/mongodb-extjson/lib/bson/binary.js","webpack:///./~/mongodb-extjson/lib/bson/code.js","webpack:///./~/mongodb-extjson/lib/bson/db_ref.js","webpack:///./~/mongodb-extjson/lib/bson/decimal128.js","webpack:///./~/mongodb-extjson/lib/bson/double.js","webpack:///./~/mongodb-extjson/lib/bson/index.js","webpack:///./~/mongodb-extjson/lib/bson/int_32.js","webpack:///./~/mongodb-extjson/lib/bson/long.js","webpack:///./~/mongodb-extjson/lib/bson/max_key.js","webpack:///./~/mongodb-extjson/lib/bson/min_key.js","webpack:///./~/mongodb-extjson/lib/bson/objectid.js","webpack:///./~/mongodb-extjson/lib/bson/regexp.js","webpack:///./~/mongodb-extjson/lib/bson/symbol.js","webpack:///./~/mongodb-extjson/lib/bson/timestamp.js","webpack:///./~/mongodb-extjson/lib/ext_json.js","webpack:///./~/base64-js/index.js","webpack:///./~/detect-browser/browser.js","webpack:///./~/detect-browser/lib/detectBrowser.js","webpack:///./~/detect-browser/lib/detectOS.js","webpack:///./~/ieee754/index.js","webpack:///./~/isarray/index.js","webpack:///./~/jwt-decode/lib/atob.js","webpack:///./~/jwt-decode/lib/base64_url_decode.js","webpack:///./~/jwt-decode/lib/index.js","webpack:///./~/object-assign/index.js","webpack:///./~/process/browser.js","webpack:///./~/query-string/index.js","webpack:///./~/strict-uri-encode/index.js","webpack:///./~/whatwg-fetch/fetch.js"],"names":["base64","serviceResponse","service","serviceName","action","args","client","Error","executeServiceFunction","uriEncodeObject","obj","encodeURIComponent","btoa","JSON","stringify","USER_AUTH_KEY","REFRESH_TOKEN_KEY","DEVICE_ID_KEY","STATE_KEY","USER_AUTH_COOKIE_NAME","STITCH_ERROR_KEY","STITCH_LINK_KEY","USER_LOGGED_IN_PT_KEY","STITCH_REDIRECT_PROVIDER","DEFAULT_ACCESS_TOKEN_EXPIRE_WITHIN_SECS","APP_CLIENT_CODEC","ADMIN_CLIENT_CODEC","JSONTYPE","APP_CLIENT_TYPE","ADMIN_CLIENT_TYPE","DEFAULT_STITCH_SERVER_URL","version","SDK_VERSION","checkStatus","response","status","headers","get","json","then","error","error_code","Promise","reject","statusText","makeFetchArgs","method","body","init","cors","StitchError","message","code","name","undefined","captureStackTrace","constructor","stack","ErrAuthProviderNotFound","ErrInvalidSession","ErrUnauthorized","newStitchClient","common","v1","v2","v3","API_TYPE_PUBLIC","API_TYPE_PRIVATE","API_TYPE_CLIENT","API_TYPE_APP","StitchClientFactory","clientAppID","options","StitchClient","prototype","stitchClient","Object","create","baseUrl","authUrl","rootURLsByAPIVersion","authOptions","codec","storage","storageType","platform","authCodec","authPromise","auth","all","handleRedirect","handleCookie","classname","email","password","authenticate","assign","username","provider","register","providerType","isAuthenticated","authedId","authenticateFn","getLoggedInProviderType","resolve","logout","_do","refreshOnFailure","useRefreshToken","rootURL","clear","type","hasOwnProperty","ServiceType","_doFunctionCall","arguments","request","responseDecoder","d","parse","relaxed","responseEncoder","strict","text","userApiKeyName","keyID","url","fetchArgs","resource","fetch","refreshToken","appURL","apiVersion","apiType","queryParams","_fetchArgs","noAuth","_fetch","token","getRefreshToken","getAccessToken","Authorization","ExtJSON","require","module","exports","authCommon","PROVIDER_TYPE_ANON","PROVIDER_TYPE_CUSTOM","PROVIDER_TYPE_USERPASS","PROVIDER_TYPE_APIKEY","PROVIDER_TYPE_GOOGLE","PROVIDER_TYPE_FACEBOOK","PROVIDER_TYPE_MONGODB_CLOUD","urlWithLinkParam","link","anonProvider","deviceId","getDeviceId","device","getDeviceInfo","rootUrl","fetchArgsWithLink","set","customProvider","providerRoute","loginRoute","userPassProvider","isAppClient","emailConfirm","tokenId","sendEmailConfirm","sendPasswordReset","passwordReset","apiKeyProvider","key","alpha","generateState","state","i","charAt","Math","floor","random","length","getOAuthLoginURL","providerName","redirectUrl","pageRootUrl","result","encodeURI","googleProvider","data","authCode","res","window","location","replace","facebookProvider","accessToken","mongodbCloudProvider","apiKey","cookie","credentials","createProviders","StitchAdminClientFactory","StitchAdminClient","_v3","_get","groupId","api","groupUrl","list","query","defaults","_post","app","appId","appUrl","remove","_delete","export","values","value","valueId","valueUrl","update","_put","services","serviceId","_patch","runCommand","commandName","config","rules","rule","ruleId","ruleUrl","incomingWebhooks","incomingWebhook","incomingWebhookId","webhookUrl","pushNotifications","filter","pushNotification","messageId","send","users","user","uid","devices","enable","disable","userRegistrations","sendConfirmationEmail","debug","executeFunction","userId","user_id","executeFunctionSource","source","evalSource","authProviders","authProvider","providerId","security","allowedRequestOrigins","logs","apiKeys","apiKeyId","functions","function","functionId","eventSubscriptions","eventSubscription","eventSubscriptionId","v3do","contentHeader","split","indexOf","global","factory","bson","commonjsGlobal","self","createCommonjsModule","fn","map","Map","array","_keys","_values","entry","push","v","delete","splice","entries","index","next","done","forEach","callback","call","has","keys","defineProperty","enumerable","map_1","Long","low","high","_bsontype","low_","high_","toInt","toNumber","TWO_PWR_32_DBL_","getLowBitsUnsigned","toJSON","toString","opt_radix","radix","isZero","isNegative","equals","MIN_VALUE","radixLong","fromNumber","div","rem","multiply","subtract","negate","radixToPower","pow","remDiv","intval","digits","getHighBits","getLowBits","getNumBitsAbs","val","bit","isOdd","other","notEquals","lessThan","compare","lessThanOrEqual","greaterThan","greaterThanOrEqual","thisNeg","otherNeg","not","add","ONE","a48","a32","a16","a00","b48","b32","b16","b00","c48","c32","c16","c00","fromBits","ZERO","TWO_PWR_24_","NEG_ONE","halfThis","shiftRight","approx","shiftLeft","max","log2","ceil","log","LN2","delta","approxRes","approxRem","modulo","and","or","xor","numBits","shiftRightUnsigned","fromInt","cachedObj","INT_CACHE_","isNaN","isFinite","TWO_PWR_63_DBL_","MAX_VALUE","lowBits","highBits","fromString","str","substring","size","min","parseInt","power","TWO_PWR_16_DBL_","TWO_PWR_24_DBL_","TWO_PWR_31_DBL_","TWO_PWR_48_DBL_","TWO_PWR_64_DBL_","long_1","Long_1","Double","valueOf","double_1","Double_1","Timestamp","$timestamp","timestamp","Timestamp_1","MACHINE_ID","checkForHexRegExp","RegExp","hasBufferType","Buffer","from","err","ObjectID","id","generate","cacheHexString","__id","valid","isValid","TypeError","createFromHexString","toHexString","hexTable","hexString","_Buffer","convertToHex","charCodeAt","get_inc","getInc","time","Date","now","pid","process","inc","buffer","format","copy","inspect","otherId","toLowerCase","getTimestamp","setTime","createPk","createFromTime","decodeLookup","bytes","string","n","test","objectid","ObjectID_1","ObjectId","alphabetize","sort","join","BSONRegExp","pattern","regexp","BSONRegExp_1","_Symbol","symbol","Symbol_1","Symbol","Int32","int_32","Int32_1","Code","scope","Code_1","PARSE_STRING_REGEXP","PARSE_INF_REGEXP","PARSE_NAN_REGEXP","EXPONENT_MAX","EXPONENT_MIN","EXPONENT_BIAS","MAX_DIGITS","NAN_BUFFER","reverse","INF_NEGATIVE_BUFFER","INF_POSITIVE_BUFFER","EXPONENT_REGEX","isDigit","divideu128","DIVISOR","_rem","parts","quotient","multiply64x2","left","right","leftHigh","leftLow","rightHigh","rightLow","productHigh","productMid","productMid2","productLow","uhleft","uhright","ulleft","ulright","invalidErr","Decimal128","sawRadix","foundNonZero","significantDigits","nDigitsRead","nDigits","radixPosition","firstNonZero","nDigitsStored","digitsInsert","firstDigit","lastDigit","exponent","significandHigh","significandLow","biasedExponent","stringMatch","match","infMatch","nanMatch","unsignedNumber","e","expSign","expNumber","substr","digitsString","endOfString","roundDigit","roundBit","dIdx","significand","dec","COMBINATION_MASK","EXPONENT_MASK","COMBINATION_INFINITY","COMBINATION_NAN","midh","midl","combination","biased_exponent","significand_digits","Array","scientific_exponent","is_zero","significand_msb","significand128","j","k","least_digits","radix_position","$numberDecimal","decimal128","Decimal128_1","MinKey","min_key","MinKey_1","MaxKey","max_key","MaxKey_1","DBRef","collection","oid","db","fields","shift","o","$ref","$id","$db","db_ref","DBRef_1","lookup","revLookup","Arr","Uint8Array","inited","len","toByteArray","b64","l","tmp","placeHolders","arr","L","tripletToBase64","num","encodeChunk","uint8","start","end","output","fromByteArray","extraBytes","maxChunkLength","len2","read","offset","isLE","mLen","nBytes","m","eLen","eMax","eBias","nBits","s","NaN","Infinity","write","c","rt","abs","isArray","INSPECT_MAX_BYTES","Buffer$1","TYPED_ARRAY_SUPPORT","_kMaxLength","kMaxLength","createBuffer","that","RangeError","__proto__","arg","encodingOrOffset","allocUnsafe","poolSize","_augment","ArrayBuffer","fromArrayBuffer","fromObject","assertSize","alloc","fill","encoding","checked","allocUnsafeSlow","isEncoding","byteLength","actual","slice","fromArrayLike","byteOffset","internalIsBuffer","isnan","SlowBuffer","isBuffer","b","_isBuffer","a","x","y","String","concat","pos","buf","isView","loweredCase","utf8ToBytes","base64ToBytes","slowToString","hexSlice","utf8Slice","asciiSlice","latin1Slice","base64Slice","utf16leSlice","swap","swap16","swap32","swap64","apply","target","thisStart","thisEnd","thisCopy","targetCopy","bidirectionalIndexOf","dir","arrayIndexOf","lastIndexOf","indexSize","arrLength","valLength","read$$1","readUInt16BE","foundIndex","found","includes","hexWrite","Number","remaining","strLen","parsed","utf8Write","blitBuffer","asciiWrite","asciiToBytes","latin1Write","base64Write","ucs2Write","utf16leToBytes","write$$1","_arr","firstByte","codePoint","bytesPerSequence","secondByte","thirdByte","fourthByte","tempCodePoint","decodeCodePointsArray","MAX_ARGUMENTS_LENGTH","codePoints","fromCharCode","ret","out","toHex","newBuf","subarray","sliceLen","checkOffset","ext","readUIntLE","noAssert","mul","readUIntBE","readUInt8","readUInt16LE","readUInt32LE","readUInt32BE","readIntLE","readIntBE","readInt8","readInt16LE","readInt16BE","readInt32LE","readInt32BE","readFloatLE","readFloatBE","readDoubleLE","readDoubleBE","checkInt","writeUIntLE","maxBytes","writeUIntBE","writeUInt8","objectWriteUInt16","littleEndian","writeUInt16LE","writeUInt16BE","objectWriteUInt32","writeUInt32LE","writeUInt32BE","writeIntLE","limit","sub","writeIntBE","writeInt8","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","checkIEEE754","writeFloat","writeFloatLE","writeFloatBE","writeDouble","writeDoubleLE","writeDoubleBE","targetStart","INVALID_BASE64_RE","base64clean","stringtrim","trim","units","leadSurrogate","byteArray","hi","lo","src","dst","isFastBuffer","isSlowBuffer","bufferEs6","freeze","Buffer$2","Binary","subType","sub_type","position","BSON_BINARY_SUBTYPE_DEFAULT","writeStringToArray","BUFFER_SIZE","put","byte_value","decoded_byte","asRaw","newBuffer","convertArraytoUtf8BinaryString","startIndex","endIndex","SUBTYPE_DEFAULT","SUBTYPE_FUNCTION","SUBTYPE_BYTE_ARRAY","SUBTYPE_UUID_OLD","SUBTYPE_UUID","SUBTYPE_MD5","SUBTYPE_USER_DEFINED","binary","Binary_1","Long$1","Double$1","Timestamp$1","ObjectID$1","Code$1","MinKey$1","MaxKey$1","DBRef$1","BSONRegExp$1","Binary$1","deserialize","allowObjectSmallerThanBufferSize","deserializeObject","evalFunctions","cacheFunctions","cacheFunctionsCrc32","crc32","fieldsAsRaw","raw","bsonRegExp","promoteBuffers","promoteLongs","promoteValues","object","arrayIndex","elementType","BSON","BSON_DATA_STRING","stringSize","BSON_DATA_OID","BSON_DATA_INT","BSON_DATA_NUMBER","BSON_DATA_DATE","BSON_DATA_BOOLEAN","BSON_DATA_OBJECT","_index","objectSize","BSON_DATA_ARRAY","arrayOptions","stopIndex","BSON_DATA_UNDEFINED","BSON_DATA_NULL","BSON_DATA_LONG","long","JS_INT_MAX_LONG","JS_INT_MIN_LONG","BSON_DATA_DECIMAL128","decimal128$$1","toObject","BSON_DATA_BINARY","binarySize","totalBinarySize","_buffer","BSON_DATA_REGEXP","regExpOptions","optionsArray","BSON_DATA_SYMBOL","BSON_DATA_TIMESTAMP","BSON_DATA_MIN_KEY","BSON_DATA_MAX_KEY","BSON_DATA_CODE","functionString","hash","isolateEvalWithHash","functionCache","isolateEval","BSON_DATA_CODE_W_SCOPE","totalSize","scopeObject","BSON_DATA_DBPOINTER","namespace","oidBuffer","dollarKeys","startsWith","eval","bind","BSON_BINARY_SUBTYPE_FUNCTION","BSON_BINARY_SUBTYPE_BYTE_ARRAY","BSON_BINARY_SUBTYPE_UUID","BSON_BINARY_SUBTYPE_MD5","BSON_BINARY_SUBTYPE_USER_DEFINED","BSON_INT32_MAX","BSON_INT32_MIN","BSON_INT64_MAX","BSON_INT64_MIN","JS_INT_MAX","JS_INT_MIN","deserializer","readIEEE754","endian","bBE","writeIEEE754","readIEEE754_1","writeIEEE754_1","float_parser","normalizedFunctionString","utils","_typeof","iterator","writeIEEE754$1","Long$2","MinKey$2","Binary$2","normalizedFunctionString$1","regexp$1","isDate","isRegExp","serializeString","BSON$1","numberOfWrittenBytes","serializeNumber","longVal","serializeNull","serializeBoolean","serializeDate","dateInMilis","getTime","serializeRegExp","ignoreCase","multiline","serializeBSONRegExp","serializeMinMax","serializeObjectId","serializeBuffer","serializeObject","checkKeys","depth","serializeFunctions","ignoreUndefined","path","serializeInto","pop","serializeDecimal128","serializeLong","serializeInt32","serializeDouble","serializeFunction","serializeCode","codeSize","serializeBinary","serializeSymbol","serializeDBRef","startingIndex","toBSON","serializer","Long$3","Double$2","Timestamp$2","ObjectID$2","_Symbol$1","BSONRegExp$2","Code$2","MinKey$3","MaxKey$2","DBRef$2","Binary$3","normalizedFunctionString$2","isDate$1","calculateObjectSize","totalLength","calculateElement","BSON$2","ordered_values","calculate_size","MAXSIZE","BSON$3","serialize","minInternalBufferSize","serializationIndex","finishedBuffer","serializeWithBufferAndIndex","finalBuffer","deserializeStream","numberOfDocuments","documents","docStartIndex","Code_1$1","Map_1","Symbol_1$1","BSON_1","DBRef_1$1","Binary_1$1","ObjectID_1$1","Long_1$1","Timestamp_1$1","Double_1$1","Int32_1$1","MinKey_1$1","MaxKey_1$1","BSONRegExp_1$1","Decimal128_1$1","jsBson","newAuth","_platform","jwtDecode","EMBEDDED_USER_AUTH_DATA_PARTS","AuthFactory","Auth","providers","authObj","loggedInProviderType","appVersion","deviceInfo","sdkVersion","platformVersion","doSessionPost","protocol","host","pathname","_error","ourState","redirectProvider","redirectFragment","redirectState","parseRedirectFragment","lastError","console","history","replaceState","stateValid","ua","catch","splitCookies","document","sepIdx","cookieName","cookieVal","uaCookie","getCookie","userAuth","unmarshallUserAuth","withinSeconds","decodedToken","exp","authType","newUserAuth","setters","fragment","vars","shouldBreak","pairParts","pairKey","decodeURIComponent","theirState","createStorage","MemoryStorage","_data","_orderedKeys","_VERSION","_VERSION_KEY","_runMigration","migrations","store","getItem","item","setItem","_generateKey","removeItem","Storage","_migration","localStorage","sessionStorage","S3Service","bucket","acl","contentType","SESService","fromAddress","toAddress","subject","HTTPService","urlOrOptions","buildResponse","buildArgs","Collection","doc","docs","updateOp","project","MongoQuery","pipeline","aggregateOp","outgoingOptions","count","isMulti","upsert","findOp","database","execute","DB","MongoDBService","databaseName","TwilioService","to","convert","integer","toExtendedJSON","base64String","$binary","fromExtendedJSON","$code","$scope","$numberDouble","parseFloat","$numberInt","$numberLong","$maxKey","$minKey","$oid","$regularExpression","$symbol","t","codecs","BSONTypes","setBSONModule","keysToCodecs","deserializeValue","int32Range","int64Range","$undefined","$date","date","$dbPointer","reducer","indents","opts","serializeArray","serializeDocument","serializeValue","getISOString","isoStr","toISOString","getUTCMilliseconds","dateNum","inRange","tempScope","tempDoc","tempId","_doc","tempVal","flags"],"mappings":"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AAmD;AACxE;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,mBAAmB,UAAU;AAC7B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB,YAAY;AAC7B;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA,uCAAuC,SAAS;AAChD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,eAAe,iBAAiB;AAChC;AACA;AACA;;AAEA;AACA;AACA,aAAa,iBAAiB;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,gDAAgD,EAAE;AAClD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC;AACzC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA,wBAAwB,eAAe;AACvC;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,wBAAwB,QAAQ;AAChC;AACA,qBAAqB,eAAe;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB,YAAY;AAC7B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,qBAAqB,SAAS;AAC9B;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,qBAAqB,SAAS;AAC9B;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,qBAAqB,SAAS;AAC9B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB,kBAAkB;AACnC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,mBAAmB,cAAc;AACjC;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,uDAAuD,OAAO;AAC9D;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA,uDAAuD,OAAO;AAC9D;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,kBAAkB;AAClB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,qBAAqB,QAAQ;AAC7B;AACA;AACA,GAAG;AACH;AACA,eAAe,SAAS;AACxB;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA,mBAAmB,SAAS;AAC5B;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,eAAe,iBAAiB;AAChC;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,iBAAiB,YAAY;AAC7B;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,iBAAiB,gBAAgB;AACjC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB,gBAAgB;AACjC;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,iBAAiB,YAAY;AAC7B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;;;;;;AC5vDA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACNA;;AAEA;AACA;AACA;AACA,CAAC;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OC,OAAP,GAAiB;AACf1B,SAAOA,KADQ;AAEf1G,aAAWA,SAFI;AAGf4mC,iBAAeA,aAHA;AAIfhS,QAAMA;AAJS,CAAjB,C;;;;;;;ACrPA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,kCAAkC,SAAS;AAC3C;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,qBAAqB,SAAS;AAC9B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,0CAA0C,UAAU;AACpD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;;;;;;ACnHA;;AAEA;;AAEA;AACA;AACA;;AAEA;;;;;;;ACRA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA,oBAAoB;AACpB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;;;;;;AC1CA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;;;;;;AC/GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,QAAQ,WAAW;;AAEnB;AACA;AACA;AACA,QAAQ,WAAW;;AAEnB;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA,QAAQ,WAAW;;AAEnB;AACA;AACA,QAAQ,UAAU;;AAElB;AACA;;;;;;;ACnFA,iBAAiB;;AAEjB;AACA;AACA;;;;;;;ACJA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;;;;;;ACrCA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;;;;;;;;AChCA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;;;;;;;;ACzBA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,gCAAgC;AAChC;AACA;AACA;AACA;;AAEA;AACA;AACA,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH,kCAAkC;AAClC;AACA;AACA;;AAEA;AACA,EAAE;AACF;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,gBAAgB,sBAAsB;AACtC;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,kBAAkB,oBAAoB;AACtC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;;;;;ACzFA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,qCAAqC;;AAErC;AACA;AACA;;AAEA,2BAA2B;AAC3B;AACA;AACA;AACA,4BAA4B,UAAU;;;;;;;;ACvLtC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,sBAAsB,oBAAoB;;AAE1C;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA,EAAE;AACF;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,IAAI;;AAEJ;AACA;;AAEA;AACA,EAAE;AACF;AACA,EAAE;AACF;;;;;;;;AC5MA;AACA;AACA;AACA;AACA,EAAE;AACF;;;;;;;ACLA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,wCAAwC,mBAAmB;AAC3D;AACA;;AAEA;AACA;AACA,kCAAkC,oBAAoB;AACtD;AACA;;AAEA;AACA;AACA,wCAAwC,4BAA4B;AACpE;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,mBAAmB,iBAAiB;AACpC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA;AACA;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA,uDAAuD;AACvD,SAAS;AACT;AACA,SAAS;AACT,8EAA8E;AAC9E;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,8BAA8B,uBAAuB;AACrD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA,uCAAuC,0BAA0B;AACjE;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA,+BAA+B,0BAA0B,eAAe;AACxE;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,OAAO;;AAEP;AACA,KAAK;AACL;AACA;AACA,CAAC","file":"stitch.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"stitch\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"stitch\"] = factory();\n\telse\n\t\troot[\"stitch\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 15);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap e5d1b5ee4b64f872667d","import * as base64 from 'Base64';\n\n/**\n * @namespace util\n * @private\n */\n\n/**\n * Utility method for executing a service action as a function call.\n *\n * @memberof util\n * @param {Object} service the service to execute the action on\n * @param {String} action the service action to execute\n * @param {Array} args the arguments to supply to the service action invocation\n * @returns {Promise} the API response from the executed service action\n */\nfunction serviceResponse(service, { serviceName = service.serviceName, action, args }) {\n  const { client } = service;\n\n  if (!client) {\n    throw new Error('Service has no client');\n  }\n\n  return client.executeServiceFunction(serviceName, action, args);\n}\n\n/**\n * Utility function to encode a JSON object into a valid string that can be\n * inserted in a URI. The object is first stringified, then encoded in base64,\n * and finally encoded via the builtin encodeURIComponent function.\n *\n * @memberof util\n * @param {Object} obj The object to encode\n * @returns {String} The encoded object\n */\nfunction uriEncodeObject(obj) {\n  return encodeURIComponent(base64.btoa(JSON.stringify(obj)));\n}\n\nexport {\n  serviceResponse,\n  uriEncodeObject\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/util.js","export const USER_AUTH_KEY = '_stitch_ua';\nexport const REFRESH_TOKEN_KEY = '_stitch_rt';\nexport const DEVICE_ID_KEY = '_stitch_did';\nexport const STATE_KEY = '_stitch_state';\nexport const USER_AUTH_COOKIE_NAME = 'stitch_ua';\nexport const STITCH_ERROR_KEY = '_stitch_error';\nexport const STITCH_LINK_KEY = '_stitch_link';\nexport const USER_LOGGED_IN_PT_KEY = '_stitch_pt';\nexport const STITCH_REDIRECT_PROVIDER = '_stitch_rp';\n\nexport const DEFAULT_ACCESS_TOKEN_EXPIRE_WITHIN_SECS = 10;\n\nexport const APP_CLIENT_CODEC = {\n  'accessToken': 'access_token',\n  'refreshToken': 'refresh_token',\n  'deviceId': 'device_id',\n  'userId': 'user_id'\n};\n\nexport const ADMIN_CLIENT_CODEC = {\n  'accessToken': 'access_token',\n  'refreshToken': 'refresh_token',\n  'deviceId': 'device_id',\n  'userId': 'user_id'\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/auth/common.js","import { StitchError } from './errors';\n\nexport const JSONTYPE = 'application/json';\nexport const APP_CLIENT_TYPE = 'app';\nexport const ADMIN_CLIENT_TYPE = 'admin';\nexport const DEFAULT_STITCH_SERVER_URL = 'https://stitch.mongodb.com';\n\n// VERSION is substituted with the package.json version number at build time\nlet version = 'unknown';\nif (typeof VERSION !== 'undefined') {\n  version = VERSION;\n}\nexport const SDK_VERSION = version;\n\nexport const checkStatus = (response) => {\n  if (response.status >= 200 && response.status < 300) {\n    return response;\n  }\n\n  if (response.headers.get('Content-Type') === JSONTYPE) {\n    return response.json()\n      .then(json => {\n        const error = new StitchError(json.error, json.error_code);\n        error.response = response;\n        error.json = json;\n        return Promise.reject(error);\n      });\n  }\n\n  const error = new Error(response.statusText);\n  error.response = response;\n  return Promise.reject(error);\n};\n\nexport const makeFetchArgs = (method, body) => {\n  const init = {\n    method: method,\n    headers: { 'Accept': JSONTYPE, 'Content-Type': JSONTYPE }\n  };\n\n  if (body) {\n    init.body = body;\n  }\n\n  init.cors = true;\n  return init;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/common.js","/**\n * Creates a new StitchError\n *\n * @class\n * @augments Error\n * @param {String} message The error message.\n * @param {Object} code The error code.\n * @return {StitchError} A StitchError instance.\n */\nclass StitchError extends Error {\n  constructor(message, code) {\n    super(message);\n    this.name = 'StitchError';\n    this.message = message;\n    if (code !== undefined) {\n      this.code = code;\n    }\n\n    if (typeof Error.captureStackTrace === 'function') {\n      Error.captureStackTrace(this, this.constructor);\n    } else {\n      this.stack = (new Error(message)).stack;\n    }\n  }\n}\n\nconst ErrAuthProviderNotFound = 'AuthProviderNotFound';\nconst ErrInvalidSession = 'InvalidSession';\nconst ErrUnauthorized = 'Unauthorized';\n\n\nexport {\n  StitchError,\n  ErrAuthProviderNotFound,\n  ErrInvalidSession,\n  ErrUnauthorized\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/errors.js","/* global window, fetch */\n/* eslint no-labels: ['error', { 'allowLoop': true }] */\nimport 'fetch-everywhere';\nimport { AuthFactory } from './auth';\nimport { PROVIDER_TYPE_ANON } from './auth/providers';\nimport { APP_CLIENT_CODEC } from './auth/common';\nimport ServiceRegistry from './services';\nimport * as common from './common';\nimport ExtJSON from 'mongodb-extjson';\nimport queryString from 'query-string';\nimport {\n  StitchError,\n  ErrInvalidSession,\n  ErrUnauthorized\n} from './errors';\n\nconst v1 = 1;\nconst v2 = 2;\nconst v3 = 3;\nconst API_TYPE_PUBLIC = 'public';\nconst API_TYPE_PRIVATE = 'private';\nconst API_TYPE_CLIENT = 'client';\nconst API_TYPE_APP = 'app';\n\n/**\n  * StitchClientFactory is a singleton factory class which can be used to\n  * asynchronously create instances of {@link StitchClient}. StitchClientFactory\n  * is not meant to be instantiated. Use the static `create()` method to build\n  * a new StitchClient.\n  */\nexport class StitchClientFactory {\n  /**\n   * @hideconstructor\n   */\n  constructor() {\n    throw new StitchError('StitchClient can only be made from the StitchClientFactory.create function');\n  }\n\n  /**\n   * Creates a new {@link StitchClient}.\n   *\n   * @param {String} clientAppID the app ID of the Stitch application, which can be found in\n   * the \"Clients\" page of the Stitch admin console.\n   * @param {Object} [options = {}] additional options for creating the {@link StitchClient}.\n   */\n  static create(clientAppID, options = {}) {\n    return newStitchClient(StitchClient.prototype, clientAppID, options);\n  }\n}\n\nexport function newStitchClient(prototype, clientAppID, options = {}) {\n  let stitchClient = Object.create(prototype);\n  let baseUrl = common.DEFAULT_STITCH_SERVER_URL;\n  if (options.baseUrl) {\n    baseUrl = options.baseUrl;\n  }\n\n  stitchClient.clientAppID = clientAppID;\n\n  stitchClient.authUrl = (\n    clientAppID ?\n      `${baseUrl}/api/client/v2.0/app/${clientAppID}/auth` :\n      `${baseUrl}/api/admin/v3.0/auth`\n  );\n\n  stitchClient.rootURLsByAPIVersion = {\n    [v1]: {\n      [API_TYPE_PUBLIC]: `${baseUrl}/api/public/v1.0`,\n      [API_TYPE_CLIENT]: `${baseUrl}/api/client/v1.0`,\n      [API_TYPE_PRIVATE]: `${baseUrl}/api/private/v1.0`,\n      [API_TYPE_APP]: (clientAppID ?\n        `${baseUrl}/api/client/v1.0/app/${clientAppID}` :\n        `${baseUrl}/api/public/v1.0`)\n    },\n    [v2]: {\n      [API_TYPE_PUBLIC]: `${baseUrl}/api/public/v2.0`,\n      [API_TYPE_CLIENT]: `${baseUrl}/api/client/v2.0`,\n      [API_TYPE_PRIVATE]: `${baseUrl}/api/private/v2.0`,\n      [API_TYPE_APP]: (clientAppID ?\n        `${baseUrl}/api/client/v2.0/app/${clientAppID}` :\n        `${baseUrl}/api/public/v2.0`)\n    },\n    [v3]: {\n      [API_TYPE_PUBLIC]: `${baseUrl}/api/public/v3.0`,\n      [API_TYPE_CLIENT]: `${baseUrl}/api/client/v3.0`,\n      [API_TYPE_APP]: (clientAppID ?\n        `${baseUrl}/api/client/v3.0/app/${clientAppID}` :\n        `${baseUrl}/api/admin/v3.0`)\n    }\n  };\n\n  const authOptions = {\n    codec: APP_CLIENT_CODEC,\n    storage: options.storage\n  };\n\n  if (options.storageType) {\n    authOptions.storageType = options.storageType;\n  }\n  if (options.platform) {\n    authOptions.platform = options.platform;\n  }\n  if (options.authCodec) {\n    authOptions.codec = options.authCodec;\n  }\n\n  const authPromise = AuthFactory.create(stitchClient, stitchClient.authUrl, authOptions);\n  return authPromise.then(auth => {\n    stitchClient.auth = auth;\n    return Promise.all([\n      stitchClient.auth.handleRedirect(),\n      stitchClient.auth.handleCookie()\n    ]);\n  }).then(() => stitchClient);\n}\n/**\n * StitchClient is the fundamental way of communicating with MongoDB Stitch in your\n * application. Use StitchClient to authenticate users and to access Stitch services.\n * StitchClient is not meant to be instantiated directly. Use a\n * {@link StitchClientFactory} to create one.\n */\nexport class StitchClient {\n  /**\n   * @hideconstructor\n   */\n  constructor() {\n    let classname = this.constructor.name;\n    throw new StitchError(`${classname} can only be made from the ${classname}Factory.create function`);\n  }\n\n  get type() {\n    return common.APP_CLIENT_TYPE;\n  }\n\n  /**\n   * Login to Stitch instance, optionally providing a username and password. In\n   * the event that these are omitted, anonymous authentication is used.\n   *\n   * @param {String} [email] the email address used for login\n   * @param {String} [password] the password for the provided email address\n   * @param {Object} [options = {}] additional authentication options\n   * @returns {Promise} which resolve to a String value: the authenticated user ID.\n   */\n  login(email, password, options = {}) {\n    if (email === undefined || password === undefined) {\n      return this.authenticate(PROVIDER_TYPE_ANON, options);\n    }\n\n    return this.authenticate('userpass', Object.assign({ username: email, password }, options));\n  }\n\n  /**\n   * Send a request to the server indicating the provided email would like\n   * to sign up for an account. This will trigger a confirmation email containing\n   * a token which must be used with the `emailConfirm` method of the `userpass`\n   * auth provider in order to complete registration. The user will not be able\n   * to log in until that flow has been completed.\n   *\n   * @param {String} email the email used to sign up for the app\n   * @param {String} password the password used to sign up for the app\n   * @param {Object} [options = {}] additional authentication options\n   * @returns {Promise}\n   */\n  register(email, password, options = {}) {\n    return this.auth.provider('userpass').register(email, password, options);\n  }\n\n\n  /**\n   * Links the currently logged in user with another identity.\n   *\n   * @param {String} providerType the provider of the other identity (e.g. 'userpass', 'facebook', 'google')\n   * @param {Object} [options = {}] additional authentication options\n   * @returns {Promise} which resolves to a String value: the original user ID\n   */\n  linkWithProvider(providerType, options = {}) {\n    if (!this.isAuthenticated()) {\n      throw new StitchError('Must be authenticated to link an account');\n    }\n\n    return this.auth.provider(providerType).authenticate(options, true).then(() => this.authedId());\n  }\n\n  /**\n   * Submits an authentication request to the specified provider providing any\n   * included options (read: user data).  If auth data already exists and the\n   * existing auth data has an access token, then these credentials are returned.\n   *\n   * @param {String} providerType the provider used for authentication (The possible\n   *                 options are 'anon', 'userpass', 'custom', 'facebook', 'google',\n   *                 and 'apiKey')\n   * @param {Object} [options = {}] additional authentication options\n   * @returns {Promise} which resolves to a String value: the authenticated user ID\n   */\n  authenticate(providerType, options = {}) {\n    // reuse existing auth if present\n    const authenticateFn = () =>\n      this.auth.provider(providerType).authenticate(options).then(() => this.authedId());\n\n    if (this.isAuthenticated()) {\n      if (providerType === PROVIDER_TYPE_ANON && this.auth.getLoggedInProviderType() === PROVIDER_TYPE_ANON) {\n        return Promise.resolve(this.auth.authedId); // is authenticated, skip log in\n      }\n\n      return this.logout().then(() => authenticateFn()); // will not be authenticated, continue log in\n    }\n\n    // is not authenticated, continue log in\n    return authenticateFn();\n  }\n\n  /**\n   * Ends the session for the current user, and clears auth information from storage.\n   *\n   * @returns {Promise}\n   */\n  logout() {\n    return this._do(\n      '/auth/session',\n      'DELETE',\n      {\n        refreshOnFailure: false,\n        useRefreshToken: true,\n        rootURL: this.rootURLsByAPIVersion[v2][API_TYPE_CLIENT]\n      }\n    ).then(() => this.auth.clear(), () => this.auth.clear());\n  }\n\n  /**\n   * @returns {*} Returns any error from the Stitch authentication system.\n   */\n  authError() {\n    return this.auth.error();\n  }\n\n  /**\n   * Returns profile information for the currently logged in user.\n   *\n   * @returns {Promise} which resolves to a a JSON object containing user profile information.\n   */\n  userProfile() {\n    return this._do(\n      '/auth/profile',\n      'GET',\n      {rootURL: this.rootURLsByAPIVersion[v2][API_TYPE_CLIENT]},\n    ).then(response => response.json());\n  }\n\n  /**\n  * @returns {Boolean} whether or not the current client is authenticated.\n  */\n  isAuthenticated() {\n    return !!this.authedId();\n  }\n\n  /**\n   *  @returns {String} a string of the currently authenticated user's ID.\n   */\n  authedId() {\n    return this.auth.authedId;\n  }\n\n  /**\n   * Factory method for accessing Stitch services.\n   *\n   * @method\n   * @param {String} type the service type (e.g. \"mongodb\", \"aws-s3\", \"aws-ses\", \"twilio\", \"http\", etc.)\n   * @param {String} name the service name specified in the Stitch admin console.\n   * @returns {Object} returns an instance of the specified service type.\n   */\n  service(type, name) {\n    if (this.constructor !== StitchClient) {\n      throw new StitchError('`service` is a factory method, do not use `new`');\n    }\n\n    if (!ServiceRegistry.hasOwnProperty(type)) {\n      throw new StitchError('Invalid service type specified: ' + type);\n    }\n\n    const ServiceType = ServiceRegistry[type];\n    return new ServiceType(this, name);\n  }\n\n  /**\n   * Executes a function.\n   *\n   * @param {String} name The name of the function.\n   * @param {...*} args Arguments to pass to the function.\n   */\n  executeFunction(name, ...args) {\n    return this._doFunctionCall({\n      name,\n      arguments: args\n    });\n  }\n\n  /**\n   * Executes a service function.\n   *\n   * @param {String} service The name of the service.\n   * @param {String} action The name of the service action.\n   * @param {...*} args Arguments to pass to the service action.\n   */\n  executeServiceFunction(service, action, ...args) {\n    return this._doFunctionCall({\n      service,\n      name: action,\n      arguments: args\n    });\n  }\n\n  _doFunctionCall(request) {\n    let responseDecoder = (d) => ExtJSON.parse(d, { relaxed: true });\n    let responseEncoder = (d) => ExtJSON.stringify(d, { strict: true });\n\n    return this._do('/functions/call', 'POST', { body: responseEncoder(request) })\n      .then(response => response.text())\n      .then(body => responseDecoder(body));\n  }\n\n  /**\n   * Returns an access token for the user\n   *\n   * @private\n   * @returns {Promise}\n   */\n  doSessionPost() {\n    return this._do(\n      '/auth/session',\n      'POST',\n      {\n        refreshOnFailure: false,\n        useRefreshToken: true,\n        rootURL: this.rootURLsByAPIVersion[v2][API_TYPE_CLIENT]\n      }\n    )\n      .then(response => response.json());\n  }\n\n  /**\n   * Returns the user API keys associated with the current user.\n   *\n   * @returns {Promise} which resolves to an array of API key objects\n   */\n  getApiKeys() {\n    return this._do(\n      '/auth/api_keys',\n      'GET',\n      {\n        rootURL: this.rootURLsByAPIVersion[v2][API_TYPE_CLIENT],\n        useRefreshToken: true\n      },\n    )\n      .then((response) => response.json());\n  }\n\n  /**\n   * Creates a user API key that can be used to authenticate as the current user.\n   *\n   * @param {String} userApiKeyName a unique name for the user API key\n   * @returns {Promise} which resolves to an API key object containing the API key value\n   */\n  createApiKey(userApiKeyName) {\n    return this._do(\n      '/auth/api_keys',\n      'POST',\n      { rootURL: this.rootURLsByAPIVersion[v2][API_TYPE_CLIENT],\n        useRefreshToken: true,\n        body: JSON.stringify({'name': userApiKeyName})\n      },\n    )\n      .then((response) => response.json());\n  }\n\n  /**\n   * Returns a user API key associated with the current user.\n   *\n   * @param {String} keyID the ID of the key to fetch\n   * @returns {Promise} which resolves to an API key object, although the API key value will be omitted\n   */\n  getApiKeyByID(keyID) {\n    return this._do(\n      `/auth/api_keys/${keyID}`,\n      'GET',\n      {\n        rootURL: this.rootURLsByAPIVersion[v2][API_TYPE_CLIENT],\n        useRefreshToken: true\n      },\n    )\n      .then((response) => response.json());\n  }\n\n  /**\n   * Deletes a user API key associated with the current user.\n   *\n   * @param {String} keyID the ID of the key to delete\n   * @returns {Promise}\n   */\n  deleteApiKeyByID(keyID) {\n    return this._do(\n      `/auth/api_keys/${keyID}`,\n      'DELETE',\n      {\n        rootURL: this.rootURLsByAPIVersion[v2][API_TYPE_CLIENT],\n        useRefreshToken: true\n      },\n    );\n  }\n\n  /**\n   * Enables a user API key associated with the current user.\n   *\n   * @param {String} keyID the ID of the key to enable\n   * @returns {Promise}\n   */\n  enableApiKeyByID(keyID) {\n    return this._do(\n      `/auth/api_keys/${keyID}/enable`,\n      'PUT',\n      {\n        rootURL: this.rootURLsByAPIVersion[v2][API_TYPE_CLIENT],\n        useRefreshToken: true\n      },\n    );\n  }\n\n  /**\n   * Disables a user API key associated with the current user.\n   *\n   * @param {String} keyID the ID of the key to disable\n   * @returns {Promise}\n   */\n  disableApiKeyByID(keyID) {\n    return this._do(\n      `/auth/api_keys/${keyID}/disable`,\n      'PUT',\n      {\n        rootURL: this.rootURLsByAPIVersion[v2][API_TYPE_CLIENT],\n        useRefreshToken: true\n      },\n    );\n  }\n\n  _fetch(url, fetchArgs, resource, method, options) {\n    return fetch(url, fetchArgs)\n      .then(response => {\n        // Okay: passthrough\n        if (response.status >= 200 && response.status < 300) {\n          return Promise.resolve(response);\n        }\n\n        if (response.headers.get('Content-Type') === common.JSONTYPE) {\n          return response.json()\n            .then(json => {\n              // Only want to try refreshing token when there's an invalid session\n              if ('error_code' in json && json.error_code === ErrInvalidSession) {\n                if (!options.refreshOnFailure) {\n                  return this.auth.clear().then(() => {\n                    const error = new StitchError(json.error, json.error_code);\n                    error.response = response;\n                    error.json = json;\n                    throw error;\n                  });\n                }\n\n                return this.auth.refreshToken()\n                  .then(() => {\n                    options.refreshOnFailure = false;\n                    return this._do(resource, method, options);\n                  });\n              }\n\n              const error = new StitchError(json.error, json.error_code);\n              error.response = response;\n              error.json = json;\n              return Promise.reject(error);\n            });\n        }\n\n        const error = new Error(response.statusText);\n        error.response = response;\n        return Promise.reject(error);\n      });\n  }\n\n  _fetchArgs(resource, method, options) {\n    const appURL = this.rootURLsByAPIVersion[options.apiVersion][options.apiType];\n    let url = `${appURL}${resource}`;\n    if (options.rootURL) {\n      url = `${options.rootURL}${resource}`;\n    }\n    let fetchArgs = common.makeFetchArgs(method, options.body);\n\n    if (!!options.headers) {\n      Object.assign(fetchArgs.headers, options.headers);\n    }\n\n    if (options.queryParams) {\n      url = `${url}?${queryString.stringify(options.queryParams)}`;\n    }\n\n    return { url, fetchArgs };\n  }\n\n  _do(resource, method, options) {\n    options = Object.assign({}, {\n      refreshOnFailure: true,\n      useRefreshToken: false,\n      apiVersion: v2,\n      apiType: API_TYPE_APP,\n      rootURL: undefined\n    }, options);\n\n    let { url, fetchArgs } = this._fetchArgs(resource, method, options);\n    if (options.noAuth) {\n      return this._fetch(url, fetchArgs, resource, method, options);\n    }\n\n    if (!this.isAuthenticated()) {\n      return Promise.reject(new StitchError('Must auth first', ErrUnauthorized));\n    }\n    const token =\n      options.useRefreshToken ? this.auth.getRefreshToken() : this.auth.getAccessToken();\n\n    fetchArgs.headers.Authorization = `Bearer ${token}`;\n    return this._fetch(url, fetchArgs, resource, method, options);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/client.js","'use strict';\nconst ExtJSON = require('./lib/ext_json');\nmodule.exports = ExtJSON;\n\n\n\n// WEBPACK FOOTER //\n// ./~/mongodb-extjson/index.js","/**\n * @private\n * @module auth\n */\nimport * as common from '../common';\nimport * as authCommon from './common';\nimport { uriEncodeObject } from '../util';\n\nexport const PROVIDER_TYPE_ANON = 'anon';\nexport const PROVIDER_TYPE_CUSTOM = 'custom';\nexport const PROVIDER_TYPE_USERPASS = 'userpass';\nexport const PROVIDER_TYPE_APIKEY = 'apiKey';\nexport const PROVIDER_TYPE_GOOGLE = 'google';\nexport const PROVIDER_TYPE_FACEBOOK = 'facebook';\nexport const PROVIDER_TYPE_MONGODB_CLOUD = 'mongodbCloud';\n\nfunction urlWithLinkParam(url, link) {\n  if (link) {\n    return url + '?link=true';\n  }\n\n  return url;\n}\n\n/**\n * @private\n * @namespace\n */\nfunction anonProvider(auth) {\n  return {\n    /**\n     * Login to a stitch application using anonymous authentication\n     *\n     * @memberof anonProvider\n     * @instance\n     * @returns {Promise} a promise that resolves when authentication succeeds.\n     */\n    authenticate: (options, link) => {\n      const deviceId = auth.getDeviceId();\n      const device = auth.getDeviceInfo(deviceId, !!auth.client && auth.client.clientAppID);\n      const fetchArgs = common.makeFetchArgs('GET');\n      fetchArgs.cors = true;\n\n      return fetch(\n        urlWithLinkParam(`${auth.rootUrl}/providers/anon-user/login?device=${uriEncodeObject(device)}`, link),\n        auth.fetchArgsWithLink(fetchArgs, link)\n      ).then(common.checkStatus)\n        .then(response => response.json())\n        .then(json => auth.set(json, PROVIDER_TYPE_ANON));\n    }\n  };\n}\n\n/**\n  * @private\n  * @namespace\n  */\nfunction customProvider(auth) {\n  const providerRoute = 'providers/custom-token';\n  const loginRoute = `${providerRoute}/login`;\n\n  return {\n    /**\n     * Login to a stitch application using custom authentication\n     *\n     * @memberof customProvider\n     * @instance\n     * @param {String} JWT token to use for authentication\n     * @returns {Promise} a promise that resolves when authentication succeeds.\n     */\n    authenticate: (token, link) => {\n      const deviceId = auth.getDeviceId();\n      const device = auth.getDeviceInfo(deviceId, !!auth.client && auth.client.clientAppID);\n\n      const fetchArgs = common.makeFetchArgs(\n        'POST',\n        JSON.stringify({ token, options: { device } })\n      );\n      fetchArgs.cors = true;\n\n      return fetch(urlWithLinkParam(`${auth.rootUrl}/${loginRoute}`, link), auth.fetchArgsWithLink(fetchArgs, link))\n        .then(common.checkStatus)\n        .then(response => response.json())\n        .then(json => auth.set(json, PROVIDER_TYPE_CUSTOM));\n    }\n  };\n}\n\n/**\n * userPassProvider offers several methods for completing certain tasks necessary for email/password\n * authentication. userPassProvider cannot be instantiated directly. To instantiate,\n * use `.auth.providers('userpass')` on a {@link StitchClient}.\n *\n * @namespace\n */\nfunction userPassProvider(auth) {\n  // The ternary expression here is redundant but is just preserving previous behavior based on whether or not\n  // the client is for the admin or client API.\n  const providerRoute = auth.isAppClient() ? 'providers/local-userpass' : 'providers/local-userpass';\n  const loginRoute = auth.isAppClient() ? `${providerRoute}/login` : `${providerRoute}/login`;\n\n  return {\n    /**\n     * Login to a stitch application using username and password authentication\n     *\n     * @private\n     * @memberof userPassProvider\n     * @instance\n     * @param {String} username the username to use for authentication\n     * @param {String} password the password to use for authentication\n     * @returns {Promise} a promise that resolves when authentication succeeds.\n     */\n    authenticate: ({ username, password }, link) => {\n      const deviceId = auth.getDeviceId();\n      const device = auth.getDeviceInfo(deviceId, !!auth.client && auth.client.clientAppID);\n\n      const fetchArgs = common.makeFetchArgs(\n        'POST',\n        JSON.stringify({ username, password, options: { device } })\n      );\n      fetchArgs.cors = true;\n\n      return fetch(urlWithLinkParam(`${auth.rootUrl}/${loginRoute}`, link), auth.fetchArgsWithLink(fetchArgs, link))\n        .then(common.checkStatus)\n        .then(response => response.json())\n        .then(json => auth.set(json, PROVIDER_TYPE_USERPASS));\n    },\n\n    /**\n     * Completes the email confirmation workflow from the Stitch server\n     *\n     * @memberof userPassProvider\n     * @instance\n     * @param {String} tokenId the tokenId provided by the Stitch server\n     * @param {String} token the token provided by the Stitch server\n     * @returns {Promise}\n     */\n    emailConfirm: (tokenId, token) => {\n      const fetchArgs = common.makeFetchArgs('POST', JSON.stringify({ tokenId, token }));\n      fetchArgs.cors = true;\n\n      return fetch(`${auth.rootUrl}/${providerRoute}/confirm`, fetchArgs)\n        .then(common.checkStatus)\n        .then(response => response.json());\n    },\n\n    /**\n     * Request that the stitch server send another email confirmation\n     * for account creation.\n     *\n     * @memberof userPassProvider\n     * @instance\n     * @param {String} email the email address to send a confirmation email for\n     * @returns {Promise}\n     */\n    sendEmailConfirm: (email) => {\n      const fetchArgs = common.makeFetchArgs('POST', JSON.stringify({ email }));\n      fetchArgs.cors = true;\n\n      return fetch(`${auth.rootUrl}/${providerRoute}/confirm/send`, fetchArgs)\n        .then(common.checkStatus)\n        .then(response => response.json());\n    },\n\n    /**\n     * Sends a password reset request to the Stitch server\n     *\n     * @memberof userPassProvider\n     * @instance\n     * @param {String} email the email address of the account to reset the password for\n     * @returns {Promise}\n     */\n    sendPasswordReset: (email) => {\n      const fetchArgs = common.makeFetchArgs('POST', JSON.stringify({ email }));\n      fetchArgs.cors = true;\n\n      return fetch(`${auth.rootUrl}/${providerRoute}/reset/send`, fetchArgs)\n        .then(common.checkStatus)\n        .then(response => response.json());\n    },\n\n    /**\n     * Use information returned from the Stitch server to complete the password\n     * reset flow for a given email account, providing a new password for the account.\n     *\n     * @memberof userPassProvider\n     * @instance\n     * @param {String} tokenId the tokenId provided by the Stitch server\n     * @param {String} token the token provided by the Stitch server\n     * @param {String} password the new password requested for this account\n     * @returns {Promise}\n     */\n    passwordReset: (tokenId, token, password) => {\n      const fetchArgs =\n        common.makeFetchArgs('POST', JSON.stringify({ tokenId, token, password }));\n      fetchArgs.cors = true;\n\n      return fetch(`${auth.rootUrl}/${providerRoute}/reset`, fetchArgs)\n        .then(common.checkStatus)\n        .then(response => response.json());\n    },\n\n\n    /**\n     * Will trigger an email to the requested account containing a link with the\n     * token and tokenId that must be returned to the server using emailConfirm()\n     * to activate the account.\n     *\n     * @memberof userPassProvider\n     * @instance\n     * @param {String} email the requested email for the account\n     * @param {String} password the requested password for the account\n     * @returns {Promise}\n     */\n    register: (email, password) => {\n      const fetchArgs = common.makeFetchArgs('POST', JSON.stringify({ email, password }));\n      fetchArgs.cors = true;\n\n      return fetch(`${auth.rootUrl}/${providerRoute}/register`, fetchArgs)\n        .then(common.checkStatus)\n        .then(response => response.json());\n    }\n  };\n}\n\n/**\n * @private\n * @namespace\n */\nfunction apiKeyProvider(auth) {\n  // The ternary expression here is redundant but is just preserving previous behavior based on whether or not\n  // the client is for the admin or client API.\n  const loginRoute = auth.isAppClient() ? 'providers/api-key/login' : 'providers/api-key/login';\n\n  return {\n    /**\n     * Login to a stitch application using an api key\n     *\n     * @memberof apiKeyProvider\n     * @instance\n     * @param {String} key the key for authentication\n     * @returns {Promise} a promise that resolves when authentication succeeds.\n     */\n    authenticate: (key, link) => {\n      const deviceId = auth.getDeviceId();\n      const device = auth.getDeviceInfo(deviceId, !!auth.client && auth.client.clientAppID);\n      const fetchArgs = common.makeFetchArgs(\n        'POST',\n        JSON.stringify({ 'key': key, 'options': { device } })\n      );\n      fetchArgs.cors = true;\n\n      return fetch(urlWithLinkParam(`${auth.rootUrl}/${loginRoute}`, link), auth.fetchArgsWithLink(fetchArgs, link))\n        .then(common.checkStatus)\n        .then(response => response.json())\n        .then(json => auth.set(json, PROVIDER_TYPE_APIKEY));\n    }\n  };\n}\n\n// The state we generate is to be used for any kind of request where we will\n// complete an authentication flow via a redirect. We store the generate in\n// a local storage bound to the app's origin. This ensures that any time we\n// receive a redirect, there must be a state parameter and it must match\n// what we ourselves have generated. This state MUST only be sent to\n// a trusted Stitch endpoint in order to preserve its integrity. Stitch will\n// store it in some way on its origin (currently a cookie stored on this client)\n// and use that state at the end of an auth flow as a parameter in the redirect URI.\nconst alpha = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\nfunction generateState() {\n  let state = '';\n  for (let i = 0; i < 64; ++i) {\n    state += alpha.charAt(Math.floor(Math.random() * alpha.length));\n  }\n\n  return state;\n}\n\nfunction getOAuthLoginURL(auth, providerName, redirectUrl) {\n  if (redirectUrl === undefined) {\n    redirectUrl = auth.pageRootUrl();\n  }\n\n  const state = generateState();\n  return auth.storage.set(authCommon.STATE_KEY, state)\n    .then(() => auth.getDeviceId())\n    .then(deviceId => {\n      const device = auth.getDeviceInfo(deviceId, !!auth.client && auth.client.clientAppID);\n\n      const result = `${auth.rootUrl}/providers/oauth2-${providerName}/login?redirect=${encodeURI(redirectUrl)}&state=${state}&device=${uriEncodeObject(device)}`;\n      return result;\n    });\n}\n\n/**\n * @private\n * @namespace\n */\nfunction googleProvider(auth) {\n  const loginRoute = auth.isAppClient() ? 'providers/oauth2-google/login' : 'providers/oauth2-google/login';\n\n  return {\n    /**\n     * Login to a stitch application using google authentication\n     *\n     * @memberof googleProvider\n     * @instance\n     * @param {Object} data the redirectUrl data to use for authentication\n     * @returns {Promise} a promise that resolves when authentication succeeds.\n     */\n    authenticate: (data, link) => {\n      let { authCode } = data;\n      if (authCode) {\n        const deviceId = auth.getDeviceId();\n        const device = auth.getDeviceInfo(deviceId, !!auth.client && auth.client.clientAppID);\n\n        const fetchArgs = common.makeFetchArgs(\n          'POST',\n          JSON.stringify({ authCode, options: { device } })\n        );\n\n        return fetch(urlWithLinkParam(`${auth.rootUrl}/${loginRoute}`, link), auth.fetchArgsWithLink(fetchArgs, link))\n          .then(common.checkStatus)\n          .then(response => response.json())\n          .then(json => auth.set(json, PROVIDER_TYPE_GOOGLE));\n      }\n\n      const redirectUrl = (data && data.redirectUrl) ? data.redirectUrl : undefined;\n      return auth.storage.set(authCommon.STITCH_REDIRECT_PROVIDER, PROVIDER_TYPE_GOOGLE)\n        .then(() => getOAuthLoginURL(auth, PROVIDER_TYPE_GOOGLE, redirectUrl))\n        .then((res) => window.location.replace(res));\n    }\n  };\n}\n\n/**\n * @private\n * @namespace\n */\nfunction facebookProvider(auth) {\n  const loginRoute = auth.isAppClient() ? 'providers/oauth2-facebook/login' : 'providers/oauth2-facebook/login';\n\n  return {\n    /**\n     * Login to a stitch application using facebook authentication\n     *\n     * @memberof facebookProvider\n     * @instance\n     * @param {Object} data the redirectUrl data to use for authentication\n     * @returns {Promise} a promise that resolves when authentication succeeds.\n     */\n    authenticate: (data, link) => {\n      let { accessToken } = data;\n\n      if (accessToken) {\n        const deviceId = auth.getDeviceId();\n        const device = auth.getDeviceInfo(deviceId, !!auth.client && auth.client.clientAppID);\n\n        const fetchArgs = common.makeFetchArgs(\n          'POST',\n          JSON.stringify({ accessToken, options: { device } })\n        );\n\n        return fetch(urlWithLinkParam(`${auth.rootUrl}/${loginRoute}`, link), auth.fetchArgsWithLink(fetchArgs, link))\n          .then(common.checkStatus)\n          .then(response => response.json())\n          .then(json => auth.set(json, PROVIDER_TYPE_FACEBOOK));\n      }\n\n      const redirectUrl = (data && data.redirectUrl) ? data.redirectUrl : undefined;\n      return auth.storage.set(authCommon.STITCH_REDIRECT_PROVIDER, PROVIDER_TYPE_FACEBOOK)\n        .then(() => getOAuthLoginURL(auth, PROVIDER_TYPE_FACEBOOK, redirectUrl))\n        .then((res) => window.location.replace(res));\n    }\n  };\n}\n\n/**\n * @private\n * @namespace\n */\nfunction mongodbCloudProvider(auth) {\n  // The ternary expression here is redundant but is just preserving previous behavior based on whether or not\n  // the client is for the admin or client API.\n  const loginRoute = auth.isAppClient() ? 'providers/mongodb-cloud/login' : 'providers/mongodb-cloud/login';\n\n  return {\n    /**\n     * Login to a stitch application using mongodb cloud authentication\n     *\n     * @memberof mongodbCloudProvider\n     * @instance\n     * @param {Object} data the username, apiKey, cors, and cookie data to use for authentication\n     * @returns {Promise} a promise that resolves when authentication succeeds.\n     */\n    authenticate: (data, link) => {\n      const { username, apiKey, cors, cookie } = data;\n      const options = Object.assign({}, { cors: true, cookie: false }, { cors: cors, cookie: cookie });\n      const deviceId = auth.getDeviceId();\n      const device = auth.getDeviceInfo(deviceId, !!auth.client && auth.client.clientAppID);\n      const fetchArgs = common.makeFetchArgs(\n        'POST',\n        JSON.stringify({ username, apiKey, options: { device } })\n      );\n      fetchArgs.cors = true;  // TODO: shouldn't this use the passed in `cors` value?\n      fetchArgs.credentials = 'include';\n\n      let url = urlWithLinkParam(`${auth.rootUrl}/${loginRoute}`, link);\n      if (options.cookie) {\n        return fetch(url + '?cookie=true', fetchArgs)\n          .then(common.checkStatus);\n      }\n\n      return fetch(url, auth.fetchArgsWithLink(fetchArgs, link))\n        .then(common.checkStatus)\n        .then(response => response.json())\n        .then(json => auth.set(json, PROVIDER_TYPE_MONGODB_CLOUD));\n    }\n  };\n}\n\n// TODO: support auth-specific options\nfunction createProviders(auth, options = {}) {\n  return {\n    [PROVIDER_TYPE_ANON]: anonProvider(auth),\n    [PROVIDER_TYPE_APIKEY]: apiKeyProvider(auth),\n    [PROVIDER_TYPE_GOOGLE]: googleProvider(auth),\n    [PROVIDER_TYPE_FACEBOOK]: facebookProvider(auth),\n    [PROVIDER_TYPE_MONGODB_CLOUD]: mongodbCloudProvider(auth),\n    [PROVIDER_TYPE_USERPASS]: userPassProvider(auth),\n    [PROVIDER_TYPE_CUSTOM]: customProvider(auth)\n  };\n}\n\nexport { createProviders };\n\n\n\n// WEBPACK FOOTER //\n// ./src/auth/providers.js","/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n'use strict'\n\nvar base64 = require('base64-js')\nvar ieee754 = require('ieee754')\nvar isArray = require('isarray')\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Use Object implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * Due to various browser bugs, sometimes the Object implementation will be used even\n * when the browser supports typed arrays.\n *\n * Note:\n *\n *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,\n *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.\n *\n *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.\n *\n *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of\n *     incorrect length in some situations.\n\n * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they\n * get the Object implementation, which is slower but behaves correctly.\n */\nBuffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined\n  ? global.TYPED_ARRAY_SUPPORT\n  : typedArraySupport()\n\n/*\n * Export kMaxLength after typed array support is determined.\n */\nexports.kMaxLength = kMaxLength()\n\nfunction typedArraySupport () {\n  try {\n    var arr = new Uint8Array(1)\n    arr.__proto__ = {__proto__: Uint8Array.prototype, foo: function () { return 42 }}\n    return arr.foo() === 42 && // typed array instances can be augmented\n        typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`\n        arr.subarray(1, 1).byteLength === 0 // ie10 has broken `subarray`\n  } catch (e) {\n    return false\n  }\n}\n\nfunction kMaxLength () {\n  return Buffer.TYPED_ARRAY_SUPPORT\n    ? 0x7fffffff\n    : 0x3fffffff\n}\n\nfunction createBuffer (that, length) {\n  if (kMaxLength() < length) {\n    throw new RangeError('Invalid typed array length')\n  }\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = new Uint8Array(length)\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    if (that === null) {\n      that = new Buffer(length)\n    }\n    that.length = length\n  }\n\n  return that\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer (arg, encodingOrOffset, length) {\n  if (!Buffer.TYPED_ARRAY_SUPPORT && !(this instanceof Buffer)) {\n    return new Buffer(arg, encodingOrOffset, length)\n  }\n\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new Error(\n        'If encoding is specified then the first argument must be a string'\n      )\n    }\n    return allocUnsafe(this, arg)\n  }\n  return from(this, arg, encodingOrOffset, length)\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\n// TODO: Legacy, not needed anymore. Remove in next major version.\nBuffer._augment = function (arr) {\n  arr.__proto__ = Buffer.prototype\n  return arr\n}\n\nfunction from (that, value, encodingOrOffset, length) {\n  if (typeof value === 'number') {\n    throw new TypeError('\"value\" argument must not be a number')\n  }\n\n  if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {\n    return fromArrayBuffer(that, value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'string') {\n    return fromString(that, value, encodingOrOffset)\n  }\n\n  return fromObject(that, value)\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(null, value, encodingOrOffset, length)\n}\n\nif (Buffer.TYPED_ARRAY_SUPPORT) {\n  Buffer.prototype.__proto__ = Uint8Array.prototype\n  Buffer.__proto__ = Uint8Array\n  if (typeof Symbol !== 'undefined' && Symbol.species &&\n      Buffer[Symbol.species] === Buffer) {\n    // Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97\n    Object.defineProperty(Buffer, Symbol.species, {\n      value: null,\n      configurable: true\n    })\n  }\n}\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be a number')\n  } else if (size < 0) {\n    throw new RangeError('\"size\" argument must not be negative')\n  }\n}\n\nfunction alloc (that, size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(that, size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpretted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(that, size).fill(fill, encoding)\n      : createBuffer(that, size).fill(fill)\n  }\n  return createBuffer(that, size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(null, size, fill, encoding)\n}\n\nfunction allocUnsafe (that, size) {\n  assertSize(size)\n  that = createBuffer(that, size < 0 ? 0 : checked(size) | 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) {\n    for (var i = 0; i < size; ++i) {\n      that[i] = 0\n    }\n  }\n  return that\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(null, size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(null, size)\n}\n\nfunction fromString (that, string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('\"encoding\" must be a valid string encoding')\n  }\n\n  var length = byteLength(string, encoding) | 0\n  that = createBuffer(that, length)\n\n  var actual = that.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    that = that.slice(0, actual)\n  }\n\n  return that\n}\n\nfunction fromArrayLike (that, array) {\n  var length = array.length < 0 ? 0 : checked(array.length) | 0\n  that = createBuffer(that, length)\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255\n  }\n  return that\n}\n\nfunction fromArrayBuffer (that, array, byteOffset, length) {\n  array.byteLength // this throws if `array` is not a valid ArrayBuffer\n\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\\'offset\\' is out of bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\\'length\\' is out of bounds')\n  }\n\n  if (byteOffset === undefined && length === undefined) {\n    array = new Uint8Array(array)\n  } else if (length === undefined) {\n    array = new Uint8Array(array, byteOffset)\n  } else {\n    array = new Uint8Array(array, byteOffset, length)\n  }\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = array\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    that = fromArrayLike(that, array)\n  }\n  return that\n}\n\nfunction fromObject (that, obj) {\n  if (Buffer.isBuffer(obj)) {\n    var len = checked(obj.length) | 0\n    that = createBuffer(that, len)\n\n    if (that.length === 0) {\n      return that\n    }\n\n    obj.copy(that, 0, 0, len)\n    return that\n  }\n\n  if (obj) {\n    if ((typeof ArrayBuffer !== 'undefined' &&\n        obj.buffer instanceof ArrayBuffer) || 'length' in obj) {\n      if (typeof obj.length !== 'number' || isnan(obj.length)) {\n        return createBuffer(that, 0)\n      }\n      return fromArrayLike(that, obj)\n    }\n\n    if (obj.type === 'Buffer' && isArray(obj.data)) {\n      return fromArrayLike(that, obj.data)\n    }\n  }\n\n  throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < kMaxLength()` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= kMaxLength()) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + kMaxLength().toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return !!(b != null && b._isBuffer)\n}\n\nBuffer.compare = function compare (a, b) {\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError('Arguments must be Buffers')\n  }\n\n  if (a === b) return 0\n\n  var x = a.length\n  var y = b.length\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  var i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  var buffer = Buffer.allocUnsafe(length)\n  var pos = 0\n  for (i = 0; i < list.length; ++i) {\n    var buf = list[i]\n    if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    }\n    buf.copy(buffer, pos)\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length\n  }\n  if (typeof ArrayBuffer !== 'undefined' && typeof ArrayBuffer.isView === 'function' &&\n      (ArrayBuffer.isView(string) || string instanceof ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    string = '' + string\n  }\n\n  var len = string.length\n  if (len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n      case undefined:\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) return utf8ToBytes(string).length // assume utf8\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  var loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coersion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect\n// Buffer instances.\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  var i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  var len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (var i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  var len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (var i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  var len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (var i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  var length = this.length | 0\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  var str = ''\n  var max = exports.INSPECT_MAX_BYTES\n  if (this.length > 0) {\n    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')\n    if (this.length > max) str += ' ... '\n  }\n  return '<Buffer ' + str + '>'\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError('Argument must be a Buffer')\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  var x = thisEnd - thisStart\n  var y = end - start\n  var len = Math.min(x, y)\n\n  var thisCopy = this.slice(thisStart, thisEnd)\n  var targetCopy = target.slice(start, end)\n\n  for (var i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset  // Coerce to Number.\n  if (isNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (Buffer.TYPED_ARRAY_SUPPORT &&\n        typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [ val ], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  var indexSize = 1\n  var arrLength = arr.length\n  var valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  var i\n  if (dir) {\n    var foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      var found = true\n      for (var j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  var remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  // must be an even number of digits\n  var strLen = string.length\n  if (strLen % 2 !== 0) throw new TypeError('Invalid hex string')\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  for (var i = 0; i < length; ++i) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (isNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction latin1Write (buf, string, offset, length) {\n  return asciiWrite(buf, string, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset | 0\n    if (isFinite(length)) {\n      length = length | 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  // legacy write(string, encoding, offset, length) - remove in v0.13\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  var remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n        return asciiWrite(this, string, offset, length)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Write(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  var res = []\n\n  var i = start\n  while (i < end) {\n    var firstByte = buf[i]\n    var codePoint = null\n    var bytesPerSequence = (firstByte > 0xEF) ? 4\n      : (firstByte > 0xDF) ? 3\n      : (firstByte > 0xBF) ? 2\n      : 1\n\n    if (i + bytesPerSequence <= end) {\n      var secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nvar MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  var len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  var res = ''\n  var i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  var len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  var out = ''\n  for (var i = start; i < end; ++i) {\n    out += toHex(buf[i])\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  var bytes = buf.slice(start, end)\n  var res = ''\n  for (var i = 0; i < bytes.length; i += 2) {\n    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256)\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  var len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  var newBuf\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    newBuf = this.subarray(start, end)\n    newBuf.__proto__ = Buffer.prototype\n  } else {\n    var sliceLen = end - start\n    newBuf = new Buffer(sliceLen, undefined)\n    for (var i = 0; i < sliceLen; ++i) {\n      newBuf[i] = this[i + start]\n    }\n  }\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  var val = this[offset + --byteLength]\n  var mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var i = byteLength\n  var mul = 1\n  var val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var mul = 1\n  var i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nfunction objectWriteUInt16 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; ++i) {\n    buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>\n      (littleEndian ? i : 1 - i) * 8\n  }\n}\n\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nfunction objectWriteUInt32 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffffffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; ++i) {\n    buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff\n  }\n}\n\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset + 3] = (value >>> 24)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 1] = (value >>> 8)\n    this[offset] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = 0\n  var mul = 1\n  var sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  var sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 3] = (value >>> 24)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  var len = end - start\n  var i\n\n  if (this === target && start < targetStart && targetStart < end) {\n    // descending copy from end\n    for (i = len - 1; i >= 0; --i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\n    // ascending copy from start\n    for (i = 0; i < len; ++i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, start + len),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (val.length === 1) {\n      var code = val.charCodeAt(0)\n      if (code < 256) {\n        val = code\n      }\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  var i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    var bytes = Buffer.isBuffer(val)\n      ? val\n      : utf8ToBytes(new Buffer(val, encoding).toString())\n    var len = bytes.length\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// HELPER FUNCTIONS\n// ================\n\nvar INVALID_BASE64_RE = /[^+\\/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = stringtrim(str).replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction stringtrim (str) {\n  if (str.trim) return str.trim()\n  return str.replace(/^\\s+|\\s+$/g, '')\n}\n\nfunction toHex (n) {\n  if (n < 16) return '0' + n.toString(16)\n  return n.toString(16)\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  var codePoint\n  var length = string.length\n  var leadSurrogate = null\n  var bytes = []\n\n  for (var i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  var c, hi, lo\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  for (var i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\nfunction isnan (val) {\n  return val !== val // eslint-disable-line no-self-compare\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/buffer/index.js\n// module id = 7\n// module chunks = 0","// the whatwg-fetch polyfill installs the fetch() function\n// on the global object (window or self)\n//\n// Return that as the export for use in Webpack, Browserify etc.\nrequire('whatwg-fetch');\nvar globalObj = typeof self !== 'undefined' && self || this;\nmodule.exports = globalObj.fetch.bind(globalObj);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/fetch-everywhere/fetch-npm-browserify.js\n// module id = 8\n// module chunks = 0","var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1,eval)(\"this\");\r\n} catch(e) {\r\n\t// This works if the window reference is available\r\n\tif(typeof window === \"object\")\r\n\t\tg = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/global.js\n// module id = 9\n// module chunks = 0","/* global window, fetch */\n/* eslint no-labels: ['error', { 'allowLoop': true }] */\nimport 'fetch-everywhere';\nimport { newStitchClient, StitchClient } from './client';\nimport ADMIN_CLIENT_TYPE from './common';\nimport { ADMIN_CLIENT_CODEC } from './auth/common';\nimport { StitchError } from './errors';\n\nconst v3 = 3;\n\n/** @private **/\nexport class StitchAdminClientFactory {\n  constructor() {\n    throw new StitchError('StitchAdminClient can only be made from the StitchAdminClientFactory.create function');\n  }\n\n  static create(baseUrl) {\n    return newStitchClient(StitchAdminClient.prototype, '', {baseUrl, authCodec: ADMIN_CLIENT_CODEC});\n  }\n}\n\n/** @private */\nexport class StitchAdminClient extends StitchClient {\n  constructor() {\n    super();\n  }\n\n  get type() {\n    return ADMIN_CLIENT_TYPE;\n  }\n\n  get _v3() {\n    const v3do = (url, method, options) =>\n      super._do(\n        url,\n        method,\n        Object.assign({}, { apiVersion: v3 }, options)\n      ).then(response => {\n        const contentHeader = response.headers.get('content-type') || '';\n        if (contentHeader.split(',').indexOf('application/json') >= 0) {\n          return response.json();\n        }\n        return response;\n      });\n\n    return {\n      _get: (url, queryParams) => v3do(url, 'GET', {queryParams}),\n      _put: (url, data) =>\n        (data ?\n          v3do(url, 'PUT', {body: JSON.stringify(data)}) :\n          v3do(url, 'PUT')),\n      _patch: (url, data) =>\n        (data ?\n          v3do(url, 'PATCH', {body: JSON.stringify(data)}) :\n          v3do(url, 'PATCH')),\n      _delete: (url)  => v3do(url, 'DELETE'),\n      _post: (url, body, queryParams) =>\n        (queryParams ?\n          v3do(url, 'POST', { body: JSON.stringify(body), queryParams }) :\n          v3do(url, 'POST', { body: JSON.stringify(body) }))\n    };\n  }\n\n  /**\n   * Ends the session for the current user.\n   *\n   * @returns {Promise}\n   */\n  logout() {\n    return super._do('/auth/session', 'DELETE', { refreshOnFailure: false, useRefreshToken: true, apiVersion: v3 })\n      .then(() => this.auth.clear());\n  }\n\n  /**\n   * Returns profile information for the currently logged in user\n   *\n   * @returns {Promise}\n   */\n  userProfile() {\n    return this._v3._get('/auth/profile');\n  }\n\n  /**\n   * Returns available providers for the currently logged in admin\n   *\n   * @returns {Promise}\n   */\n  getAuthProviders() {\n    return super._do('/auth/providers', 'GET', { noAuth: true, apiVersion: v3 })\n      .then(response => response.json());\n  }\n\n  /**\n   * Returns an access token for the user\n   *\n   * @returns {Promise}\n   */\n  doSessionPost() {\n    return super._do('/auth/session', 'POST', { refreshOnFailure: false, useRefreshToken: true, apiVersion: v3 })\n      .then(response => response.json());\n  }\n\n  /* Examples of how to access admin API with this client:\n   *\n   * List all apps\n   *    a.apps('580e6d055b199c221fcb821c').list()\n   *\n   * Fetch app under name 'planner'\n   *    a.apps('580e6d055b199c221fcb821c').app('planner').get()\n   *\n   * List services under the app 'planner'\n   *    a.apps('580e6d055b199c221fcb821c').app('planner').services().list()\n   *\n   * Delete a rule by ID\n   *    a.apps('580e6d055b199c221fcb821c').app('planner').services().service('mdb1').rules().rule('580e6d055b199c221fcb821d').remove()\n   *\n   */\n  apps(groupId) {\n    const api = this._v3;\n    const groupUrl = `/groups/${groupId}/apps`;\n    return {\n      list: () => api._get(groupUrl),\n      create: (data, options) => {\n        let query = (options && options.defaults) ? '?defaults=true' : '';\n        return api._post(groupUrl + query, data);\n      },\n\n      app: (appId) => {\n        const appUrl = `${groupUrl}/${appId}`;\n        return {\n          get: () => api._get(appUrl),\n          remove: () => api._delete(appUrl),\n\n          export: () => api._get(`${appUrl}/export`),\n\n          values: () => ({\n            list: () => api._get(`${appUrl}/values`),\n            create: (data) => api._post( `${appUrl}/values`, data),\n            value: (valueId) => {\n              const valueUrl = `${appUrl}/values/${valueId}`;\n              return {\n                get: ()=> api._get(valueUrl),\n                remove: ()=> api._delete(valueUrl),\n                update: (data) => api._put(valueUrl, data)\n              };\n            }\n          }),\n\n          services: () => ({\n            list: () => api._get(`${appUrl}/services`),\n            create: (data) => api._post(`${appUrl}/services`, data),\n            service: (serviceId) => ({\n              get: () => api._get(`${appUrl}/services/${serviceId}`),\n              remove: () => api._delete(`${appUrl}/services/${serviceId}`),\n              update: (data) => api._patch(`${appUrl}/services/${serviceId}`, data),\n              runCommand: (commandName, data) => api._post(`${appUrl}/services/${serviceId}/commands/${commandName}`, data),\n              config: ()=> ({\n                get: () => api._get(`${appUrl}/services/${serviceId}/config`),\n                update: (data) => api._patch(`${appUrl}/services/${serviceId}/config`, data)\n              }),\n\n              rules: () => ({\n                list: () => api._get(`${appUrl}/services/${serviceId}/rules`),\n                create: (data) => api._post(`${appUrl}/services/${serviceId}/rules`, data),\n                rule: (ruleId) => {\n                  const ruleUrl = `${appUrl}/services/${serviceId}/rules/${ruleId}`;\n                  return {\n                    get: () => api._get(ruleUrl),\n                    update: (data) => api._put(ruleUrl, data),\n                    remove: () => api._delete(ruleUrl)\n                  };\n                }\n              }),\n\n              incomingWebhooks: () => ({\n                list: () => api._get(`${appUrl}/services/${serviceId}/incoming_webhooks`),\n                create: (data) => api._post(`${appUrl}/services/${serviceId}/incoming_webhooks`, data),\n                incomingWebhook: (incomingWebhookId) => {\n                  const webhookUrl = `${appUrl}/services/${serviceId}/incoming_webhooks/${incomingWebhookId}`;\n                  return {\n                    get: () => api._get(webhookUrl),\n                    update: (data) => api._put(webhookUrl, data),\n                    remove: () => api._delete(webhookUrl)\n                  };\n                }\n              })\n            })\n          }),\n\n          pushNotifications: () => ({\n            list: (filter) => api._get(`${appUrl}/push/notifications`, filter),\n            create: (data) => api._post(`${appUrl}/push/notifications`, data),\n            pushNotification: (messageId) => ({\n              get: () => api._get(`${appUrl}/push/notifications/${messageId}`),\n              update: (data) => api._put(`${appUrl}/push/notifications/${messageId}`, data),\n              remove: () => api._delete(`${appUrl}/push/notifications/${messageId}`),\n              send: () => api._post(`${appUrl}/push/notifications/${messageId}/send`)\n            })\n          }),\n\n          users: () => ({\n            list: (filter) => api._get(`${appUrl}/users`, filter),\n            create: (user) => api._post(`${appUrl}/users`, user),\n            user: (uid) => ({\n              get: () => api._get(`${appUrl}/users/${uid}`),\n              devices: () => ({\n                get: () => api._get(`${appUrl}/users/${uid}/devices`)\n              }),\n              logout: () => api._put(`${appUrl}/users/${uid}/logout`),\n              enable: () => api._put(`${appUrl}/users/${uid}/enable`),\n              disable: () => api._put(`${appUrl}/users/${uid}/disable`),\n              remove: () => api._delete(`${appUrl}/users/${uid}`)\n            })\n          }),\n\n          userRegistrations: () => ({\n            sendConfirmationEmail: (email) => api._post(`${appUrl}/user_registrations/by_email/${email}/send_confirm`)\n          }),\n\n          debug: () => ({\n            executeFunction: (userId, name = '', ...args) => {\n              return api._post(\n                `${appUrl}/debug/execute_function`,\n                {name, 'arguments': args},\n                { user_id: userId });\n            },\n            executeFunctionSource: (userId, source = '', evalSource = '') => {\n              return api._post(\n                `${appUrl}/debug/execute_function_source`,\n                {source, 'eval_source': evalSource},\n                { user_id: userId });\n            }\n          }),\n\n          authProviders: () => ({\n            list: () => api._get(`${appUrl}/auth_providers`),\n            create: (data) => api._post(`${appUrl}/auth_providers`, data),\n            authProvider: (providerId) => ({\n              get: () => api._get(`${appUrl}/auth_providers/${providerId}`),\n              update: (data) => api._patch(`${appUrl}/auth_providers/${providerId}`, data),\n              enable: () => api._put(`${appUrl}/auth_providers/${providerId}/enable`),\n              disable: () => api._put(`${appUrl}/auth_providers/${providerId}/disable`),\n              remove: () => api._delete(`${appUrl}/auth_providers/${providerId}`)\n            })\n          }),\n\n          security: () => ({\n            allowedRequestOrigins: () => ({\n              get: () => api._get(`${appUrl}/security/allowed_request_origins`),\n              update: (data) => api._post(`${appUrl}/security/allowed_request_origins`, data)\n            })\n          }),\n\n          logs: () => ({\n            list: (filter) => api._get(`${appUrl}/logs`, filter)\n          }),\n\n          apiKeys: () => ({\n            list: () => api._get(`${appUrl}/api_keys`),\n            create: (data) => api._post(`${appUrl}/api_keys`, data),\n            apiKey: (apiKeyId) => ({\n              get: () => api._get(`${appUrl}/api_keys/${apiKeyId}`),\n              remove: () => api._delete(`${appUrl}/api_keys/${apiKeyId}`),\n              enable: () => api._put(`${appUrl}/api_keys/${apiKeyId}/enable`),\n              disable: () => api._put(`${appUrl}/api_keys/${apiKeyId}/disable`)\n            })\n          }),\n\n          functions: () => ({\n            list: () => api._get(`${appUrl}/functions`),\n            create: (data) => api._post(`${appUrl}/functions`, data),\n            function: (functionId) => ({\n              get: () => api._get(`${appUrl}/functions/${functionId}`),\n              update: (data) => api._put(`${appUrl}/functions/${functionId}`, data),\n              remove: () => api._delete(`${appUrl}/functions/${functionId}`)\n            })\n          }),\n\n          eventSubscriptions: () => ({\n            list: () => api._get(`${appUrl}/event_subscriptions`),\n            create: (data) => api._post(`${appUrl}/event_subscriptions`, data),\n            eventSubscription: (eventSubscriptionId) => ({\n              get: () => api._get(`${appUrl}/event_subscriptions/${eventSubscriptionId}`),\n              update: (data) => api._put(`${appUrl}/event_subscriptions/${eventSubscriptionId}`, data),\n              remove: () => api._delete(`${appUrl}/event_subscriptions/${eventSubscriptionId}`)\n            })\n          })\n        };\n      }\n    };\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/admin.js",";(function () {\n\n  var object =\n    typeof exports != 'undefined' ? exports :\n    typeof self != 'undefined' ? self : // #8: web workers\n    $.global; // #31: ExtendScript\n\n  var chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\n\n  function InvalidCharacterError(message) {\n    this.message = message;\n  }\n  InvalidCharacterError.prototype = new Error;\n  InvalidCharacterError.prototype.name = 'InvalidCharacterError';\n\n  // encoder\n  // [https://gist.github.com/999166] by [https://github.com/nignag]\n  object.btoa || (\n  object.btoa = function (input) {\n    var str = String(input);\n    for (\n      // initialize result and counter\n      var block, charCode, idx = 0, map = chars, output = '';\n      // if the next str index does not exist:\n      //   change the mapping table to \"=\"\n      //   check if d has no fractional digits\n      str.charAt(idx | 0) || (map = '=', idx % 1);\n      // \"8 - idx % 1 * 8\" generates the sequence 2, 4, 6, 8\n      output += map.charAt(63 & block >> 8 - idx % 1 * 8)\n    ) {\n      charCode = str.charCodeAt(idx += 3/4);\n      if (charCode > 0xFF) {\n        throw new InvalidCharacterError(\"'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.\");\n      }\n      block = block << 8 | charCode;\n    }\n    return output;\n  });\n\n  // decoder\n  // [https://gist.github.com/1020396] by [https://github.com/atk]\n  object.atob || (\n  object.atob = function (input) {\n    var str = String(input).replace(/[=]+$/, ''); // #31: ExtendScript bad parse of /=\n    if (str.length % 4 == 1) {\n      throw new InvalidCharacterError(\"'atob' failed: The string to be decoded is not correctly encoded.\");\n    }\n    for (\n      // initialize result and counters\n      var bc = 0, bs, buffer, idx = 0, output = '';\n      // get next character\n      buffer = str.charAt(idx++);\n      // character found in table? initialize bit storage and add its ascii value;\n      ~buffer && (bs = bc % 4 ? bs * 64 + buffer : buffer,\n        // and if not first of each 4 characters,\n        // convert the first 8 bits to one ascii character\n        bc++ % 4) ? output += String.fromCharCode(255 & bs >> (-2 * bc & 6)) : 0\n    ) {\n      // try to find character in table (0-63, not found => -1)\n      buffer = chars.indexOf(buffer);\n    }\n    return output;\n  });\n\n}());\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/Base64/base64.js\n// module id = 11\n// module chunks = 0","(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n\ttypeof define === 'function' && define.amd ? define(factory) :\n\t(global.bson = factory());\n}(this, (function () { 'use strict';\n\nvar commonjsGlobal = typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\n\nfunction createCommonjsModule(fn, module) {\n\treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n}\n\nvar map = createCommonjsModule(function (module) {\n\n  // We have an ES6 Map available, return the native instance\n\n  if (typeof commonjsGlobal.Map !== 'undefined') {\n    module.exports = commonjsGlobal.Map;\n    module.exports.Map = commonjsGlobal.Map;\n  } else {\n    // We will return a polyfill\n    var Map = function Map(array) {\n      this._keys = [];\n      this._values = {};\n\n      for (var i = 0; i < array.length; i++) {\n        if (array[i] == null) continue; // skip null and undefined\n        var entry = array[i];\n        var key = entry[0];\n        var value = entry[1];\n        // Add the key to the list of keys in order\n        this._keys.push(key);\n        // Add the key and value to the values dictionary with a point\n        // to the location in the ordered keys list\n        this._values[key] = { v: value, i: this._keys.length - 1 };\n      }\n    };\n\n    Map.prototype.clear = function () {\n      this._keys = [];\n      this._values = {};\n    };\n\n    Map.prototype.delete = function (key) {\n      var value = this._values[key];\n      if (value == null) return false;\n      // Delete entry\n      delete this._values[key];\n      // Remove the key from the ordered keys list\n      this._keys.splice(value.i, 1);\n      return true;\n    };\n\n    Map.prototype.entries = function () {\n      var self = this;\n      var index = 0;\n\n      return {\n        next: function next() {\n          var key = self._keys[index++];\n          return {\n            value: key !== undefined ? [key, self._values[key].v] : undefined,\n            done: key !== undefined ? false : true\n          };\n        }\n      };\n    };\n\n    Map.prototype.forEach = function (callback, self) {\n      self = self || this;\n\n      for (var i = 0; i < this._keys.length; i++) {\n        var key = this._keys[i];\n        // Call the forEach callback\n        callback.call(self, this._values[key].v, key, self);\n      }\n    };\n\n    Map.prototype.get = function (key) {\n      return this._values[key] ? this._values[key].v : undefined;\n    };\n\n    Map.prototype.has = function (key) {\n      return this._values[key] != null;\n    };\n\n    Map.prototype.keys = function () {\n      var self = this;\n      var index = 0;\n\n      return {\n        next: function next() {\n          var key = self._keys[index++];\n          return {\n            value: key !== undefined ? key : undefined,\n            done: key !== undefined ? false : true\n          };\n        }\n      };\n    };\n\n    Map.prototype.set = function (key, value) {\n      if (this._values[key]) {\n        this._values[key].v = value;\n        return this;\n      }\n\n      // Add the key to the list of keys in order\n      this._keys.push(key);\n      // Add the key and value to the values dictionary with a point\n      // to the location in the ordered keys list\n      this._values[key] = { v: value, i: this._keys.length - 1 };\n      return this;\n    };\n\n    Map.prototype.values = function () {\n      var self = this;\n      var index = 0;\n\n      return {\n        next: function next() {\n          var key = self._keys[index++];\n          return {\n            value: key !== undefined ? self._values[key].v : undefined,\n            done: key !== undefined ? false : true\n          };\n        }\n      };\n    };\n\n    // Last ismaster\n    Object.defineProperty(Map.prototype, 'size', {\n      enumerable: true,\n      get: function get() {\n        return this._keys.length;\n      }\n    });\n\n    module.exports = Map;\n    module.exports.Map = Map;\n  }\n});\nvar map_1 = map.Map;\n\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n//\n// Copyright 2009 Google Inc. All Rights Reserved\n\n/**\n * Defines a Long class for representing a 64-bit two's-complement\n * integer value, which faithfully simulates the behavior of a Java \"Long\". This\n * implementation is derived from LongLib in GWT.\n *\n * Constructs a 64-bit two's-complement integer, given its low and high 32-bit\n * values as *signed* integers.  See the from* functions below for more\n * convenient ways of constructing Longs.\n *\n * The internal representation of a Long is the two given signed, 32-bit values.\n * We use 32-bit pieces because these are the size of integers on which\n * Javascript performs bit-operations.  For operations like addition and\n * multiplication, we split each number into 16-bit pieces, which can easily be\n * multiplied within Javascript's floating-point representation without overflow\n * or change in sign.\n *\n * In the algorithms below, we frequently reduce the negative case to the\n * positive case by negating the input(s) and then post-processing the result.\n * Note that we must ALWAYS check specially whether those values are MIN_VALUE\n * (-2^63) because -MIN_VALUE == MIN_VALUE (since 2^63 cannot be represented as\n * a positive number, it overflows back into a negative).  Not handling this\n * case would often result in infinite recursion.\n *\n * @class\n * @param {number} low  the low (signed) 32 bits of the Long.\n * @param {number} high the high (signed) 32 bits of the Long.\n * @return {Long}\n */\n\nfunction Long(low, high) {\n  if (!(this instanceof Long)) return new Long(low, high);\n\n  this._bsontype = 'Long';\n  /**\n   * @type {number}\n   * @ignore\n   */\n  this.low_ = low | 0; // force into 32 signed bits.\n\n  /**\n   * @type {number}\n   * @ignore\n   */\n  this.high_ = high | 0; // force into 32 signed bits.\n}\n\n/**\n * Return the int value.\n *\n * @method\n * @return {number} the value, assuming it is a 32-bit integer.\n */\nLong.prototype.toInt = function () {\n  return this.low_;\n};\n\n/**\n * Return the Number value.\n *\n * @method\n * @return {number} the closest floating-point representation to this value.\n */\nLong.prototype.toNumber = function () {\n  return this.high_ * Long.TWO_PWR_32_DBL_ + this.getLowBitsUnsigned();\n};\n\n/**\n * Return the JSON value.\n *\n * @method\n * @return {string} the JSON representation.\n */\nLong.prototype.toJSON = function () {\n  return this.toString();\n};\n\n/**\n * Return the String value.\n *\n * @method\n * @param {number} [opt_radix] the radix in which the text should be written.\n * @return {string} the textual representation of this value.\n */\nLong.prototype.toString = function (opt_radix) {\n  var radix = opt_radix || 10;\n  if (radix < 2 || 36 < radix) {\n    throw Error('radix out of range: ' + radix);\n  }\n\n  if (this.isZero()) {\n    return '0';\n  }\n\n  if (this.isNegative()) {\n    if (this.equals(Long.MIN_VALUE)) {\n      // We need to change the Long value before it can be negated, so we remove\n      // the bottom-most digit in this base and then recurse to do the rest.\n      var radixLong = Long.fromNumber(radix);\n      var div = this.div(radixLong);\n      var rem = div.multiply(radixLong).subtract(this);\n      return div.toString(radix) + rem.toInt().toString(radix);\n    } else {\n      return '-' + this.negate().toString(radix);\n    }\n  }\n\n  // Do several (6) digits each time through the loop, so as to\n  // minimize the calls to the very expensive emulated div.\n  var radixToPower = Long.fromNumber(Math.pow(radix, 6));\n\n  rem = this;\n  var result = '';\n\n  while (!rem.isZero()) {\n    var remDiv = rem.div(radixToPower);\n    var intval = rem.subtract(remDiv.multiply(radixToPower)).toInt();\n    var digits = intval.toString(radix);\n\n    rem = remDiv;\n    if (rem.isZero()) {\n      return digits + result;\n    } else {\n      while (digits.length < 6) {\n        digits = '0' + digits;\n      }\n      result = '' + digits + result;\n    }\n  }\n};\n\n/**\n * Return the high 32-bits value.\n *\n * @method\n * @return {number} the high 32-bits as a signed value.\n */\nLong.prototype.getHighBits = function () {\n  return this.high_;\n};\n\n/**\n * Return the low 32-bits value.\n *\n * @method\n * @return {number} the low 32-bits as a signed value.\n */\nLong.prototype.getLowBits = function () {\n  return this.low_;\n};\n\n/**\n * Return the low unsigned 32-bits value.\n *\n * @method\n * @return {number} the low 32-bits as an unsigned value.\n */\nLong.prototype.getLowBitsUnsigned = function () {\n  return this.low_ >= 0 ? this.low_ : Long.TWO_PWR_32_DBL_ + this.low_;\n};\n\n/**\n * Returns the number of bits needed to represent the absolute value of this Long.\n *\n * @method\n * @return {number} Returns the number of bits needed to represent the absolute value of this Long.\n */\nLong.prototype.getNumBitsAbs = function () {\n  if (this.isNegative()) {\n    if (this.equals(Long.MIN_VALUE)) {\n      return 64;\n    } else {\n      return this.negate().getNumBitsAbs();\n    }\n  } else {\n    var val = this.high_ !== 0 ? this.high_ : this.low_;\n    for (var bit = 31; bit > 0; bit--) {\n      if ((val & 1 << bit) !== 0) {\n        break;\n      }\n    }\n    return this.high_ !== 0 ? bit + 33 : bit + 1;\n  }\n};\n\n/**\n * Return whether this value is zero.\n *\n * @method\n * @return {boolean} whether this value is zero.\n */\nLong.prototype.isZero = function () {\n  return this.high_ === 0 && this.low_ === 0;\n};\n\n/**\n * Return whether this value is negative.\n *\n * @method\n * @return {boolean} whether this value is negative.\n */\nLong.prototype.isNegative = function () {\n  return this.high_ < 0;\n};\n\n/**\n * Return whether this value is odd.\n *\n * @method\n * @return {boolean} whether this value is odd.\n */\nLong.prototype.isOdd = function () {\n  return (this.low_ & 1) === 1;\n};\n\n/**\n * Return whether this Long equals the other\n *\n * @method\n * @param {Long} other Long to compare against.\n * @return {boolean} whether this Long equals the other\n */\nLong.prototype.equals = function (other) {\n  return this.high_ === other.high_ && this.low_ === other.low_;\n};\n\n/**\n * Return whether this Long does not equal the other.\n *\n * @method\n * @param {Long} other Long to compare against.\n * @return {boolean} whether this Long does not equal the other.\n */\nLong.prototype.notEquals = function (other) {\n  return this.high_ !== other.high_ || this.low_ !== other.low_;\n};\n\n/**\n * Return whether this Long is less than the other.\n *\n * @method\n * @param {Long} other Long to compare against.\n * @return {boolean} whether this Long is less than the other.\n */\nLong.prototype.lessThan = function (other) {\n  return this.compare(other) < 0;\n};\n\n/**\n * Return whether this Long is less than or equal to the other.\n *\n * @method\n * @param {Long} other Long to compare against.\n * @return {boolean} whether this Long is less than or equal to the other.\n */\nLong.prototype.lessThanOrEqual = function (other) {\n  return this.compare(other) <= 0;\n};\n\n/**\n * Return whether this Long is greater than the other.\n *\n * @method\n * @param {Long} other Long to compare against.\n * @return {boolean} whether this Long is greater than the other.\n */\nLong.prototype.greaterThan = function (other) {\n  return this.compare(other) > 0;\n};\n\n/**\n * Return whether this Long is greater than or equal to the other.\n *\n * @method\n * @param {Long} other Long to compare against.\n * @return {boolean} whether this Long is greater than or equal to the other.\n */\nLong.prototype.greaterThanOrEqual = function (other) {\n  return this.compare(other) >= 0;\n};\n\n/**\n * Compares this Long with the given one.\n *\n * @method\n * @param {Long} other Long to compare against.\n * @return {boolean} 0 if they are the same, 1 if the this is greater, and -1 if the given one is greater.\n */\nLong.prototype.compare = function (other) {\n  if (this.equals(other)) {\n    return 0;\n  }\n\n  var thisNeg = this.isNegative();\n  var otherNeg = other.isNegative();\n  if (thisNeg && !otherNeg) {\n    return -1;\n  }\n  if (!thisNeg && otherNeg) {\n    return 1;\n  }\n\n  // at this point, the signs are the same, so subtraction will not overflow\n  if (this.subtract(other).isNegative()) {\n    return -1;\n  } else {\n    return 1;\n  }\n};\n\n/**\n * The negation of this value.\n *\n * @method\n * @return {Long} the negation of this value.\n */\nLong.prototype.negate = function () {\n  if (this.equals(Long.MIN_VALUE)) {\n    return Long.MIN_VALUE;\n  } else {\n    return this.not().add(Long.ONE);\n  }\n};\n\n/**\n * Returns the sum of this and the given Long.\n *\n * @method\n * @param {Long} other Long to add to this one.\n * @return {Long} the sum of this and the given Long.\n */\nLong.prototype.add = function (other) {\n  // Divide each number into 4 chunks of 16 bits, and then sum the chunks.\n\n  var a48 = this.high_ >>> 16;\n  var a32 = this.high_ & 0xffff;\n  var a16 = this.low_ >>> 16;\n  var a00 = this.low_ & 0xffff;\n\n  var b48 = other.high_ >>> 16;\n  var b32 = other.high_ & 0xffff;\n  var b16 = other.low_ >>> 16;\n  var b00 = other.low_ & 0xffff;\n\n  var c48 = 0,\n      c32 = 0,\n      c16 = 0,\n      c00 = 0;\n  c00 += a00 + b00;\n  c16 += c00 >>> 16;\n  c00 &= 0xffff;\n  c16 += a16 + b16;\n  c32 += c16 >>> 16;\n  c16 &= 0xffff;\n  c32 += a32 + b32;\n  c48 += c32 >>> 16;\n  c32 &= 0xffff;\n  c48 += a48 + b48;\n  c48 &= 0xffff;\n  return Long.fromBits(c16 << 16 | c00, c48 << 16 | c32);\n};\n\n/**\n * Returns the difference of this and the given Long.\n *\n * @method\n * @param {Long} other Long to subtract from this.\n * @return {Long} the difference of this and the given Long.\n */\nLong.prototype.subtract = function (other) {\n  return this.add(other.negate());\n};\n\n/**\n * Returns the product of this and the given Long.\n *\n * @method\n * @param {Long} other Long to multiply with this.\n * @return {Long} the product of this and the other.\n */\nLong.prototype.multiply = function (other) {\n  if (this.isZero()) {\n    return Long.ZERO;\n  } else if (other.isZero()) {\n    return Long.ZERO;\n  }\n\n  if (this.equals(Long.MIN_VALUE)) {\n    return other.isOdd() ? Long.MIN_VALUE : Long.ZERO;\n  } else if (other.equals(Long.MIN_VALUE)) {\n    return this.isOdd() ? Long.MIN_VALUE : Long.ZERO;\n  }\n\n  if (this.isNegative()) {\n    if (other.isNegative()) {\n      return this.negate().multiply(other.negate());\n    } else {\n      return this.negate().multiply(other).negate();\n    }\n  } else if (other.isNegative()) {\n    return this.multiply(other.negate()).negate();\n  }\n\n  // If both Longs are small, use float multiplication\n  if (this.lessThan(Long.TWO_PWR_24_) && other.lessThan(Long.TWO_PWR_24_)) {\n    return Long.fromNumber(this.toNumber() * other.toNumber());\n  }\n\n  // Divide each Long into 4 chunks of 16 bits, and then add up 4x4 products.\n  // We can skip products that would overflow.\n\n  var a48 = this.high_ >>> 16;\n  var a32 = this.high_ & 0xffff;\n  var a16 = this.low_ >>> 16;\n  var a00 = this.low_ & 0xffff;\n\n  var b48 = other.high_ >>> 16;\n  var b32 = other.high_ & 0xffff;\n  var b16 = other.low_ >>> 16;\n  var b00 = other.low_ & 0xffff;\n\n  var c48 = 0,\n      c32 = 0,\n      c16 = 0,\n      c00 = 0;\n  c00 += a00 * b00;\n  c16 += c00 >>> 16;\n  c00 &= 0xffff;\n  c16 += a16 * b00;\n  c32 += c16 >>> 16;\n  c16 &= 0xffff;\n  c16 += a00 * b16;\n  c32 += c16 >>> 16;\n  c16 &= 0xffff;\n  c32 += a32 * b00;\n  c48 += c32 >>> 16;\n  c32 &= 0xffff;\n  c32 += a16 * b16;\n  c48 += c32 >>> 16;\n  c32 &= 0xffff;\n  c32 += a00 * b32;\n  c48 += c32 >>> 16;\n  c32 &= 0xffff;\n  c48 += a48 * b00 + a32 * b16 + a16 * b32 + a00 * b48;\n  c48 &= 0xffff;\n  return Long.fromBits(c16 << 16 | c00, c48 << 16 | c32);\n};\n\n/**\n * Returns this Long divided by the given one.\n *\n * @method\n * @param {Long} other Long by which to divide.\n * @return {Long} this Long divided by the given one.\n */\nLong.prototype.div = function (other) {\n  if (other.isZero()) {\n    throw Error('division by zero');\n  } else if (this.isZero()) {\n    return Long.ZERO;\n  }\n\n  if (this.equals(Long.MIN_VALUE)) {\n    if (other.equals(Long.ONE) || other.equals(Long.NEG_ONE)) {\n      return Long.MIN_VALUE; // recall that -MIN_VALUE == MIN_VALUE\n    } else if (other.equals(Long.MIN_VALUE)) {\n      return Long.ONE;\n    } else {\n      // At this point, we have |other| >= 2, so |this/other| < |MIN_VALUE|.\n      var halfThis = this.shiftRight(1);\n      var approx = halfThis.div(other).shiftLeft(1);\n      if (approx.equals(Long.ZERO)) {\n        return other.isNegative() ? Long.ONE : Long.NEG_ONE;\n      } else {\n        var rem = this.subtract(other.multiply(approx));\n        var result = approx.add(rem.div(other));\n        return result;\n      }\n    }\n  } else if (other.equals(Long.MIN_VALUE)) {\n    return Long.ZERO;\n  }\n\n  if (this.isNegative()) {\n    if (other.isNegative()) {\n      return this.negate().div(other.negate());\n    } else {\n      return this.negate().div(other).negate();\n    }\n  } else if (other.isNegative()) {\n    return this.div(other.negate()).negate();\n  }\n\n  // Repeat the following until the remainder is less than other:  find a\n  // floating-point that approximates remainder / other *from below*, add this\n  // into the result, and subtract it from the remainder.  It is critical that\n  // the approximate value is less than or equal to the real value so that the\n  // remainder never becomes negative.\n  var res = Long.ZERO;\n  rem = this;\n  while (rem.greaterThanOrEqual(other)) {\n    // Approximate the result of division. This may be a little greater or\n    // smaller than the actual value.\n    approx = Math.max(1, Math.floor(rem.toNumber() / other.toNumber()));\n\n    // We will tweak the approximate result by changing it in the 48-th digit or\n    // the smallest non-fractional digit, whichever is larger.\n    var log2 = Math.ceil(Math.log(approx) / Math.LN2);\n    var delta = log2 <= 48 ? 1 : Math.pow(2, log2 - 48);\n\n    // Decrease the approximation until it is smaller than the remainder.  Note\n    // that if it is too large, the product overflows and is negative.\n    var approxRes = Long.fromNumber(approx);\n    var approxRem = approxRes.multiply(other);\n    while (approxRem.isNegative() || approxRem.greaterThan(rem)) {\n      approx -= delta;\n      approxRes = Long.fromNumber(approx);\n      approxRem = approxRes.multiply(other);\n    }\n\n    // We know the answer can't be zero... and actually, zero would cause\n    // infinite recursion since we would make no progress.\n    if (approxRes.isZero()) {\n      approxRes = Long.ONE;\n    }\n\n    res = res.add(approxRes);\n    rem = rem.subtract(approxRem);\n  }\n  return res;\n};\n\n/**\n * Returns this Long modulo the given one.\n *\n * @method\n * @param {Long} other Long by which to mod.\n * @return {Long} this Long modulo the given one.\n */\nLong.prototype.modulo = function (other) {\n  return this.subtract(this.div(other).multiply(other));\n};\n\n/**\n * The bitwise-NOT of this value.\n *\n * @method\n * @return {Long} the bitwise-NOT of this value.\n */\nLong.prototype.not = function () {\n  return Long.fromBits(~this.low_, ~this.high_);\n};\n\n/**\n * Returns the bitwise-AND of this Long and the given one.\n *\n * @method\n * @param {Long} other the Long with which to AND.\n * @return {Long} the bitwise-AND of this and the other.\n */\nLong.prototype.and = function (other) {\n  return Long.fromBits(this.low_ & other.low_, this.high_ & other.high_);\n};\n\n/**\n * Returns the bitwise-OR of this Long and the given one.\n *\n * @method\n * @param {Long} other the Long with which to OR.\n * @return {Long} the bitwise-OR of this and the other.\n */\nLong.prototype.or = function (other) {\n  return Long.fromBits(this.low_ | other.low_, this.high_ | other.high_);\n};\n\n/**\n * Returns the bitwise-XOR of this Long and the given one.\n *\n * @method\n * @param {Long} other the Long with which to XOR.\n * @return {Long} the bitwise-XOR of this and the other.\n */\nLong.prototype.xor = function (other) {\n  return Long.fromBits(this.low_ ^ other.low_, this.high_ ^ other.high_);\n};\n\n/**\n * Returns this Long with bits shifted to the left by the given amount.\n *\n * @method\n * @param {number} numBits the number of bits by which to shift.\n * @return {Long} this shifted to the left by the given amount.\n */\nLong.prototype.shiftLeft = function (numBits) {\n  numBits &= 63;\n  if (numBits === 0) {\n    return this;\n  } else {\n    var low = this.low_;\n    if (numBits < 32) {\n      var high = this.high_;\n      return Long.fromBits(low << numBits, high << numBits | low >>> 32 - numBits);\n    } else {\n      return Long.fromBits(0, low << numBits - 32);\n    }\n  }\n};\n\n/**\n * Returns this Long with bits shifted to the right by the given amount.\n *\n * @method\n * @param {number} numBits the number of bits by which to shift.\n * @return {Long} this shifted to the right by the given amount.\n */\nLong.prototype.shiftRight = function (numBits) {\n  numBits &= 63;\n  if (numBits === 0) {\n    return this;\n  } else {\n    var high = this.high_;\n    if (numBits < 32) {\n      var low = this.low_;\n      return Long.fromBits(low >>> numBits | high << 32 - numBits, high >> numBits);\n    } else {\n      return Long.fromBits(high >> numBits - 32, high >= 0 ? 0 : -1);\n    }\n  }\n};\n\n/**\n * Returns this Long with bits shifted to the right by the given amount, with the new top bits matching the current sign bit.\n *\n * @method\n * @param {number} numBits the number of bits by which to shift.\n * @return {Long} this shifted to the right by the given amount, with zeros placed into the new leading bits.\n */\nLong.prototype.shiftRightUnsigned = function (numBits) {\n  numBits &= 63;\n  if (numBits === 0) {\n    return this;\n  } else {\n    var high = this.high_;\n    if (numBits < 32) {\n      var low = this.low_;\n      return Long.fromBits(low >>> numBits | high << 32 - numBits, high >>> numBits);\n    } else if (numBits === 32) {\n      return Long.fromBits(high, 0);\n    } else {\n      return Long.fromBits(high >>> numBits - 32, 0);\n    }\n  }\n};\n\n/**\n * Returns a Long representing the given (32-bit) integer value.\n *\n * @method\n * @param {number} value the 32-bit integer in question.\n * @return {Long} the corresponding Long value.\n */\nLong.fromInt = function (value) {\n  if (-128 <= value && value < 128) {\n    var cachedObj = Long.INT_CACHE_[value];\n    if (cachedObj) {\n      return cachedObj;\n    }\n  }\n\n  var obj = new Long(value | 0, value < 0 ? -1 : 0);\n  if (-128 <= value && value < 128) {\n    Long.INT_CACHE_[value] = obj;\n  }\n  return obj;\n};\n\n/**\n * Returns a Long representing the given value, provided that it is a finite number. Otherwise, zero is returned.\n *\n * @method\n * @param {number} value the number in question.\n * @return {Long} the corresponding Long value.\n */\nLong.fromNumber = function (value) {\n  if (isNaN(value) || !isFinite(value)) {\n    return Long.ZERO;\n  } else if (value <= -Long.TWO_PWR_63_DBL_) {\n    return Long.MIN_VALUE;\n  } else if (value + 1 >= Long.TWO_PWR_63_DBL_) {\n    return Long.MAX_VALUE;\n  } else if (value < 0) {\n    return Long.fromNumber(-value).negate();\n  } else {\n    return new Long(value % Long.TWO_PWR_32_DBL_ | 0, value / Long.TWO_PWR_32_DBL_ | 0);\n  }\n};\n\n/**\n * Returns a Long representing the 64-bit integer that comes by concatenating the given high and low bits. Each is assumed to use 32 bits.\n *\n * @method\n * @param {number} lowBits the low 32-bits.\n * @param {number} highBits the high 32-bits.\n * @return {Long} the corresponding Long value.\n */\nLong.fromBits = function (lowBits, highBits) {\n  return new Long(lowBits, highBits);\n};\n\n/**\n * Returns a Long representation of the given string, written using the given radix.\n *\n * @method\n * @param {string} str the textual representation of the Long.\n * @param {number} opt_radix the radix in which the text is written.\n * @return {Long} the corresponding Long value.\n */\nLong.fromString = function (str, opt_radix) {\n  if (str.length === 0) {\n    throw Error('number format error: empty string');\n  }\n\n  var radix = opt_radix || 10;\n  if (radix < 2 || 36 < radix) {\n    throw Error('radix out of range: ' + radix);\n  }\n\n  if (str.charAt(0) === '-') {\n    return Long.fromString(str.substring(1), radix).negate();\n  } else if (str.indexOf('-') >= 0) {\n    throw Error('number format error: interior \"-\" character: ' + str);\n  }\n\n  // Do several (8) digits each time through the loop, so as to\n  // minimize the calls to the very expensive emulated div.\n  var radixToPower = Long.fromNumber(Math.pow(radix, 8));\n\n  var result = Long.ZERO;\n  for (var i = 0; i < str.length; i += 8) {\n    var size = Math.min(8, str.length - i);\n    var value = parseInt(str.substring(i, i + size), radix);\n    if (size < 8) {\n      var power = Long.fromNumber(Math.pow(radix, size));\n      result = result.multiply(power).add(Long.fromNumber(value));\n    } else {\n      result = result.multiply(radixToPower);\n      result = result.add(Long.fromNumber(value));\n    }\n  }\n  return result;\n};\n\n// NOTE: Common constant values ZERO, ONE, NEG_ONE, etc. are defined below the\n// from* methods on which they depend.\n\n/**\n * A cache of the Long representations of small integer values.\n * @type {Object}\n * @ignore\n */\nLong.INT_CACHE_ = {};\n\n// NOTE: the compiler should inline these constant values below and then remove\n// these variables, so there should be no runtime penalty for these.\n\n/**\n * Number used repeated below in calculations.  This must appear before the\n * first call to any from* function below.\n * @type {number}\n * @ignore\n */\nLong.TWO_PWR_16_DBL_ = 1 << 16;\n\n/**\n * @type {number}\n * @ignore\n */\nLong.TWO_PWR_24_DBL_ = 1 << 24;\n\n/**\n * @type {number}\n * @ignore\n */\nLong.TWO_PWR_32_DBL_ = Long.TWO_PWR_16_DBL_ * Long.TWO_PWR_16_DBL_;\n\n/**\n * @type {number}\n * @ignore\n */\nLong.TWO_PWR_31_DBL_ = Long.TWO_PWR_32_DBL_ / 2;\n\n/**\n * @type {number}\n * @ignore\n */\nLong.TWO_PWR_48_DBL_ = Long.TWO_PWR_32_DBL_ * Long.TWO_PWR_16_DBL_;\n\n/**\n * @type {number}\n * @ignore\n */\nLong.TWO_PWR_64_DBL_ = Long.TWO_PWR_32_DBL_ * Long.TWO_PWR_32_DBL_;\n\n/**\n * @type {number}\n * @ignore\n */\nLong.TWO_PWR_63_DBL_ = Long.TWO_PWR_64_DBL_ / 2;\n\n/** @type {Long} */\nLong.ZERO = Long.fromInt(0);\n\n/** @type {Long} */\nLong.ONE = Long.fromInt(1);\n\n/** @type {Long} */\nLong.NEG_ONE = Long.fromInt(-1);\n\n/** @type {Long} */\nLong.MAX_VALUE = Long.fromBits(0xffffffff | 0, 0x7fffffff | 0);\n\n/** @type {Long} */\nLong.MIN_VALUE = Long.fromBits(0, 0x80000000 | 0);\n\n/**\n * @type {Long}\n * @ignore\n */\nLong.TWO_PWR_24_ = Long.fromInt(1 << 24);\n\n/**\n * Expose.\n */\nvar long_1 = Long;\nvar Long_1 = Long;\nlong_1.Long = Long_1;\n\n/**\n * A class representation of the BSON Double type.\n *\n * @class\n * @param {number} value the number we want to represent as a double.\n * @return {Double}\n */\n\nfunction Double(value) {\n  if (!(this instanceof Double)) return new Double(value);\n\n  this._bsontype = 'Double';\n  this.value = value;\n}\n\n/**\n * Access the number value.\n *\n * @method\n * @return {number} returns the wrapped double number.\n */\nDouble.prototype.valueOf = function () {\n  return this.value;\n};\n\n/**\n * @ignore\n */\nDouble.prototype.toJSON = function () {\n  return this.value;\n};\n\nvar double_1 = Double;\nvar Double_1 = Double;\ndouble_1.Double = Double_1;\n\n/**\n * @class\n * @param {number} low  the low (signed) 32 bits of the Timestamp.\n * @param {number} high the high (signed) 32 bits of the Timestamp.\n * @return {Timestamp}\n */\nfunction Timestamp(low, high) {\n  if (low instanceof long_1) {\n    long_1.call(this, low.low_, low.high_);\n  } else {\n    long_1.call(this, low, high);\n  }\n\n  this._bsontype = 'Timestamp';\n}\n\nTimestamp.prototype = Object.create(long_1.prototype);\nTimestamp.prototype.constructor = Timestamp;\n\n/**\n * Return the JSON value.\n *\n * @method\n * @return {String} the JSON representation.\n */\nTimestamp.prototype.toJSON = function () {\n  return {\n    $timestamp: this.toString()\n  };\n};\n\n/**\n * Returns a Timestamp represented by the given (32-bit) integer value.\n *\n * @method\n * @param {number} value the 32-bit integer in question.\n * @return {Timestamp} the timestamp.\n */\nTimestamp.fromInt = function (value) {\n  return new Timestamp(long_1.fromInt(value));\n};\n\n/**\n * Returns a Timestamp representing the given number value, provided that it is a finite number. Otherwise, zero is returned.\n *\n * @method\n * @param {number} value the number in question.\n * @return {Timestamp} the timestamp.\n */\nTimestamp.fromNumber = function (value) {\n  return new Timestamp(long_1.fromNumber(value));\n};\n\n/**\n * Returns a Timestamp for the given high and low bits. Each is assumed to use 32 bits.\n *\n * @method\n * @param {number} lowBits the low 32-bits.\n * @param {number} highBits the high 32-bits.\n * @return {Timestamp} the timestamp.\n */\nTimestamp.fromBits = function (lowBits, highBits) {\n  return new Timestamp(lowBits, highBits);\n};\n\n/**\n * Returns a Timestamp from the given string, optionally using the given radix.\n *\n * @method\n * @param {String} str the textual representation of the Timestamp.\n * @param {number} [opt_radix] the radix in which the text is written.\n * @return {Timestamp} the timestamp.\n */\nTimestamp.fromString = function (str, opt_radix) {\n  return new Timestamp(long_1.fromString(str, opt_radix));\n};\n\nvar timestamp = Timestamp;\nvar Timestamp_1 = Timestamp;\ntimestamp.Timestamp = Timestamp_1;\n\n/**\n * Machine id.\n *\n * Create a random 3-byte value (i.e. unique for this\n * process). Other drivers use a md5 of the machine id here, but\n * that would mean an asyc call to gethostname, so we don't bother.\n * @ignore\n */\n\nvar MACHINE_ID = parseInt(Math.random() * 0xffffff, 10);\n\n// Regular expression that checks for hex value\nvar checkForHexRegExp = new RegExp('^[0-9a-fA-F]{24}$');\nvar hasBufferType = false;\n\n// Check if buffer exists\ntry {\n  if (Buffer && Buffer.from) hasBufferType = true;\n} catch (err) {\n  hasBufferType = false;\n}\n\n/**\n * Create a new ObjectID instance\n *\n * @class\n * @param {(string|number)} id Can be a 24 byte hex string, 12 byte binary string or a Number.\n * @property {number} generationTime The generation time of this ObjectId instance\n * @return {ObjectID} instance of ObjectID.\n */\nfunction ObjectID(id) {\n  // Duck-typing to support ObjectId from different npm packages\n  if (id instanceof ObjectID) return id;\n  if (!(this instanceof ObjectID)) return new ObjectID(id);\n\n  this._bsontype = 'ObjectID';\n\n  // The most common usecase (blank id, new objectId instance)\n  if (id == null || typeof id === 'number') {\n    // Generate a new id\n    this.id = this.generate(id);\n    // If we are caching the hex string\n    if (ObjectID.cacheHexString) this.__id = this.toString('hex');\n    // Return the object\n    return;\n  }\n\n  // Check if the passed in id is valid\n  var valid = ObjectID.isValid(id);\n\n  // Throw an error if it's not a valid setup\n  if (!valid && id != null) {\n    throw new TypeError('Argument passed in must be a single String of 12 bytes or a string of 24 hex characters');\n  } else if (valid && typeof id === 'string' && id.length === 24 && hasBufferType) {\n    return new ObjectID(new Buffer(id, 'hex'));\n  } else if (valid && typeof id === 'string' && id.length === 24) {\n    return ObjectID.createFromHexString(id);\n  } else if (id != null && id.length === 12) {\n    // assume 12 byte string\n    this.id = id;\n  } else if (id != null && id.toHexString) {\n    // Duck-typing to support ObjectId from different npm packages\n    return id;\n  } else {\n    throw new TypeError('Argument passed in must be a single String of 12 bytes or a string of 24 hex characters');\n  }\n\n  if (ObjectID.cacheHexString) this.__id = this.toString('hex');\n}\n\n// Allow usage of ObjectId as well as ObjectID\n// var ObjectId = ObjectID;\n\n// Precomputed hex table enables speedy hex string conversion\nvar hexTable = [];\nfor (var i = 0; i < 256; i++) {\n  hexTable[i] = (i <= 15 ? '0' : '') + i.toString(16);\n}\n\n/**\n * Return the ObjectID id as a 24 byte hex string representation\n *\n * @method\n * @return {string} return the 24 byte hex string representation.\n */\nObjectID.prototype.toHexString = function () {\n  if (ObjectID.cacheHexString && this.__id) return this.__id;\n\n  var hexString = '';\n  if (!this.id || !this.id.length) {\n    throw new TypeError('invalid ObjectId, ObjectId.id must be either a string or a Buffer, but is [' + JSON.stringify(this.id) + ']');\n  }\n\n  if (this.id instanceof _Buffer) {\n    hexString = convertToHex(this.id);\n    if (ObjectID.cacheHexString) this.__id = hexString;\n    return hexString;\n  }\n\n  for (var i = 0; i < this.id.length; i++) {\n    hexString += hexTable[this.id.charCodeAt(i)];\n  }\n\n  if (ObjectID.cacheHexString) this.__id = hexString;\n  return hexString;\n};\n\n/**\n * Update the ObjectID index used in generating new ObjectID's on the driver\n *\n * @method\n * @return {number} returns next index value.\n * @ignore\n */\nObjectID.prototype.get_inc = function () {\n  return ObjectID.index = (ObjectID.index + 1) % 0xffffff;\n};\n\n/**\n * Update the ObjectID index used in generating new ObjectID's on the driver\n *\n * @method\n * @return {number} returns next index value.\n * @ignore\n */\nObjectID.prototype.getInc = function () {\n  return this.get_inc();\n};\n\n/**\n * Generate a 12 byte id buffer used in ObjectID's\n *\n * @method\n * @param {number} [time] optional parameter allowing to pass in a second based timestamp.\n * @return {Buffer} return the 12 byte id buffer string.\n */\nObjectID.prototype.generate = function (time) {\n  if ('number' !== typeof time) {\n    time = ~~(Date.now() / 1000);\n  }\n\n  // Use pid\n  var pid = (typeof process === 'undefined' || process.pid === 1 ? Math.floor(Math.random() * 100000) : process.pid) % 0xffff;\n  var inc = this.get_inc();\n  // Buffer used\n  var buffer = new Buffer(12);\n  // Encode time\n  buffer[3] = time & 0xff;\n  buffer[2] = time >> 8 & 0xff;\n  buffer[1] = time >> 16 & 0xff;\n  buffer[0] = time >> 24 & 0xff;\n  // Encode machine\n  buffer[6] = MACHINE_ID & 0xff;\n  buffer[5] = MACHINE_ID >> 8 & 0xff;\n  buffer[4] = MACHINE_ID >> 16 & 0xff;\n  // Encode pid\n  buffer[8] = pid & 0xff;\n  buffer[7] = pid >> 8 & 0xff;\n  // Encode index\n  buffer[11] = inc & 0xff;\n  buffer[10] = inc >> 8 & 0xff;\n  buffer[9] = inc >> 16 & 0xff;\n  // Return the buffer\n  return buffer;\n};\n\n/**\n * Converts the id into a 24 byte hex string for printing\n *\n * @param {String} format The Buffer toString format parameter.\n * @return {String} return the 24 byte hex string representation.\n * @ignore\n */\nObjectID.prototype.toString = function (format) {\n  // Is the id a buffer then use the buffer toString method to return the format\n  if (this.id && this.id.copy) {\n    return this.id.toString(typeof format === 'string' ? format : 'hex');\n  }\n\n  // if(this.buffer )\n  return this.toHexString();\n};\n\n/**\n * Converts to a string representation of this Id.\n *\n * @return {String} return the 24 byte hex string representation.\n * @ignore\n */\nObjectID.prototype.inspect = ObjectID.prototype.toString;\n\n/**\n * Converts to its JSON representation.\n *\n * @return {String} return the 24 byte hex string representation.\n * @ignore\n */\nObjectID.prototype.toJSON = function () {\n  return this.toHexString();\n};\n\n/**\n * Compares the equality of this ObjectID with `otherID`.\n *\n * @method\n * @param {object} otherID ObjectID instance to compare against.\n * @return {boolean} the result of comparing two ObjectID's\n */\nObjectID.prototype.equals = function equals(otherId) {\n  if (otherId instanceof ObjectID) {\n    return this.toString() === otherId.toString();\n  } else if (typeof otherId === 'string' && ObjectID.isValid(otherId) && otherId.length === 12 && this.id instanceof _Buffer) {\n    return otherId === this.id.toString('binary');\n  } else if (typeof otherId === 'string' && ObjectID.isValid(otherId) && otherId.length === 24) {\n    return otherId.toLowerCase() === this.toHexString();\n  } else if (typeof otherId === 'string' && ObjectID.isValid(otherId) && otherId.length === 12) {\n    return otherId === this.id;\n  } else if (otherId != null && (otherId instanceof ObjectID || otherId.toHexString)) {\n    return otherId.toHexString() === this.toHexString();\n  } else {\n    return false;\n  }\n};\n\n/**\n * Returns the generation date (accurate up to the second) that this ID was generated.\n *\n * @method\n * @return {date} the generation date\n */\nObjectID.prototype.getTimestamp = function () {\n  var timestamp = new Date();\n  var time = this.id[3] | this.id[2] << 8 | this.id[1] << 16 | this.id[0] << 24;\n  timestamp.setTime(Math.floor(time) * 1000);\n  return timestamp;\n};\n\n/**\n * @ignore\n */\nObjectID.index = ~~(Math.random() * 0xffffff);\n\n/**\n * @ignore\n */\nObjectID.createPk = function createPk() {\n  return new ObjectID();\n};\n\n/**\n * Creates an ObjectID from a second based number, with the rest of the ObjectID zeroed out. Used for comparisons or sorting the ObjectID.\n *\n * @method\n * @param {number} time an integer number representing a number of seconds.\n * @return {ObjectID} return the created ObjectID\n */\nObjectID.createFromTime = function createFromTime(time) {\n  var buffer = new Buffer([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]);\n  // Encode time into first 4 bytes\n  buffer[3] = time & 0xff;\n  buffer[2] = time >> 8 & 0xff;\n  buffer[1] = time >> 16 & 0xff;\n  buffer[0] = time >> 24 & 0xff;\n  // Return the new objectId\n  return new ObjectID(buffer);\n};\n\n// Lookup tables\nvar decodeLookup = [];\ni = 0;\nwhile (i < 10) {\n  decodeLookup[0x30 + i] = i++;\n}while (i < 16) {\n  decodeLookup[0x41 - 10 + i] = decodeLookup[0x61 - 10 + i] = i++;\n}var _Buffer = Buffer;\nvar convertToHex = function convertToHex(bytes) {\n  return bytes.toString('hex');\n};\n\n/**\n * Creates an ObjectID from a hex string representation of an ObjectID.\n *\n * @method\n * @param {string} hexString create a ObjectID from a passed in 24 byte hexstring.\n * @return {ObjectID} return the created ObjectID\n */\nObjectID.createFromHexString = function createFromHexString(string) {\n  // Throw an error if it's not a valid setup\n  if (typeof string === 'undefined' || string != null && string.length !== 24) {\n    throw new TypeError('Argument passed in must be a single String of 12 bytes or a string of 24 hex characters');\n  }\n\n  // Use Buffer.from method if available\n  if (hasBufferType) return new ObjectID(new Buffer(string, 'hex'));\n\n  // Calculate lengths\n  var array = new _Buffer(12);\n  var n = 0;\n  var i = 0;\n\n  while (i < 24) {\n    array[n++] = decodeLookup[string.charCodeAt(i++)] << 4 | decodeLookup[string.charCodeAt(i++)];\n  }\n\n  return new ObjectID(array);\n};\n\n/**\n * Checks if a value is a valid bson ObjectId\n *\n * @method\n * @return {boolean} return true if the value is a valid bson ObjectId, return false otherwise.\n */\nObjectID.isValid = function isValid(id) {\n  if (id == null) return false;\n\n  if (typeof id === 'number') {\n    return true;\n  }\n\n  if (typeof id === 'string') {\n    return id.length === 12 || id.length === 24 && checkForHexRegExp.test(id);\n  }\n\n  if (id instanceof ObjectID) {\n    return true;\n  }\n\n  if (id instanceof _Buffer) {\n    return true;\n  }\n\n  // Duck-Typing detection of ObjectId like objects\n  if (id.toHexString) {\n    return id.id.length === 12 || id.id.length === 24 && checkForHexRegExp.test(id.id);\n  }\n\n  return false;\n};\n\n/**\n * @ignore\n */\nObject.defineProperty(ObjectID.prototype, 'generationTime', {\n  enumerable: true,\n  get: function get() {\n    return this.id[3] | this.id[2] << 8 | this.id[1] << 16 | this.id[0] << 24;\n  },\n  set: function set(value) {\n    // Encode time into first 4 bytes\n    this.id[3] = value & 0xff;\n    this.id[2] = value >> 8 & 0xff;\n    this.id[1] = value >> 16 & 0xff;\n    this.id[0] = value >> 24 & 0xff;\n  }\n});\n\n/**\n * Expose.\n */\nvar objectid = ObjectID;\nvar ObjectID_1 = ObjectID;\nvar ObjectId = ObjectID;\nobjectid.ObjectID = ObjectID_1;\nobjectid.ObjectId = ObjectId;\n\nfunction alphabetize(str) {\n  return str.split('').sort().join('');\n}\n\n/**\n * A class representation of the BSON RegExp type.\n *\n * @class\n * @return {BSONRegExp} A MinKey instance\n */\nfunction BSONRegExp(pattern, options) {\n  if (!(this instanceof BSONRegExp)) return new BSONRegExp(pattern, options);\n\n  // Execute\n  this._bsontype = 'BSONRegExp';\n  this.pattern = pattern || '';\n  this.options = options ? alphabetize(options) : '';\n\n  // Validate options\n  for (var i = 0; i < this.options.length; i++) {\n    if (!(this.options[i] === 'i' || this.options[i] === 'm' || this.options[i] === 'x' || this.options[i] === 'l' || this.options[i] === 's' || this.options[i] === 'u')) {\n      throw new Error('the regular expression options [' + this.options[i] + '] is not supported');\n    }\n  }\n}\n\nvar regexp = BSONRegExp;\nvar BSONRegExp_1 = BSONRegExp;\nregexp.BSONRegExp = BSONRegExp_1;\n\n/**\n * A class representation of the BSON Symbol type.\n *\n * @class\n * @deprecated\n * @param {string} value the string representing the symbol.\n * @return {Symbol}\n */\n\nfunction _Symbol(value) {\n  if (!(this instanceof _Symbol)) return new _Symbol(value);\n  this._bsontype = 'Symbol';\n  this.value = value;\n}\n\n/**\n * Access the wrapped string value.\n *\n * @method\n * @return {String} returns the wrapped string.\n */\n_Symbol.prototype.valueOf = function () {\n  return this.value;\n};\n\n/**\n * @ignore\n */\n_Symbol.prototype.toString = function () {\n  return this.value;\n};\n\n/**\n * @ignore\n */\n_Symbol.prototype.inspect = function () {\n  return this.value;\n};\n\n/**\n * @ignore\n */\n_Symbol.prototype.toJSON = function () {\n  return this.value;\n};\n\nvar symbol = _Symbol;\nvar Symbol_1 = _Symbol;\nsymbol.Symbol = Symbol_1;\n\n/**\n * A class representation of a BSON Int32 type.\n *\n * @class\n * @param {number} value the number we want to represent as an int32.\n * @return {Int32}\n */\n\nfunction Int32(value) {\n  if (!(this instanceof Int32)) return new Int32(value);\n\n  this._bsontype = 'Int32';\n  this.value = value;\n}\n\n/**\n * Access the number value.\n *\n * @method\n * @return {number} returns the wrapped int32 number.\n */\nInt32.prototype.valueOf = function () {\n  return this.value;\n};\n\n/**\n * @ignore\n */\nInt32.prototype.toJSON = function () {\n  return this.value;\n};\n\nvar int_32 = Int32;\nvar Int32_1 = Int32;\nint_32.Int32 = Int32_1;\n\n/**\n * A class representation of the BSON Code type.\n *\n * @class\n * @param {(string|function)} code a string or function.\n * @param {Object} [scope] an optional scope for the function.\n * @return {Code}\n */\n\nfunction Code(code, scope) {\n  if (!(this instanceof Code)) return new Code(code, scope);\n  this._bsontype = 'Code';\n  this.code = code;\n  this.scope = scope;\n}\n\n/**\n * @ignore\n */\nCode.prototype.toJSON = function () {\n  return { scope: this.scope, code: this.code };\n};\n\nvar code = Code;\nvar Code_1 = Code;\ncode.Code = Code_1;\n\nvar PARSE_STRING_REGEXP = /^(\\+|-)?(\\d+|(\\d*\\.\\d*))?(E|e)?([-+])?(\\d+)?$/;\nvar PARSE_INF_REGEXP = /^(\\+|-)?(Infinity|inf)$/i;\nvar PARSE_NAN_REGEXP = /^(\\+|-)?NaN$/i;\n\nvar EXPONENT_MAX = 6111;\nvar EXPONENT_MIN = -6176;\nvar EXPONENT_BIAS = 6176;\nvar MAX_DIGITS = 34;\n\n// Nan value bits as 32 bit values (due to lack of longs)\nvar NAN_BUFFER = [0x7c, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00].reverse();\n// Infinity value bits 32 bit values (due to lack of longs)\nvar INF_NEGATIVE_BUFFER = [0xf8, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00].reverse();\nvar INF_POSITIVE_BUFFER = [0x78, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00].reverse();\n\nvar EXPONENT_REGEX = /^([-+])?(\\d+)?$/;\n\n// Detect if the value is a digit\nvar isDigit = function isDigit(value) {\n  return !isNaN(parseInt(value, 10));\n};\n\n// Divide two uint128 values\nvar divideu128 = function divideu128(value) {\n  var DIVISOR = long_1.fromNumber(1000 * 1000 * 1000);\n  var _rem = long_1.fromNumber(0);\n\n  if (!value.parts[0] && !value.parts[1] && !value.parts[2] && !value.parts[3]) {\n    return { quotient: value, rem: _rem };\n  }\n\n  for (var i = 0; i <= 3; i++) {\n    // Adjust remainder to match value of next dividend\n    _rem = _rem.shiftLeft(32);\n    // Add the divided to _rem\n    _rem = _rem.add(new long_1(value.parts[i], 0));\n    value.parts[i] = _rem.div(DIVISOR).low_;\n    _rem = _rem.modulo(DIVISOR);\n  }\n\n  return { quotient: value, rem: _rem };\n};\n\n// Multiply two Long values and return the 128 bit value\nvar multiply64x2 = function multiply64x2(left, right) {\n  if (!left && !right) {\n    return { high: long_1.fromNumber(0), low: long_1.fromNumber(0) };\n  }\n\n  var leftHigh = left.shiftRightUnsigned(32);\n  var leftLow = new long_1(left.getLowBits(), 0);\n  var rightHigh = right.shiftRightUnsigned(32);\n  var rightLow = new long_1(right.getLowBits(), 0);\n\n  var productHigh = leftHigh.multiply(rightHigh);\n  var productMid = leftHigh.multiply(rightLow);\n  var productMid2 = leftLow.multiply(rightHigh);\n  var productLow = leftLow.multiply(rightLow);\n\n  productHigh = productHigh.add(productMid.shiftRightUnsigned(32));\n  productMid = new long_1(productMid.getLowBits(), 0).add(productMid2).add(productLow.shiftRightUnsigned(32));\n\n  productHigh = productHigh.add(productMid.shiftRightUnsigned(32));\n  productLow = productMid.shiftLeft(32).add(new long_1(productLow.getLowBits(), 0));\n\n  // Return the 128 bit result\n  return { high: productHigh, low: productLow };\n};\n\nvar lessThan = function lessThan(left, right) {\n  // Make values unsigned\n  var uhleft = left.high_ >>> 0;\n  var uhright = right.high_ >>> 0;\n\n  // Compare high bits first\n  if (uhleft < uhright) {\n    return true;\n  } else if (uhleft === uhright) {\n    var ulleft = left.low_ >>> 0;\n    var ulright = right.low_ >>> 0;\n    if (ulleft < ulright) return true;\n  }\n\n  return false;\n};\n\nvar invalidErr = function invalidErr(string, message) {\n  throw new TypeError('\"${string}\" not a valid Decimal128 string - ' + message);\n};\n\n/**\n * A class representation of the BSON Decimal128 type.\n *\n * @class\n * @param {Buffer} bytes a buffer containing the raw Decimal128 bytes.\n * @return {Double}\n */\nfunction Decimal128(bytes) {\n  this._bsontype = 'Decimal128';\n  this.bytes = bytes;\n}\n\n/**\n * Create a Decimal128 instance from a string representation\n *\n * @method\n * @param {string} string a numeric string representation.\n * @return {Decimal128} returns a Decimal128 instance.\n */\nDecimal128.fromString = function (string) {\n  // Parse state tracking\n  var isNegative = false;\n  var sawRadix = false;\n  var foundNonZero = false;\n\n  // Total number of significant digits (no leading or trailing zero)\n  var significantDigits = 0;\n  // Total number of significand digits read\n  var nDigitsRead = 0;\n  // Total number of digits (no leading zeros)\n  var nDigits = 0;\n  // The number of the digits after radix\n  var radixPosition = 0;\n  // The index of the first non-zero in *str*\n  var firstNonZero = 0;\n\n  // Digits Array\n  var digits = [0];\n  // The number of digits in digits\n  var nDigitsStored = 0;\n  // Insertion pointer for digits\n  var digitsInsert = 0;\n  // The index of the first non-zero digit\n  var firstDigit = 0;\n  // The index of the last digit\n  var lastDigit = 0;\n\n  // Exponent\n  var exponent = 0;\n  // loop index over array\n  var i = 0;\n  // The high 17 digits of the significand\n  var significandHigh = [0, 0];\n  // The low 17 digits of the significand\n  var significandLow = [0, 0];\n  // The biased exponent\n  var biasedExponent = 0;\n\n  // Read index\n  var index = 0;\n\n  // Naively prevent against REDOS attacks.\n  // TODO: implementing a custom parsing for this, or refactoring the regex would yield\n  //       further gains.\n  if (string.length >= 7000) {\n    throw new TypeError('' + string + ' not a valid Decimal128 string');\n  }\n\n  // Results\n  var stringMatch = string.match(PARSE_STRING_REGEXP);\n  var infMatch = string.match(PARSE_INF_REGEXP);\n  var nanMatch = string.match(PARSE_NAN_REGEXP);\n\n  // Validate the string\n  if (!stringMatch && !infMatch && !nanMatch || string.length === 0) {\n    throw new TypeError('' + string + ' not a valid Decimal128 string');\n  }\n\n  if (stringMatch) {\n    // full_match = stringMatch[0]\n    // sign = stringMatch[1]\n\n    var unsignedNumber = stringMatch[2];\n    // stringMatch[3] is undefined if a whole number (ex \"1\", 12\")\n    // but defined if a number w/ decimal in it (ex \"1.0, 12.2\")\n\n    var e = stringMatch[4];\n    var expSign = stringMatch[5];\n    var expNumber = stringMatch[6];\n\n    // they provided e, but didn't give an exponent number. for ex \"1e\"\n    if (e && expNumber === undefined) invalidErr(string, 'missing exponent power');\n\n    // they provided e, but didn't give a number before it. for ex \"e1\"\n    if (e && unsignedNumber === undefined) invalidErr(string, 'missing exponent base');\n\n    if (e === undefined && (expSign || expNumber)) {\n      invalidErr(string, 'missing e before exponent');\n    }\n  }\n\n  // Get the negative or positive sign\n  if (string[index] === '+' || string[index] === '-') {\n    isNegative = string[index++] === '-';\n  }\n\n  // Check if user passed Infinity or NaN\n  if (!isDigit(string[index]) && string[index] !== '.') {\n    if (string[index] === 'i' || string[index] === 'I') {\n      return new Decimal128(new Buffer(isNegative ? INF_NEGATIVE_BUFFER : INF_POSITIVE_BUFFER));\n    } else if (string[index] === 'N') {\n      return new Decimal128(new Buffer(NAN_BUFFER));\n    }\n  }\n\n  // Read all the digits\n  while (isDigit(string[index]) || string[index] === '.') {\n    if (string[index] === '.') {\n      if (sawRadix) invalidErr(string, 'contains multiple periods');\n\n      sawRadix = true;\n      index = index + 1;\n      continue;\n    }\n\n    if (nDigitsStored < 34) {\n      if (string[index] !== '0' || foundNonZero) {\n        if (!foundNonZero) {\n          firstNonZero = nDigitsRead;\n        }\n\n        foundNonZero = true;\n\n        // Only store 34 digits\n        digits[digitsInsert++] = parseInt(string[index], 10);\n        nDigitsStored = nDigitsStored + 1;\n      }\n    }\n\n    if (foundNonZero) nDigits = nDigits + 1;\n    if (sawRadix) radixPosition = radixPosition + 1;\n\n    nDigitsRead = nDigitsRead + 1;\n    index = index + 1;\n  }\n\n  if (sawRadix && !nDigitsRead) throw new TypeError('' + string + ' not a valid Decimal128 string');\n\n  // Read exponent if exists\n  if (string[index] === 'e' || string[index] === 'E') {\n    // Read exponent digits\n    var match = string.substr(++index).match(EXPONENT_REGEX);\n\n    // No digits read\n    if (!match || !match[2]) return new Decimal128(new Buffer(NAN_BUFFER));\n\n    // Get exponent\n    exponent = parseInt(match[0], 10);\n\n    // Adjust the index\n    index = index + match[0].length;\n  }\n\n  // Return not a number\n  if (string[index]) return new Decimal128(new Buffer(NAN_BUFFER));\n\n  // Done reading input\n  // Find first non-zero digit in digits\n  firstDigit = 0;\n\n  if (!nDigitsStored) {\n    firstDigit = 0;\n    lastDigit = 0;\n    digits[0] = 0;\n    nDigits = 1;\n    nDigitsStored = 1;\n    significantDigits = 0;\n  } else {\n    lastDigit = nDigitsStored - 1;\n    significantDigits = nDigits;\n    if (significantDigits !== 1) {\n      while (string[firstNonZero + significantDigits - 1] === '0') {\n        significantDigits = significantDigits - 1;\n      }\n    }\n  }\n\n  // Normalization of exponent\n  // Correct exponent based on radix position, and shift significand as needed\n  // to represent user input\n\n  // Overflow prevention\n  if (exponent <= radixPosition && radixPosition - exponent > 1 << 14) {\n    exponent = EXPONENT_MIN;\n  } else {\n    exponent = exponent - radixPosition;\n  }\n\n  // Attempt to normalize the exponent\n  while (exponent > EXPONENT_MAX) {\n    // Shift exponent to significand and decrease\n    lastDigit = lastDigit + 1;\n\n    if (lastDigit - firstDigit > MAX_DIGITS) {\n      // Check if we have a zero then just hard clamp, otherwise fail\n      var digitsString = digits.join('');\n      if (digitsString.match(/^0+$/)) {\n        exponent = EXPONENT_MAX;\n        break;\n      }\n      invalidErr(string, 'overflow');\n    }\n    exponent = exponent - 1;\n  }\n\n  while (exponent < EXPONENT_MIN || nDigitsStored < nDigits) {\n    // Shift last digit. can only do this if < significant digits than # stored.\n    if (lastDigit === 0 && significantDigits < nDigitsStored) {\n      exponent = EXPONENT_MIN;\n      significantDigits = 0;\n      break;\n    }\n\n    if (nDigitsStored < nDigits) {\n      // adjust to match digits not stored\n      nDigits = nDigits - 1;\n    } else {\n      // adjust to round\n      lastDigit = lastDigit - 1;\n    }\n\n    if (exponent < EXPONENT_MAX) {\n      exponent = exponent + 1;\n    } else {\n      // Check if we have a zero then just hard clamp, otherwise fail\n      digitsString = digits.join('');\n      if (digitsString.match(/^0+$/)) {\n        exponent = EXPONENT_MAX;\n        break;\n      }\n      invalidErr(string, 'overflow');\n    }\n  }\n\n  // Round\n  // We've normalized the exponent, but might still need to round.\n  if (lastDigit - firstDigit + 1 < significantDigits) {\n    var endOfString = nDigitsRead;\n\n    // If we have seen a radix point, 'string' is 1 longer than we have\n    // documented with ndigits_read, so inc the position of the first nonzero\n    // digit and the position that digits are read to.\n    if (sawRadix) {\n      firstNonZero = firstNonZero + 1;\n      endOfString = endOfString + 1;\n    }\n    // if negative, we need to increment again to account for - sign at start.\n    if (isNegative) {\n      firstNonZero = firstNonZero + 1;\n      endOfString = endOfString + 1;\n    }\n\n    var roundDigit = parseInt(string[firstNonZero + lastDigit + 1], 10);\n    var roundBit = 0;\n\n    if (roundDigit >= 5) {\n      roundBit = 1;\n      if (roundDigit === 5) {\n        roundBit = digits[lastDigit] % 2 === 1;\n        for (i = firstNonZero + lastDigit + 2; i < endOfString; i++) {\n          if (parseInt(string[i], 10)) {\n            roundBit = 1;\n            break;\n          }\n        }\n      }\n    }\n\n    if (roundBit) {\n      var dIdx = lastDigit;\n\n      for (; dIdx >= 0; dIdx--) {\n        if (++digits[dIdx] > 9) {\n          digits[dIdx] = 0;\n\n          // overflowed most significant digit\n          if (dIdx === 0) {\n            if (exponent < EXPONENT_MAX) {\n              exponent = exponent + 1;\n              digits[dIdx] = 1;\n            } else {\n              return new Decimal128(new Buffer(isNegative ? INF_NEGATIVE_BUFFER : INF_POSITIVE_BUFFER));\n            }\n          }\n        }\n      }\n    }\n  }\n\n  // Encode significand\n  // The high 17 digits of the significand\n  significandHigh = long_1.fromNumber(0);\n  // The low 17 digits of the significand\n  significandLow = long_1.fromNumber(0);\n\n  // read a zero\n  if (significantDigits === 0) {\n    significandHigh = long_1.fromNumber(0);\n    significandLow = long_1.fromNumber(0);\n  } else if (lastDigit - firstDigit < 17) {\n    dIdx = firstDigit;\n    significandLow = long_1.fromNumber(digits[dIdx++]);\n    significandHigh = new long_1(0, 0);\n\n    for (; dIdx <= lastDigit; dIdx++) {\n      significandLow = significandLow.multiply(long_1.fromNumber(10));\n      significandLow = significandLow.add(long_1.fromNumber(digits[dIdx]));\n    }\n  } else {\n    dIdx = firstDigit;\n    significandHigh = long_1.fromNumber(digits[dIdx++]);\n\n    for (; dIdx <= lastDigit - 17; dIdx++) {\n      significandHigh = significandHigh.multiply(long_1.fromNumber(10));\n      significandHigh = significandHigh.add(long_1.fromNumber(digits[dIdx]));\n    }\n\n    significandLow = long_1.fromNumber(digits[dIdx++]);\n\n    for (; dIdx <= lastDigit; dIdx++) {\n      significandLow = significandLow.multiply(long_1.fromNumber(10));\n      significandLow = significandLow.add(long_1.fromNumber(digits[dIdx]));\n    }\n  }\n\n  var significand = multiply64x2(significandHigh, long_1.fromString('100000000000000000'));\n\n  significand.low = significand.low.add(significandLow);\n\n  if (lessThan(significand.low, significandLow)) {\n    significand.high = significand.high.add(long_1.fromNumber(1));\n  }\n\n  // Biased exponent\n  biasedExponent = exponent + EXPONENT_BIAS;\n  var dec = { low: long_1.fromNumber(0), high: long_1.fromNumber(0) };\n\n  // Encode combination, exponent, and significand.\n  if (significand.high.shiftRightUnsigned(49).and(long_1.fromNumber(1)).equals(long_1.fromNumber)) {\n    // Encode '11' into bits 1 to 3\n    dec.high = dec.high.or(long_1.fromNumber(0x3).shiftLeft(61));\n    dec.high = dec.high.or(long_1.fromNumber(biasedExponent).and(long_1.fromNumber(0x3fff).shiftLeft(47)));\n    dec.high = dec.high.or(significand.high.and(long_1.fromNumber(0x7fffffffffff)));\n  } else {\n    dec.high = dec.high.or(long_1.fromNumber(biasedExponent & 0x3fff).shiftLeft(49));\n    dec.high = dec.high.or(significand.high.and(long_1.fromNumber(0x1ffffffffffff)));\n  }\n\n  dec.low = significand.low;\n\n  // Encode sign\n  if (isNegative) {\n    dec.high = dec.high.or(long_1.fromString('9223372036854775808'));\n  }\n\n  // Encode into a buffer\n  var buffer = new Buffer(16);\n  index = 0;\n\n  // Encode the low 64 bits of the decimal\n  // Encode low bits\n  buffer[index++] = dec.low.low_ & 0xff;\n  buffer[index++] = dec.low.low_ >> 8 & 0xff;\n  buffer[index++] = dec.low.low_ >> 16 & 0xff;\n  buffer[index++] = dec.low.low_ >> 24 & 0xff;\n  // Encode high bits\n  buffer[index++] = dec.low.high_ & 0xff;\n  buffer[index++] = dec.low.high_ >> 8 & 0xff;\n  buffer[index++] = dec.low.high_ >> 16 & 0xff;\n  buffer[index++] = dec.low.high_ >> 24 & 0xff;\n\n  // Encode the high 64 bits of the decimal\n  // Encode low bits\n  buffer[index++] = dec.high.low_ & 0xff;\n  buffer[index++] = dec.high.low_ >> 8 & 0xff;\n  buffer[index++] = dec.high.low_ >> 16 & 0xff;\n  buffer[index++] = dec.high.low_ >> 24 & 0xff;\n  // Encode high bits\n  buffer[index++] = dec.high.high_ & 0xff;\n  buffer[index++] = dec.high.high_ >> 8 & 0xff;\n  buffer[index++] = dec.high.high_ >> 16 & 0xff;\n  buffer[index++] = dec.high.high_ >> 24 & 0xff;\n\n  // Return the new Decimal128\n  return new Decimal128(buffer);\n};\n\n// Extract least significant 5 bits\nvar COMBINATION_MASK = 0x1f;\n// Extract least significant 14 bits\nvar EXPONENT_MASK = 0x3fff;\n// Value of combination field for Inf\nvar COMBINATION_INFINITY = 30;\n// Value of combination field for NaN\nvar COMBINATION_NAN = 31;\n// Value of combination field for NaN\n// var COMBINATION_SNAN = 32;\n// decimal128 exponent bias\nEXPONENT_BIAS = 6176;\n\n/**\n * Create a string representation of the raw Decimal128 value\n *\n * @method\n * @return {string} returns a Decimal128 string representation.\n */\nDecimal128.prototype.toString = function () {\n  // Note: bits in this routine are referred to starting at 0,\n  // from the sign bit, towards the coefficient.\n\n  // bits 0 - 31\n  var high;\n  // bits 32 - 63\n  var midh;\n  // bits 64 - 95\n  var midl;\n  // bits 96 - 127\n  var low;\n  // bits 1 - 5\n  var combination;\n  // decoded biased exponent (14 bits)\n  var biased_exponent;\n  // the number of significand digits\n  var significand_digits = 0;\n  // the base-10 digits in the significand\n  var significand = new Array(36);\n  for (var i = 0; i < significand.length; i++) {\n    significand[i] = 0;\n  } // read pointer into significand\n  var index = 0;\n\n  // unbiased exponent\n  var exponent;\n  // the exponent if scientific notation is used\n  var scientific_exponent;\n\n  // true if the number is zero\n  var is_zero = false;\n\n  // the most signifcant significand bits (50-46)\n  var significand_msb;\n  // temporary storage for significand decoding\n  var significand128 = { parts: new Array(4) };\n  // indexing variables\n  var j, k;\n\n  // Output string\n  var string = [];\n\n  // Unpack index\n  index = 0;\n\n  // Buffer reference\n  var buffer = this.bytes;\n\n  // Unpack the low 64bits into a long\n  low = buffer[index++] | buffer[index++] << 8 | buffer[index++] << 16 | buffer[index++] << 24;\n  midl = buffer[index++] | buffer[index++] << 8 | buffer[index++] << 16 | buffer[index++] << 24;\n\n  // Unpack the high 64bits into a long\n  midh = buffer[index++] | buffer[index++] << 8 | buffer[index++] << 16 | buffer[index++] << 24;\n  high = buffer[index++] | buffer[index++] << 8 | buffer[index++] << 16 | buffer[index++] << 24;\n\n  // Unpack index\n  index = 0;\n\n  // Create the state of the decimal\n  var dec = {\n    low: new long_1(low, midl),\n    high: new long_1(midh, high)\n  };\n\n  if (dec.high.lessThan(long_1.ZERO)) {\n    string.push('-');\n  }\n\n  // Decode combination field and exponent\n  combination = high >> 26 & COMBINATION_MASK;\n\n  if (combination >> 3 === 3) {\n    // Check for 'special' values\n    if (combination === COMBINATION_INFINITY) {\n      return string.join('') + 'Infinity';\n    } else if (combination === COMBINATION_NAN) {\n      return 'NaN';\n    } else {\n      biased_exponent = high >> 15 & EXPONENT_MASK;\n      significand_msb = 0x08 + (high >> 14 & 0x01);\n    }\n  } else {\n    significand_msb = high >> 14 & 0x07;\n    biased_exponent = high >> 17 & EXPONENT_MASK;\n  }\n\n  exponent = biased_exponent - EXPONENT_BIAS;\n\n  // Create string of significand digits\n\n  // Convert the 114-bit binary number represented by\n  // (significand_high, significand_low) to at most 34 decimal\n  // digits through modulo and division.\n  significand128.parts[0] = (high & 0x3fff) + ((significand_msb & 0xf) << 14);\n  significand128.parts[1] = midh;\n  significand128.parts[2] = midl;\n  significand128.parts[3] = low;\n\n  if (significand128.parts[0] === 0 && significand128.parts[1] === 0 && significand128.parts[2] === 0 && significand128.parts[3] === 0) {\n    is_zero = true;\n  } else {\n    for (k = 3; k >= 0; k--) {\n      var least_digits = 0;\n      // Peform the divide\n      var result = divideu128(significand128);\n      significand128 = result.quotient;\n      least_digits = result.rem.low_;\n\n      // We now have the 9 least significant digits (in base 2).\n      // Convert and output to string.\n      if (!least_digits) continue;\n\n      for (j = 8; j >= 0; j--) {\n        // significand[k * 9 + j] = Math.round(least_digits % 10);\n        significand[k * 9 + j] = least_digits % 10;\n        // least_digits = Math.round(least_digits / 10);\n        least_digits = Math.floor(least_digits / 10);\n      }\n    }\n  }\n\n  // Output format options:\n  // Scientific - [-]d.dddE(+/-)dd or [-]dE(+/-)dd\n  // Regular    - ddd.ddd\n\n  if (is_zero) {\n    significand_digits = 1;\n    significand[index] = 0;\n  } else {\n    significand_digits = 36;\n    i = 0;\n\n    while (!significand[index]) {\n      i++;\n      significand_digits = significand_digits - 1;\n      index = index + 1;\n    }\n  }\n\n  scientific_exponent = significand_digits - 1 + exponent;\n\n  // The scientific exponent checks are dictated by the string conversion\n  // specification and are somewhat arbitrary cutoffs.\n  //\n  // We must check exponent > 0, because if this is the case, the number\n  // has trailing zeros.  However, we *cannot* output these trailing zeros,\n  // because doing so would change the precision of the value, and would\n  // change stored data if the string converted number is round tripped.\n  if (scientific_exponent >= 34 || scientific_exponent <= -7 || exponent > 0) {\n    // Scientific format\n\n    // if there are too many significant digits, we should just be treating numbers\n    // as + or - 0 and using the non-scientific exponent (this is for the \"invalid\n    // representation should be treated as 0/-0\" spec cases in decimal128-1.json)\n    if (significand_digits > 34) {\n      string.push(0);\n      if (exponent > 0) string.push('E+' + exponent);else if (exponent < 0) string.push('E' + exponent);\n      return string.join('');\n    }\n\n    string.push(significand[index++]);\n    significand_digits = significand_digits - 1;\n\n    if (significand_digits) {\n      string.push('.');\n    }\n\n    for (i = 0; i < significand_digits; i++) {\n      string.push(significand[index++]);\n    }\n\n    // Exponent\n    string.push('E');\n    if (scientific_exponent > 0) {\n      string.push('+' + scientific_exponent);\n    } else {\n      string.push(scientific_exponent);\n    }\n  } else {\n    // Regular format with no decimal place\n    if (exponent >= 0) {\n      for (i = 0; i < significand_digits; i++) {\n        string.push(significand[index++]);\n      }\n    } else {\n      var radix_position = significand_digits + exponent;\n\n      // non-zero digits before radix\n      if (radix_position > 0) {\n        for (i = 0; i < radix_position; i++) {\n          string.push(significand[index++]);\n        }\n      } else {\n        string.push('0');\n      }\n\n      string.push('.');\n      // add leading zeros after radix\n      while (radix_position++ < 0) {\n        string.push('0');\n      }\n\n      for (i = 0; i < significand_digits - Math.max(radix_position - 1, 0); i++) {\n        string.push(significand[index++]);\n      }\n    }\n  }\n\n  return string.join('');\n};\n\nDecimal128.prototype.toJSON = function () {\n  return { $numberDecimal: this.toString() };\n};\n\nvar decimal128 = Decimal128;\nvar Decimal128_1 = Decimal128;\ndecimal128.Decimal128 = Decimal128_1;\n\n/**\n * A class representation of the BSON MinKey type.\n *\n * @class\n * @return {MinKey} A MinKey instance\n */\n\nfunction MinKey() {\n  if (!(this instanceof MinKey)) return new MinKey();\n\n  this._bsontype = 'MinKey';\n}\n\nvar min_key = MinKey;\nvar MinKey_1 = MinKey;\nmin_key.MinKey = MinKey_1;\n\n/**\n * A class representation of the BSON MaxKey type.\n *\n * @class\n * @return {MaxKey} A MaxKey instance\n */\n\nfunction MaxKey() {\n  if (!(this instanceof MaxKey)) return new MaxKey();\n\n  this._bsontype = 'MaxKey';\n}\n\nvar max_key = MaxKey;\nvar MaxKey_1 = MaxKey;\nmax_key.MaxKey = MaxKey_1;\n\n/**\n * A class representation of the BSON DBRef type.\n *\n * @class\n * @param {string} collection the collection name.\n * @param {ObjectID} oid the reference ObjectID.\n * @param {string} [db] optional db name, if omitted the reference is local to the current db.\n * @return {DBRef}\n */\n\nfunction DBRef(collection, oid, db, fields) {\n  if (!(this instanceof DBRef)) return new DBRef(collection, oid, db, fields);\n\n  // check if namespace has been provided\n  var parts = collection.split('.');\n  if (parts.length === 2) {\n    db = parts.shift();\n    collection = parts.shift();\n  }\n\n  this._bsontype = 'DBRef';\n  this.collection = collection;\n  this.oid = oid;\n  this.db = db;\n  this.fields = fields || {};\n}\n\n/**\n * @ignore\n * @api private\n */\nDBRef.prototype.toJSON = function () {\n  var o = {\n    $ref: this.collection,\n    $id: this.oid\n  };\n\n  if (this.db != null) o.$db = this.db;\n  o = Object.assign(o, this.fields);\n  return o;\n};\n\nvar db_ref = DBRef;\nvar DBRef_1 = DBRef;\ndb_ref.DBRef = DBRef_1;\n\nvar lookup = [];\nvar revLookup = [];\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array;\nvar inited = false;\nfunction init() {\n  inited = true;\n  var code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n  for (var i = 0, len = code.length; i < len; ++i) {\n    lookup[i] = code[i];\n    revLookup[code.charCodeAt(i)] = i;\n  }\n\n  revLookup['-'.charCodeAt(0)] = 62;\n  revLookup['_'.charCodeAt(0)] = 63;\n}\n\nfunction toByteArray(b64) {\n  if (!inited) {\n    init();\n  }\n  var i, j, l, tmp, placeHolders, arr;\n  var len = b64.length;\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4');\n  }\n\n  // the number of equal signs (place holders)\n  // if there are two placeholders, than the two characters before it\n  // represent one byte\n  // if there is only one, then the three characters before it represent 2 bytes\n  // this is just a cheap hack to not do indexOf twice\n  placeHolders = b64[len - 2] === '=' ? 2 : b64[len - 1] === '=' ? 1 : 0;\n\n  // base64 is 4/3 + up to two characters of the original data\n  arr = new Arr(len * 3 / 4 - placeHolders);\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  l = placeHolders > 0 ? len - 4 : len;\n\n  var L = 0;\n\n  for (i = 0, j = 0; i < l; i += 4, j += 3) {\n    tmp = revLookup[b64.charCodeAt(i)] << 18 | revLookup[b64.charCodeAt(i + 1)] << 12 | revLookup[b64.charCodeAt(i + 2)] << 6 | revLookup[b64.charCodeAt(i + 3)];\n    arr[L++] = tmp >> 16 & 0xFF;\n    arr[L++] = tmp >> 8 & 0xFF;\n    arr[L++] = tmp & 0xFF;\n  }\n\n  if (placeHolders === 2) {\n    tmp = revLookup[b64.charCodeAt(i)] << 2 | revLookup[b64.charCodeAt(i + 1)] >> 4;\n    arr[L++] = tmp & 0xFF;\n  } else if (placeHolders === 1) {\n    tmp = revLookup[b64.charCodeAt(i)] << 10 | revLookup[b64.charCodeAt(i + 1)] << 4 | revLookup[b64.charCodeAt(i + 2)] >> 2;\n    arr[L++] = tmp >> 8 & 0xFF;\n    arr[L++] = tmp & 0xFF;\n  }\n\n  return arr;\n}\n\nfunction tripletToBase64(num) {\n  return lookup[num >> 18 & 0x3F] + lookup[num >> 12 & 0x3F] + lookup[num >> 6 & 0x3F] + lookup[num & 0x3F];\n}\n\nfunction encodeChunk(uint8, start, end) {\n  var tmp;\n  var output = [];\n  for (var i = start; i < end; i += 3) {\n    tmp = (uint8[i] << 16) + (uint8[i + 1] << 8) + uint8[i + 2];\n    output.push(tripletToBase64(tmp));\n  }\n  return output.join('');\n}\n\nfunction fromByteArray(uint8) {\n  if (!inited) {\n    init();\n  }\n  var tmp;\n  var len = uint8.length;\n  var extraBytes = len % 3; // if we have 1 byte left, pad 2 bytes\n  var output = '';\n  var parts = [];\n  var maxChunkLength = 16383; // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(uint8, i, i + maxChunkLength > len2 ? len2 : i + maxChunkLength));\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1];\n    output += lookup[tmp >> 2];\n    output += lookup[tmp << 4 & 0x3F];\n    output += '==';\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1];\n    output += lookup[tmp >> 10];\n    output += lookup[tmp >> 4 & 0x3F];\n    output += lookup[tmp << 2 & 0x3F];\n    output += '=';\n  }\n\n  parts.push(output);\n\n  return parts.join('');\n}\n\nfunction read(buffer, offset, isLE, mLen, nBytes) {\n  var e, m;\n  var eLen = nBytes * 8 - mLen - 1;\n  var eMax = (1 << eLen) - 1;\n  var eBias = eMax >> 1;\n  var nBits = -7;\n  var i = isLE ? nBytes - 1 : 0;\n  var d = isLE ? -1 : 1;\n  var s = buffer[offset + i];\n\n  i += d;\n\n  e = s & (1 << -nBits) - 1;\n  s >>= -nBits;\n  nBits += eLen;\n  for (; nBits > 0; e = e * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & (1 << -nBits) - 1;\n  e >>= -nBits;\n  nBits += mLen;\n  for (; nBits > 0; m = m * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias;\n  } else if (e === eMax) {\n    return m ? NaN : (s ? -1 : 1) * Infinity;\n  } else {\n    m = m + Math.pow(2, mLen);\n    e = e - eBias;\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen);\n}\n\nfunction write(buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c;\n  var eLen = nBytes * 8 - mLen - 1;\n  var eMax = (1 << eLen) - 1;\n  var eBias = eMax >> 1;\n  var rt = mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0;\n  var i = isLE ? 0 : nBytes - 1;\n  var d = isLE ? 1 : -1;\n  var s = value < 0 || value === 0 && 1 / value < 0 ? 1 : 0;\n\n  value = Math.abs(value);\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0;\n    e = eMax;\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2);\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--;\n      c *= 2;\n    }\n    if (e + eBias >= 1) {\n      value += rt / c;\n    } else {\n      value += rt * Math.pow(2, 1 - eBias);\n    }\n    if (value * c >= 2) {\n      e++;\n      c /= 2;\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0;\n      e = eMax;\n    } else if (e + eBias >= 1) {\n      m = (value * c - 1) * Math.pow(2, mLen);\n      e = e + eBias;\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen);\n      e = 0;\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = e << mLen | m;\n  eLen += mLen;\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128;\n}\n\nvar toString = {}.toString;\n\nvar isArray = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n\n/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>\n * @license  MIT\n */\n\nvar INSPECT_MAX_BYTES = 50;\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Use Object implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * Due to various browser bugs, sometimes the Object implementation will be used even\n * when the browser supports typed arrays.\n *\n * Note:\n *\n *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,\n *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.\n *\n *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.\n *\n *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of\n *     incorrect length in some situations.\n\n * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they\n * get the Object implementation, which is slower but behaves correctly.\n */\nBuffer$1.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined ? global.TYPED_ARRAY_SUPPORT : true;\n\n/*\n * Export kMaxLength after typed array support is determined.\n */\nvar _kMaxLength = kMaxLength();\n\nfunction kMaxLength() {\n  return Buffer$1.TYPED_ARRAY_SUPPORT ? 0x7fffffff : 0x3fffffff;\n}\n\nfunction createBuffer(that, length) {\n  if (kMaxLength() < length) {\n    throw new RangeError('Invalid typed array length');\n  }\n  if (Buffer$1.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = new Uint8Array(length);\n    that.__proto__ = Buffer$1.prototype;\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    if (that === null) {\n      that = new Buffer$1(length);\n    }\n    that.length = length;\n  }\n\n  return that;\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer$1(arg, encodingOrOffset, length) {\n  if (!Buffer$1.TYPED_ARRAY_SUPPORT && !(this instanceof Buffer$1)) {\n    return new Buffer$1(arg, encodingOrOffset, length);\n  }\n\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new Error('If encoding is specified then the first argument must be a string');\n    }\n    return allocUnsafe(this, arg);\n  }\n  return from(this, arg, encodingOrOffset, length);\n}\n\nBuffer$1.poolSize = 8192; // not used by this implementation\n\n// TODO: Legacy, not needed anymore. Remove in next major version.\nBuffer$1._augment = function (arr) {\n  arr.__proto__ = Buffer$1.prototype;\n  return arr;\n};\n\nfunction from(that, value, encodingOrOffset, length) {\n  if (typeof value === 'number') {\n    throw new TypeError('\"value\" argument must not be a number');\n  }\n\n  if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {\n    return fromArrayBuffer(that, value, encodingOrOffset, length);\n  }\n\n  if (typeof value === 'string') {\n    return fromString(that, value, encodingOrOffset);\n  }\n\n  return fromObject(that, value);\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer$1.from = function (value, encodingOrOffset, length) {\n  return from(null, value, encodingOrOffset, length);\n};\n\nif (Buffer$1.TYPED_ARRAY_SUPPORT) {\n  Buffer$1.prototype.__proto__ = Uint8Array.prototype;\n  Buffer$1.__proto__ = Uint8Array;\n}\n\nfunction assertSize(size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be a number');\n  } else if (size < 0) {\n    throw new RangeError('\"size\" argument must not be negative');\n  }\n}\n\nfunction alloc(that, size, fill, encoding) {\n  assertSize(size);\n  if (size <= 0) {\n    return createBuffer(that, size);\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpretted as a start offset.\n    return typeof encoding === 'string' ? createBuffer(that, size).fill(fill, encoding) : createBuffer(that, size).fill(fill);\n  }\n  return createBuffer(that, size);\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer$1.alloc = function (size, fill, encoding) {\n  return alloc(null, size, fill, encoding);\n};\n\nfunction allocUnsafe(that, size) {\n  assertSize(size);\n  that = createBuffer(that, size < 0 ? 0 : checked(size) | 0);\n  if (!Buffer$1.TYPED_ARRAY_SUPPORT) {\n    for (var i = 0; i < size; ++i) {\n      that[i] = 0;\n    }\n  }\n  return that;\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer$1.allocUnsafe = function (size) {\n  return allocUnsafe(null, size);\n};\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer$1.allocUnsafeSlow = function (size) {\n  return allocUnsafe(null, size);\n};\n\nfunction fromString(that, string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8';\n  }\n\n  if (!Buffer$1.isEncoding(encoding)) {\n    throw new TypeError('\"encoding\" must be a valid string encoding');\n  }\n\n  var length = byteLength(string, encoding) | 0;\n  that = createBuffer(that, length);\n\n  var actual = that.write(string, encoding);\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    that = that.slice(0, actual);\n  }\n\n  return that;\n}\n\nfunction fromArrayLike(that, array) {\n  var length = array.length < 0 ? 0 : checked(array.length) | 0;\n  that = createBuffer(that, length);\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255;\n  }\n  return that;\n}\n\nfunction fromArrayBuffer(that, array, byteOffset, length) {\n  array.byteLength; // this throws if `array` is not a valid ArrayBuffer\n\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\\'offset\\' is out of bounds');\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\\'length\\' is out of bounds');\n  }\n\n  if (byteOffset === undefined && length === undefined) {\n    array = new Uint8Array(array);\n  } else if (length === undefined) {\n    array = new Uint8Array(array, byteOffset);\n  } else {\n    array = new Uint8Array(array, byteOffset, length);\n  }\n\n  if (Buffer$1.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = array;\n    that.__proto__ = Buffer$1.prototype;\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    that = fromArrayLike(that, array);\n  }\n  return that;\n}\n\nfunction fromObject(that, obj) {\n  if (internalIsBuffer(obj)) {\n    var len = checked(obj.length) | 0;\n    that = createBuffer(that, len);\n\n    if (that.length === 0) {\n      return that;\n    }\n\n    obj.copy(that, 0, 0, len);\n    return that;\n  }\n\n  if (obj) {\n    if (typeof ArrayBuffer !== 'undefined' && obj.buffer instanceof ArrayBuffer || 'length' in obj) {\n      if (typeof obj.length !== 'number' || isnan(obj.length)) {\n        return createBuffer(that, 0);\n      }\n      return fromArrayLike(that, obj);\n    }\n\n    if (obj.type === 'Buffer' && isArray(obj.data)) {\n      return fromArrayLike(that, obj.data);\n    }\n  }\n\n  throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.');\n}\n\nfunction checked(length) {\n  // Note: cannot use `length < kMaxLength()` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= kMaxLength()) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' + 'size: 0x' + kMaxLength().toString(16) + ' bytes');\n  }\n  return length | 0;\n}\n\nfunction SlowBuffer(length) {\n  if (+length != length) {\n    // eslint-disable-line eqeqeq\n    length = 0;\n  }\n  return Buffer$1.alloc(+length);\n}\nBuffer$1.isBuffer = isBuffer;\nfunction internalIsBuffer(b) {\n  return !!(b != null && b._isBuffer);\n}\n\nBuffer$1.compare = function compare(a, b) {\n  if (!internalIsBuffer(a) || !internalIsBuffer(b)) {\n    throw new TypeError('Arguments must be Buffers');\n  }\n\n  if (a === b) return 0;\n\n  var x = a.length;\n  var y = b.length;\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i];\n      y = b[i];\n      break;\n    }\n  }\n\n  if (x < y) return -1;\n  if (y < x) return 1;\n  return 0;\n};\n\nBuffer$1.isEncoding = function isEncoding(encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true;\n    default:\n      return false;\n  }\n};\n\nBuffer$1.concat = function concat(list, length) {\n  if (!isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers');\n  }\n\n  if (list.length === 0) {\n    return Buffer$1.alloc(0);\n  }\n\n  var i;\n  if (length === undefined) {\n    length = 0;\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length;\n    }\n  }\n\n  var buffer = Buffer$1.allocUnsafe(length);\n  var pos = 0;\n  for (i = 0; i < list.length; ++i) {\n    var buf = list[i];\n    if (!internalIsBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers');\n    }\n    buf.copy(buffer, pos);\n    pos += buf.length;\n  }\n  return buffer;\n};\n\nfunction byteLength(string, encoding) {\n  if (internalIsBuffer(string)) {\n    return string.length;\n  }\n  if (typeof ArrayBuffer !== 'undefined' && typeof ArrayBuffer.isView === 'function' && (ArrayBuffer.isView(string) || string instanceof ArrayBuffer)) {\n    return string.byteLength;\n  }\n  if (typeof string !== 'string') {\n    string = '' + string;\n  }\n\n  var len = string.length;\n  if (len === 0) return 0;\n\n  // Use a for loop to avoid recursion\n  var loweredCase = false;\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len;\n      case 'utf8':\n      case 'utf-8':\n      case undefined:\n        return utf8ToBytes(string).length;\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2;\n      case 'hex':\n        return len >>> 1;\n      case 'base64':\n        return base64ToBytes(string).length;\n      default:\n        if (loweredCase) return utf8ToBytes(string).length; // assume utf8\n        encoding = ('' + encoding).toLowerCase();\n        loweredCase = true;\n    }\n  }\n}\nBuffer$1.byteLength = byteLength;\n\nfunction slowToString(encoding, start, end) {\n  var loweredCase = false;\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0;\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return '';\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length;\n  }\n\n  if (end <= 0) {\n    return '';\n  }\n\n  // Force coersion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0;\n  start >>>= 0;\n\n  if (end <= start) {\n    return '';\n  }\n\n  if (!encoding) encoding = 'utf8';\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end);\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end);\n\n      case 'ascii':\n        return asciiSlice(this, start, end);\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end);\n\n      case 'base64':\n        return base64Slice(this, start, end);\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end);\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding);\n        encoding = (encoding + '').toLowerCase();\n        loweredCase = true;\n    }\n  }\n}\n\n// The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect\n// Buffer instances.\nBuffer$1.prototype._isBuffer = true;\n\nfunction swap(b, n, m) {\n  var i = b[n];\n  b[n] = b[m];\n  b[m] = i;\n}\n\nBuffer$1.prototype.swap16 = function swap16() {\n  var len = this.length;\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits');\n  }\n  for (var i = 0; i < len; i += 2) {\n    swap(this, i, i + 1);\n  }\n  return this;\n};\n\nBuffer$1.prototype.swap32 = function swap32() {\n  var len = this.length;\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits');\n  }\n  for (var i = 0; i < len; i += 4) {\n    swap(this, i, i + 3);\n    swap(this, i + 1, i + 2);\n  }\n  return this;\n};\n\nBuffer$1.prototype.swap64 = function swap64() {\n  var len = this.length;\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits');\n  }\n  for (var i = 0; i < len; i += 8) {\n    swap(this, i, i + 7);\n    swap(this, i + 1, i + 6);\n    swap(this, i + 2, i + 5);\n    swap(this, i + 3, i + 4);\n  }\n  return this;\n};\n\nBuffer$1.prototype.toString = function toString() {\n  var length = this.length | 0;\n  if (length === 0) return '';\n  if (arguments.length === 0) return utf8Slice(this, 0, length);\n  return slowToString.apply(this, arguments);\n};\n\nBuffer$1.prototype.equals = function equals(b) {\n  if (!internalIsBuffer(b)) throw new TypeError('Argument must be a Buffer');\n  if (this === b) return true;\n  return Buffer$1.compare(this, b) === 0;\n};\n\nBuffer$1.prototype.inspect = function inspect() {\n  var str = '';\n  var max = INSPECT_MAX_BYTES;\n  if (this.length > 0) {\n    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ');\n    if (this.length > max) str += ' ... ';\n  }\n  return '<Buffer ' + str + '>';\n};\n\nBuffer$1.prototype.compare = function compare(target, start, end, thisStart, thisEnd) {\n  if (!internalIsBuffer(target)) {\n    throw new TypeError('Argument must be a Buffer');\n  }\n\n  if (start === undefined) {\n    start = 0;\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0;\n  }\n  if (thisStart === undefined) {\n    thisStart = 0;\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length;\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index');\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0;\n  }\n  if (thisStart >= thisEnd) {\n    return -1;\n  }\n  if (start >= end) {\n    return 1;\n  }\n\n  start >>>= 0;\n  end >>>= 0;\n  thisStart >>>= 0;\n  thisEnd >>>= 0;\n\n  if (this === target) return 0;\n\n  var x = thisEnd - thisStart;\n  var y = end - start;\n  var len = Math.min(x, y);\n\n  var thisCopy = this.slice(thisStart, thisEnd);\n  var targetCopy = target.slice(start, end);\n\n  for (var i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i];\n      y = targetCopy[i];\n      break;\n    }\n  }\n\n  if (x < y) return -1;\n  if (y < x) return 1;\n  return 0;\n};\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf(buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1;\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset;\n    byteOffset = 0;\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff;\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000;\n  }\n  byteOffset = +byteOffset; // Coerce to Number.\n  if (isNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : buffer.length - 1;\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset;\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1;else byteOffset = buffer.length - 1;\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0;else return -1;\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer$1.from(val, encoding);\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (internalIsBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1;\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir);\n  } else if (typeof val === 'number') {\n    val = val & 0xFF; // Search for a byte value [0-255]\n    if (Buffer$1.TYPED_ARRAY_SUPPORT && typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset);\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset);\n      }\n    }\n    return arrayIndexOf(buffer, [val], byteOffset, encoding, dir);\n  }\n\n  throw new TypeError('val must be string, number or Buffer');\n}\n\nfunction arrayIndexOf(arr, val, byteOffset, encoding, dir) {\n  var indexSize = 1;\n  var arrLength = arr.length;\n  var valLength = val.length;\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase();\n    if (encoding === 'ucs2' || encoding === 'ucs-2' || encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1;\n      }\n      indexSize = 2;\n      arrLength /= 2;\n      valLength /= 2;\n      byteOffset /= 2;\n    }\n  }\n\n  function read$$1(buf, i) {\n    if (indexSize === 1) {\n      return buf[i];\n    } else {\n      return buf.readUInt16BE(i * indexSize);\n    }\n  }\n\n  var i;\n  if (dir) {\n    var foundIndex = -1;\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read$$1(arr, i) === read$$1(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i;\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize;\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex;\n        foundIndex = -1;\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength;\n    for (i = byteOffset; i >= 0; i--) {\n      var found = true;\n      for (var j = 0; j < valLength; j++) {\n        if (read$$1(arr, i + j) !== read$$1(val, j)) {\n          found = false;\n          break;\n        }\n      }\n      if (found) return i;\n    }\n  }\n\n  return -1;\n}\n\nBuffer$1.prototype.includes = function includes(val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1;\n};\n\nBuffer$1.prototype.indexOf = function indexOf(val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true);\n};\n\nBuffer$1.prototype.lastIndexOf = function lastIndexOf(val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false);\n};\n\nfunction hexWrite(buf, string, offset, length) {\n  offset = Number(offset) || 0;\n  var remaining = buf.length - offset;\n  if (!length) {\n    length = remaining;\n  } else {\n    length = Number(length);\n    if (length > remaining) {\n      length = remaining;\n    }\n  }\n\n  // must be an even number of digits\n  var strLen = string.length;\n  if (strLen % 2 !== 0) throw new TypeError('Invalid hex string');\n\n  if (length > strLen / 2) {\n    length = strLen / 2;\n  }\n  for (var i = 0; i < length; ++i) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16);\n    if (isNaN(parsed)) return i;\n    buf[offset + i] = parsed;\n  }\n  return i;\n}\n\nfunction utf8Write(buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length);\n}\n\nfunction asciiWrite(buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length);\n}\n\nfunction latin1Write(buf, string, offset, length) {\n  return asciiWrite(buf, string, offset, length);\n}\n\nfunction base64Write(buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length);\n}\n\nfunction ucs2Write(buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length);\n}\n\nBuffer$1.prototype.write = function write$$1(string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8';\n    length = this.length;\n    offset = 0;\n    // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset;\n    length = this.length;\n    offset = 0;\n    // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset | 0;\n    if (isFinite(length)) {\n      length = length | 0;\n      if (encoding === undefined) encoding = 'utf8';\n    } else {\n      encoding = length;\n      length = undefined;\n    }\n    // legacy write(string, encoding, offset, length) - remove in v0.13\n  } else {\n    throw new Error('Buffer.write(string, encoding, offset[, length]) is no longer supported');\n  }\n\n  var remaining = this.length - offset;\n  if (length === undefined || length > remaining) length = remaining;\n\n  if (string.length > 0 && (length < 0 || offset < 0) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds');\n  }\n\n  if (!encoding) encoding = 'utf8';\n\n  var loweredCase = false;\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length);\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length);\n\n      case 'ascii':\n        return asciiWrite(this, string, offset, length);\n\n      case 'latin1':\n      case 'binary':\n        return latin1Write(this, string, offset, length);\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length);\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length);\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding);\n        encoding = ('' + encoding).toLowerCase();\n        loweredCase = true;\n    }\n  }\n};\n\nBuffer$1.prototype.toJSON = function toJSON() {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  };\n};\n\nfunction base64Slice(buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return fromByteArray(buf);\n  } else {\n    return fromByteArray(buf.slice(start, end));\n  }\n}\n\nfunction utf8Slice(buf, start, end) {\n  end = Math.min(buf.length, end);\n  var res = [];\n\n  var i = start;\n  while (i < end) {\n    var firstByte = buf[i];\n    var codePoint = null;\n    var bytesPerSequence = firstByte > 0xEF ? 4 : firstByte > 0xDF ? 3 : firstByte > 0xBF ? 2 : 1;\n\n    if (i + bytesPerSequence <= end) {\n      var secondByte, thirdByte, fourthByte, tempCodePoint;\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte;\n          }\n          break;\n        case 2:\n          secondByte = buf[i + 1];\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | secondByte & 0x3F;\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint;\n            }\n          }\n          break;\n        case 3:\n          secondByte = buf[i + 1];\n          thirdByte = buf[i + 2];\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | thirdByte & 0x3F;\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint;\n            }\n          }\n          break;\n        case 4:\n          secondByte = buf[i + 1];\n          thirdByte = buf[i + 2];\n          fourthByte = buf[i + 3];\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | fourthByte & 0x3F;\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint;\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD;\n      bytesPerSequence = 1;\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000;\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800);\n      codePoint = 0xDC00 | codePoint & 0x3FF;\n    }\n\n    res.push(codePoint);\n    i += bytesPerSequence;\n  }\n\n  return decodeCodePointsArray(res);\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nvar MAX_ARGUMENTS_LENGTH = 0x1000;\n\nfunction decodeCodePointsArray(codePoints) {\n  var len = codePoints.length;\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints); // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  var res = '';\n  var i = 0;\n  while (i < len) {\n    res += String.fromCharCode.apply(String, codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH));\n  }\n  return res;\n}\n\nfunction asciiSlice(buf, start, end) {\n  var ret = '';\n  end = Math.min(buf.length, end);\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F);\n  }\n  return ret;\n}\n\nfunction latin1Slice(buf, start, end) {\n  var ret = '';\n  end = Math.min(buf.length, end);\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i]);\n  }\n  return ret;\n}\n\nfunction hexSlice(buf, start, end) {\n  var len = buf.length;\n\n  if (!start || start < 0) start = 0;\n  if (!end || end < 0 || end > len) end = len;\n\n  var out = '';\n  for (var i = start; i < end; ++i) {\n    out += toHex(buf[i]);\n  }\n  return out;\n}\n\nfunction utf16leSlice(buf, start, end) {\n  var bytes = buf.slice(start, end);\n  var res = '';\n  for (var i = 0; i < bytes.length; i += 2) {\n    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256);\n  }\n  return res;\n}\n\nBuffer$1.prototype.slice = function slice(start, end) {\n  var len = this.length;\n  start = ~~start;\n  end = end === undefined ? len : ~~end;\n\n  if (start < 0) {\n    start += len;\n    if (start < 0) start = 0;\n  } else if (start > len) {\n    start = len;\n  }\n\n  if (end < 0) {\n    end += len;\n    if (end < 0) end = 0;\n  } else if (end > len) {\n    end = len;\n  }\n\n  if (end < start) end = start;\n\n  var newBuf;\n  if (Buffer$1.TYPED_ARRAY_SUPPORT) {\n    newBuf = this.subarray(start, end);\n    newBuf.__proto__ = Buffer$1.prototype;\n  } else {\n    var sliceLen = end - start;\n    newBuf = new Buffer$1(sliceLen, undefined);\n    for (var i = 0; i < sliceLen; ++i) {\n      newBuf[i] = this[i + start];\n    }\n  }\n\n  return newBuf;\n};\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset(offset, ext, length) {\n  if (offset % 1 !== 0 || offset < 0) throw new RangeError('offset is not uint');\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length');\n}\n\nBuffer$1.prototype.readUIntLE = function readUIntLE(offset, byteLength, noAssert) {\n  offset = offset | 0;\n  byteLength = byteLength | 0;\n  if (!noAssert) checkOffset(offset, byteLength, this.length);\n\n  var val = this[offset];\n  var mul = 1;\n  var i = 0;\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul;\n  }\n\n  return val;\n};\n\nBuffer$1.prototype.readUIntBE = function readUIntBE(offset, byteLength, noAssert) {\n  offset = offset | 0;\n  byteLength = byteLength | 0;\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length);\n  }\n\n  var val = this[offset + --byteLength];\n  var mul = 1;\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul;\n  }\n\n  return val;\n};\n\nBuffer$1.prototype.readUInt8 = function readUInt8(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length);\n  return this[offset];\n};\n\nBuffer$1.prototype.readUInt16LE = function readUInt16LE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length);\n  return this[offset] | this[offset + 1] << 8;\n};\n\nBuffer$1.prototype.readUInt16BE = function readUInt16BE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length);\n  return this[offset] << 8 | this[offset + 1];\n};\n\nBuffer$1.prototype.readUInt32LE = function readUInt32LE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length);\n\n  return (this[offset] | this[offset + 1] << 8 | this[offset + 2] << 16) + this[offset + 3] * 0x1000000;\n};\n\nBuffer$1.prototype.readUInt32BE = function readUInt32BE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length);\n\n  return this[offset] * 0x1000000 + (this[offset + 1] << 16 | this[offset + 2] << 8 | this[offset + 3]);\n};\n\nBuffer$1.prototype.readIntLE = function readIntLE(offset, byteLength, noAssert) {\n  offset = offset | 0;\n  byteLength = byteLength | 0;\n  if (!noAssert) checkOffset(offset, byteLength, this.length);\n\n  var val = this[offset];\n  var mul = 1;\n  var i = 0;\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul;\n  }\n  mul *= 0x80;\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength);\n\n  return val;\n};\n\nBuffer$1.prototype.readIntBE = function readIntBE(offset, byteLength, noAssert) {\n  offset = offset | 0;\n  byteLength = byteLength | 0;\n  if (!noAssert) checkOffset(offset, byteLength, this.length);\n\n  var i = byteLength;\n  var mul = 1;\n  var val = this[offset + --i];\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul;\n  }\n  mul *= 0x80;\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength);\n\n  return val;\n};\n\nBuffer$1.prototype.readInt8 = function readInt8(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length);\n  if (!(this[offset] & 0x80)) return this[offset];\n  return (0xff - this[offset] + 1) * -1;\n};\n\nBuffer$1.prototype.readInt16LE = function readInt16LE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length);\n  var val = this[offset] | this[offset + 1] << 8;\n  return val & 0x8000 ? val | 0xFFFF0000 : val;\n};\n\nBuffer$1.prototype.readInt16BE = function readInt16BE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length);\n  var val = this[offset + 1] | this[offset] << 8;\n  return val & 0x8000 ? val | 0xFFFF0000 : val;\n};\n\nBuffer$1.prototype.readInt32LE = function readInt32LE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length);\n\n  return this[offset] | this[offset + 1] << 8 | this[offset + 2] << 16 | this[offset + 3] << 24;\n};\n\nBuffer$1.prototype.readInt32BE = function readInt32BE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length);\n\n  return this[offset] << 24 | this[offset + 1] << 16 | this[offset + 2] << 8 | this[offset + 3];\n};\n\nBuffer$1.prototype.readFloatLE = function readFloatLE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length);\n  return read(this, offset, true, 23, 4);\n};\n\nBuffer$1.prototype.readFloatBE = function readFloatBE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length);\n  return read(this, offset, false, 23, 4);\n};\n\nBuffer$1.prototype.readDoubleLE = function readDoubleLE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length);\n  return read(this, offset, true, 52, 8);\n};\n\nBuffer$1.prototype.readDoubleBE = function readDoubleBE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length);\n  return read(this, offset, false, 52, 8);\n};\n\nfunction checkInt(buf, value, offset, ext, max, min) {\n  if (!internalIsBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance');\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds');\n  if (offset + ext > buf.length) throw new RangeError('Index out of range');\n}\n\nBuffer$1.prototype.writeUIntLE = function writeUIntLE(value, offset, byteLength, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  byteLength = byteLength | 0;\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1;\n    checkInt(this, value, offset, byteLength, maxBytes, 0);\n  }\n\n  var mul = 1;\n  var i = 0;\n  this[offset] = value & 0xFF;\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = value / mul & 0xFF;\n  }\n\n  return offset + byteLength;\n};\n\nBuffer$1.prototype.writeUIntBE = function writeUIntBE(value, offset, byteLength, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  byteLength = byteLength | 0;\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1;\n    checkInt(this, value, offset, byteLength, maxBytes, 0);\n  }\n\n  var i = byteLength - 1;\n  var mul = 1;\n  this[offset + i] = value & 0xFF;\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = value / mul & 0xFF;\n  }\n\n  return offset + byteLength;\n};\n\nBuffer$1.prototype.writeUInt8 = function writeUInt8(value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0);\n  if (!Buffer$1.TYPED_ARRAY_SUPPORT) value = Math.floor(value);\n  this[offset] = value & 0xff;\n  return offset + 1;\n};\n\nfunction objectWriteUInt16(buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffff + value + 1;\n  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; ++i) {\n    buf[offset + i] = (value & 0xff << 8 * (littleEndian ? i : 1 - i)) >>> (littleEndian ? i : 1 - i) * 8;\n  }\n}\n\nBuffer$1.prototype.writeUInt16LE = function writeUInt16LE(value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0);\n  if (Buffer$1.TYPED_ARRAY_SUPPORT) {\n    this[offset] = value & 0xff;\n    this[offset + 1] = value >>> 8;\n  } else {\n    objectWriteUInt16(this, value, offset, true);\n  }\n  return offset + 2;\n};\n\nBuffer$1.prototype.writeUInt16BE = function writeUInt16BE(value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0);\n  if (Buffer$1.TYPED_ARRAY_SUPPORT) {\n    this[offset] = value >>> 8;\n    this[offset + 1] = value & 0xff;\n  } else {\n    objectWriteUInt16(this, value, offset, false);\n  }\n  return offset + 2;\n};\n\nfunction objectWriteUInt32(buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffffffff + value + 1;\n  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; ++i) {\n    buf[offset + i] = value >>> (littleEndian ? i : 3 - i) * 8 & 0xff;\n  }\n}\n\nBuffer$1.prototype.writeUInt32LE = function writeUInt32LE(value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0);\n  if (Buffer$1.TYPED_ARRAY_SUPPORT) {\n    this[offset + 3] = value >>> 24;\n    this[offset + 2] = value >>> 16;\n    this[offset + 1] = value >>> 8;\n    this[offset] = value & 0xff;\n  } else {\n    objectWriteUInt32(this, value, offset, true);\n  }\n  return offset + 4;\n};\n\nBuffer$1.prototype.writeUInt32BE = function writeUInt32BE(value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0);\n  if (Buffer$1.TYPED_ARRAY_SUPPORT) {\n    this[offset] = value >>> 24;\n    this[offset + 1] = value >>> 16;\n    this[offset + 2] = value >>> 8;\n    this[offset + 3] = value & 0xff;\n  } else {\n    objectWriteUInt32(this, value, offset, false);\n  }\n  return offset + 4;\n};\n\nBuffer$1.prototype.writeIntLE = function writeIntLE(value, offset, byteLength, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1);\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit);\n  }\n\n  var i = 0;\n  var mul = 1;\n  var sub = 0;\n  this[offset] = value & 0xFF;\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1;\n    }\n    this[offset + i] = (value / mul >> 0) - sub & 0xFF;\n  }\n\n  return offset + byteLength;\n};\n\nBuffer$1.prototype.writeIntBE = function writeIntBE(value, offset, byteLength, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1);\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit);\n  }\n\n  var i = byteLength - 1;\n  var mul = 1;\n  var sub = 0;\n  this[offset + i] = value & 0xFF;\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1;\n    }\n    this[offset + i] = (value / mul >> 0) - sub & 0xFF;\n  }\n\n  return offset + byteLength;\n};\n\nBuffer$1.prototype.writeInt8 = function writeInt8(value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80);\n  if (!Buffer$1.TYPED_ARRAY_SUPPORT) value = Math.floor(value);\n  if (value < 0) value = 0xff + value + 1;\n  this[offset] = value & 0xff;\n  return offset + 1;\n};\n\nBuffer$1.prototype.writeInt16LE = function writeInt16LE(value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000);\n  if (Buffer$1.TYPED_ARRAY_SUPPORT) {\n    this[offset] = value & 0xff;\n    this[offset + 1] = value >>> 8;\n  } else {\n    objectWriteUInt16(this, value, offset, true);\n  }\n  return offset + 2;\n};\n\nBuffer$1.prototype.writeInt16BE = function writeInt16BE(value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000);\n  if (Buffer$1.TYPED_ARRAY_SUPPORT) {\n    this[offset] = value >>> 8;\n    this[offset + 1] = value & 0xff;\n  } else {\n    objectWriteUInt16(this, value, offset, false);\n  }\n  return offset + 2;\n};\n\nBuffer$1.prototype.writeInt32LE = function writeInt32LE(value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000);\n  if (Buffer$1.TYPED_ARRAY_SUPPORT) {\n    this[offset] = value & 0xff;\n    this[offset + 1] = value >>> 8;\n    this[offset + 2] = value >>> 16;\n    this[offset + 3] = value >>> 24;\n  } else {\n    objectWriteUInt32(this, value, offset, true);\n  }\n  return offset + 4;\n};\n\nBuffer$1.prototype.writeInt32BE = function writeInt32BE(value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000);\n  if (value < 0) value = 0xffffffff + value + 1;\n  if (Buffer$1.TYPED_ARRAY_SUPPORT) {\n    this[offset] = value >>> 24;\n    this[offset + 1] = value >>> 16;\n    this[offset + 2] = value >>> 8;\n    this[offset + 3] = value & 0xff;\n  } else {\n    objectWriteUInt32(this, value, offset, false);\n  }\n  return offset + 4;\n};\n\nfunction checkIEEE754(buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range');\n  if (offset < 0) throw new RangeError('Index out of range');\n}\n\nfunction writeFloat(buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38);\n  }\n  write(buf, value, offset, littleEndian, 23, 4);\n  return offset + 4;\n}\n\nBuffer$1.prototype.writeFloatLE = function writeFloatLE(value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert);\n};\n\nBuffer$1.prototype.writeFloatBE = function writeFloatBE(value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert);\n};\n\nfunction writeDouble(buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308);\n  }\n  write(buf, value, offset, littleEndian, 52, 8);\n  return offset + 8;\n}\n\nBuffer$1.prototype.writeDoubleLE = function writeDoubleLE(value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert);\n};\n\nBuffer$1.prototype.writeDoubleBE = function writeDoubleBE(value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert);\n};\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer$1.prototype.copy = function copy(target, targetStart, start, end) {\n  if (!start) start = 0;\n  if (!end && end !== 0) end = this.length;\n  if (targetStart >= target.length) targetStart = target.length;\n  if (!targetStart) targetStart = 0;\n  if (end > 0 && end < start) end = start;\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0;\n  if (target.length === 0 || this.length === 0) return 0;\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds');\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds');\n  if (end < 0) throw new RangeError('sourceEnd out of bounds');\n\n  // Are we oob?\n  if (end > this.length) end = this.length;\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start;\n  }\n\n  var len = end - start;\n  var i;\n\n  if (this === target && start < targetStart && targetStart < end) {\n    // descending copy from end\n    for (i = len - 1; i >= 0; --i) {\n      target[i + targetStart] = this[i + start];\n    }\n  } else if (len < 1000 || !Buffer$1.TYPED_ARRAY_SUPPORT) {\n    // ascending copy from start\n    for (i = 0; i < len; ++i) {\n      target[i + targetStart] = this[i + start];\n    }\n  } else {\n    Uint8Array.prototype.set.call(target, this.subarray(start, start + len), targetStart);\n  }\n\n  return len;\n};\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer$1.prototype.fill = function fill(val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start;\n      start = 0;\n      end = this.length;\n    } else if (typeof end === 'string') {\n      encoding = end;\n      end = this.length;\n    }\n    if (val.length === 1) {\n      var code = val.charCodeAt(0);\n      if (code < 256) {\n        val = code;\n      }\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string');\n    }\n    if (typeof encoding === 'string' && !Buffer$1.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding);\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255;\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index');\n  }\n\n  if (end <= start) {\n    return this;\n  }\n\n  start = start >>> 0;\n  end = end === undefined ? this.length : end >>> 0;\n\n  if (!val) val = 0;\n\n  var i;\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val;\n    }\n  } else {\n    var bytes = internalIsBuffer(val) ? val : utf8ToBytes(new Buffer$1(val, encoding).toString());\n    var len = bytes.length;\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len];\n    }\n  }\n\n  return this;\n};\n\n// HELPER FUNCTIONS\n// ================\n\nvar INVALID_BASE64_RE = /[^+\\/0-9A-Za-z-_]/g;\n\nfunction base64clean(str) {\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = stringtrim(str).replace(INVALID_BASE64_RE, '');\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return '';\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '=';\n  }\n  return str;\n}\n\nfunction stringtrim(str) {\n  if (str.trim) return str.trim();\n  return str.replace(/^\\s+|\\s+$/g, '');\n}\n\nfunction toHex(n) {\n  if (n < 16) return '0' + n.toString(16);\n  return n.toString(16);\n}\n\nfunction utf8ToBytes(string, units) {\n  units = units || Infinity;\n  var codePoint;\n  var length = string.length;\n  var leadSurrogate = null;\n  var bytes = [];\n\n  for (var i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i);\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD);\n          continue;\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD);\n          continue;\n        }\n\n        // valid lead\n        leadSurrogate = codePoint;\n\n        continue;\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD);\n        leadSurrogate = codePoint;\n        continue;\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000;\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD);\n    }\n\n    leadSurrogate = null;\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break;\n      bytes.push(codePoint);\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break;\n      bytes.push(codePoint >> 0x6 | 0xC0, codePoint & 0x3F | 0x80);\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break;\n      bytes.push(codePoint >> 0xC | 0xE0, codePoint >> 0x6 & 0x3F | 0x80, codePoint & 0x3F | 0x80);\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break;\n      bytes.push(codePoint >> 0x12 | 0xF0, codePoint >> 0xC & 0x3F | 0x80, codePoint >> 0x6 & 0x3F | 0x80, codePoint & 0x3F | 0x80);\n    } else {\n      throw new Error('Invalid code point');\n    }\n  }\n\n  return bytes;\n}\n\nfunction asciiToBytes(str) {\n  var byteArray = [];\n  for (var i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF);\n  }\n  return byteArray;\n}\n\nfunction utf16leToBytes(str, units) {\n  var c, hi, lo;\n  var byteArray = [];\n  for (var i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break;\n\n    c = str.charCodeAt(i);\n    hi = c >> 8;\n    lo = c % 256;\n    byteArray.push(lo);\n    byteArray.push(hi);\n  }\n\n  return byteArray;\n}\n\nfunction base64ToBytes(str) {\n  return toByteArray(base64clean(str));\n}\n\nfunction blitBuffer(src, dst, offset, length) {\n  for (var i = 0; i < length; ++i) {\n    if (i + offset >= dst.length || i >= src.length) break;\n    dst[i + offset] = src[i];\n  }\n  return i;\n}\n\nfunction isnan(val) {\n  return val !== val; // eslint-disable-line no-self-compare\n}\n\n// the following is from is-buffer, also by Feross Aboukhadijeh and with same lisence\n// The _isBuffer check is for Safari 5-7 support, because it's missing\n// Object.prototype.constructor. Remove this eventually\nfunction isBuffer(obj) {\n  return obj != null && (!!obj._isBuffer || isFastBuffer(obj) || isSlowBuffer(obj));\n}\n\nfunction isFastBuffer(obj) {\n  return !!obj.constructor && typeof obj.constructor.isBuffer === 'function' && obj.constructor.isBuffer(obj);\n}\n\n// For Node v0.10 support. Remove this eventually.\nfunction isSlowBuffer(obj) {\n  return typeof obj.readFloatLE === 'function' && typeof obj.slice === 'function' && isFastBuffer(obj.slice(0, 0));\n}\n\nvar bufferEs6 = Object.freeze({\n\tINSPECT_MAX_BYTES: INSPECT_MAX_BYTES,\n\tkMaxLength: _kMaxLength,\n\tBuffer: Buffer$1,\n\tSlowBuffer: SlowBuffer,\n\tisBuffer: isBuffer\n});\n\n/**\n * Module dependencies.\n * @ignore\n */\n\n// Test if we're in Node via presence of \"global\" not absence of \"window\"\n// to support hybrid environments like Electron\nif (typeof commonjsGlobal !== 'undefined') {\n  var Buffer$2 = bufferEs6.Buffer; // TODO just use global Buffer\n}\n\n/**\n * A class representation of the BSON Binary type.\n *\n * Sub types\n *  - **BSON.BSON_BINARY_SUBTYPE_DEFAULT**, default BSON type.\n *  - **BSON.BSON_BINARY_SUBTYPE_FUNCTION**, BSON function type.\n *  - **BSON.BSON_BINARY_SUBTYPE_BYTE_ARRAY**, BSON byte array type.\n *  - **BSON.BSON_BINARY_SUBTYPE_UUID**, BSON uuid type.\n *  - **BSON.BSON_BINARY_SUBTYPE_MD5**, BSON md5 type.\n *  - **BSON.BSON_BINARY_SUBTYPE_USER_DEFINED**, BSON user defined type.\n *\n * @class\n * @param {Buffer} buffer a buffer object containing the binary data.\n * @param {Number} [subType] the option binary type.\n * @return {Binary}\n */\nfunction Binary(buffer, subType) {\n  if (!(this instanceof Binary)) return new Binary(buffer, subType);\n\n  if (buffer != null && !(typeof buffer === 'string') && !Buffer$2.isBuffer(buffer) && !(buffer instanceof Uint8Array) && !Array.isArray(buffer)) {\n    throw new Error('only String, Buffer, Uint8Array or Array accepted');\n  }\n\n  this._bsontype = 'Binary';\n\n  if (buffer instanceof Number) {\n    this.sub_type = buffer;\n    this.position = 0;\n  } else {\n    this.sub_type = subType == null ? BSON_BINARY_SUBTYPE_DEFAULT : subType;\n    this.position = 0;\n  }\n\n  if (buffer != null && !(buffer instanceof Number)) {\n    // Only accept Buffer, Uint8Array or Arrays\n    if (typeof buffer === 'string') {\n      // Different ways of writing the length of the string for the different types\n      if (typeof Buffer$2 !== 'undefined') {\n        this.buffer = new Buffer$2(buffer);\n      } else if (typeof Uint8Array !== 'undefined' || Object.prototype.toString.call(buffer) === '[object Array]') {\n        this.buffer = writeStringToArray(buffer);\n      } else {\n        throw new TypeError('only String, Buffer, Uint8Array or Array accepted');\n      }\n    } else {\n      this.buffer = buffer;\n    }\n    this.position = buffer.length;\n  } else {\n    if (typeof Buffer$2 !== 'undefined') {\n      this.buffer = new Buffer$2(Binary.BUFFER_SIZE);\n    } else if (typeof Uint8Array !== 'undefined') {\n      this.buffer = new Uint8Array(new ArrayBuffer(Binary.BUFFER_SIZE));\n    } else {\n      this.buffer = new Array(Binary.BUFFER_SIZE);\n    }\n    // Set position to start of buffer\n    this.position = 0;\n  }\n}\n\n/**\n * Updates this binary with byte_value.\n *\n * @method\n * @param {string} byte_value a single byte we wish to write.\n */\nBinary.prototype.put = function put(byte_value) {\n  // If it's a string and a has more than one character throw an error\n  if (byte_value['length'] != null && typeof byte_value !== 'number' && byte_value.length !== 1) throw new TypeError('only accepts single character String, Uint8Array or Array');\n  if (typeof byte_value !== 'number' && byte_value < 0 || byte_value > 255) throw new TypeError('only accepts number in a valid unsigned byte range 0-255');\n\n  // Decode the byte value once\n  var decoded_byte = null;\n  if (typeof byte_value === 'string') {\n    decoded_byte = byte_value.charCodeAt(0);\n  } else if (byte_value['length'] != null) {\n    decoded_byte = byte_value[0];\n  } else {\n    decoded_byte = byte_value;\n  }\n\n  if (this.buffer.length > this.position) {\n    this.buffer[this.position++] = decoded_byte;\n  } else {\n    if (typeof Buffer$2 !== 'undefined' && Buffer$2.isBuffer(this.buffer)) {\n      // Create additional overflow buffer\n      var buffer = new Buffer$2(Binary.BUFFER_SIZE + this.buffer.length);\n      // Combine the two buffers together\n      this.buffer.copy(buffer, 0, 0, this.buffer.length);\n      this.buffer = buffer;\n      this.buffer[this.position++] = decoded_byte;\n    } else {\n      buffer = null;\n      // Create a new buffer (typed or normal array)\n      if (Object.prototype.toString.call(this.buffer) === '[object Uint8Array]') {\n        buffer = new Uint8Array(new ArrayBuffer(Binary.BUFFER_SIZE + this.buffer.length));\n      } else {\n        buffer = new Array(Binary.BUFFER_SIZE + this.buffer.length);\n      }\n\n      // We need to copy all the content to the new array\n      for (var i = 0; i < this.buffer.length; i++) {\n        buffer[i] = this.buffer[i];\n      }\n\n      // Reassign the buffer\n      this.buffer = buffer;\n      // Write the byte\n      this.buffer[this.position++] = decoded_byte;\n    }\n  }\n};\n\n/**\n * Writes a buffer or string to the binary.\n *\n * @method\n * @param {(Buffer|string)} string a string or buffer to be written to the Binary BSON object.\n * @param {number} offset specify the binary of where to write the content.\n * @return {null}\n */\nBinary.prototype.write = function write(string, offset) {\n  offset = typeof offset === 'number' ? offset : this.position;\n\n  // If the buffer is to small let's extend the buffer\n  if (this.buffer.length < offset + string.length) {\n    var buffer = null;\n    // If we are in node.js\n    if (typeof Buffer$2 !== 'undefined' && Buffer$2.isBuffer(this.buffer)) {\n      buffer = new Buffer$2(this.buffer.length + string.length);\n      this.buffer.copy(buffer, 0, 0, this.buffer.length);\n    } else if (Object.prototype.toString.call(this.buffer) === '[object Uint8Array]') {\n      // Create a new buffer\n      buffer = new Uint8Array(new ArrayBuffer(this.buffer.length + string.length));\n      // Copy the content\n      for (var i = 0; i < this.position; i++) {\n        buffer[i] = this.buffer[i];\n      }\n    }\n\n    // Assign the new buffer\n    this.buffer = buffer;\n  }\n\n  if (typeof Buffer$2 !== 'undefined' && Buffer$2.isBuffer(string) && Buffer$2.isBuffer(this.buffer)) {\n    string.copy(this.buffer, offset, 0, string.length);\n    this.position = offset + string.length > this.position ? offset + string.length : this.position;\n    // offset = string.length\n  } else if (typeof Buffer$2 !== 'undefined' && typeof string === 'string' && Buffer$2.isBuffer(this.buffer)) {\n    this.buffer.write(string, offset, 'binary');\n    this.position = offset + string.length > this.position ? offset + string.length : this.position;\n    // offset = string.length;\n  } else if (Object.prototype.toString.call(string) === '[object Uint8Array]' || Object.prototype.toString.call(string) === '[object Array]' && typeof string !== 'string') {\n    for (i = 0; i < string.length; i++) {\n      this.buffer[offset++] = string[i];\n    }\n\n    this.position = offset > this.position ? offset : this.position;\n  } else if (typeof string === 'string') {\n    for (i = 0; i < string.length; i++) {\n      this.buffer[offset++] = string.charCodeAt(i);\n    }\n\n    this.position = offset > this.position ? offset : this.position;\n  }\n};\n\n/**\n * Reads **length** bytes starting at **position**.\n *\n * @method\n * @param {number} position read from the given position in the Binary.\n * @param {number} length the number of bytes to read.\n * @return {Buffer}\n */\nBinary.prototype.read = function read(position, length) {\n  length = length && length > 0 ? length : this.position;\n\n  // Let's return the data based on the type we have\n  if (this.buffer['slice']) {\n    return this.buffer.slice(position, position + length);\n  } else {\n    // Create a buffer to keep the result\n    var buffer = typeof Uint8Array !== 'undefined' ? new Uint8Array(new ArrayBuffer(length)) : new Array(length);\n    for (var i = 0; i < length; i++) {\n      buffer[i] = this.buffer[position++];\n    }\n  }\n  // Return the buffer\n  return buffer;\n};\n\n/**\n * Returns the value of this binary as a string.\n *\n * @method\n * @return {string}\n */\nBinary.prototype.value = function value(asRaw) {\n  asRaw = asRaw == null ? false : asRaw;\n\n  // Optimize to serialize for the situation where the data == size of buffer\n  if (asRaw && typeof Buffer$2 !== 'undefined' && Buffer$2.isBuffer(this.buffer) && this.buffer.length === this.position) return this.buffer;\n\n  // If it's a node.js buffer object\n  if (typeof Buffer$2 !== 'undefined' && Buffer$2.isBuffer(this.buffer)) {\n    return asRaw ? this.buffer.slice(0, this.position) : this.buffer.toString('binary', 0, this.position);\n  } else {\n    if (asRaw) {\n      // we support the slice command use it\n      if (this.buffer['slice'] != null) {\n        return this.buffer.slice(0, this.position);\n      } else {\n        // Create a new buffer to copy content to\n        var newBuffer = Object.prototype.toString.call(this.buffer) === '[object Uint8Array]' ? new Uint8Array(new ArrayBuffer(this.position)) : new Array(this.position);\n        // Copy content\n        for (var i = 0; i < this.position; i++) {\n          newBuffer[i] = this.buffer[i];\n        }\n        // Return the buffer\n        return newBuffer;\n      }\n    } else {\n      return convertArraytoUtf8BinaryString(this.buffer, 0, this.position);\n    }\n  }\n};\n\n/**\n * Length.\n *\n * @method\n * @return {number} the length of the binary.\n */\nBinary.prototype.length = function length() {\n  return this.position;\n};\n\n/**\n * @ignore\n */\nBinary.prototype.toJSON = function () {\n  return this.buffer != null ? this.buffer.toString('base64') : '';\n};\n\n/**\n * @ignore\n */\nBinary.prototype.toString = function (format) {\n  return this.buffer != null ? this.buffer.slice(0, this.position).toString(format) : '';\n};\n\n/**\n * Binary default subtype\n * @ignore\n */\nvar BSON_BINARY_SUBTYPE_DEFAULT = 0;\n\n/**\n * @ignore\n */\nvar writeStringToArray = function writeStringToArray(data) {\n  // Create a buffer\n  var buffer = typeof Uint8Array !== 'undefined' ? new Uint8Array(new ArrayBuffer(data.length)) : new Array(data.length);\n  // Write the content to the buffer\n  for (var i = 0; i < data.length; i++) {\n    buffer[i] = data.charCodeAt(i);\n  }\n  // Write the string to the buffer\n  return buffer;\n};\n\n/**\n * Convert Array ot Uint8Array to Binary String\n *\n * @ignore\n */\nvar convertArraytoUtf8BinaryString = function convertArraytoUtf8BinaryString(byteArray, startIndex, endIndex) {\n  var result = '';\n  for (var i = startIndex; i < endIndex; i++) {\n    result = result + String.fromCharCode(byteArray[i]);\n  }\n  return result;\n};\n\nBinary.BUFFER_SIZE = 256;\n\n/**\n * Default BSON type\n *\n * @classconstant SUBTYPE_DEFAULT\n **/\nBinary.SUBTYPE_DEFAULT = 0;\n/**\n * Function BSON type\n *\n * @classconstant SUBTYPE_DEFAULT\n **/\nBinary.SUBTYPE_FUNCTION = 1;\n/**\n * Byte Array BSON type\n *\n * @classconstant SUBTYPE_DEFAULT\n **/\nBinary.SUBTYPE_BYTE_ARRAY = 2;\n/**\n * OLD UUID BSON type\n *\n * @classconstant SUBTYPE_DEFAULT\n **/\nBinary.SUBTYPE_UUID_OLD = 3;\n/**\n * UUID BSON type\n *\n * @classconstant SUBTYPE_DEFAULT\n **/\nBinary.SUBTYPE_UUID = 4;\n/**\n * MD5 BSON type\n *\n * @classconstant SUBTYPE_DEFAULT\n **/\nBinary.SUBTYPE_MD5 = 5;\n/**\n * User BSON type\n *\n * @classconstant SUBTYPE_DEFAULT\n **/\nBinary.SUBTYPE_USER_DEFINED = 128;\n\n/**\n * Expose.\n */\nvar binary = Binary;\nvar Binary_1 = Binary;\nbinary.Binary = Binary_1;\n\nvar Long$1 = long_1.Long,\n    Double$1 = double_1.Double,\n    Timestamp$1 = timestamp.Timestamp,\n    ObjectID$1 = objectid.ObjectID,\n    Code$1 = code.Code,\n    MinKey$1 = min_key.MinKey,\n    MaxKey$1 = max_key.MaxKey,\n    DBRef$1 = db_ref.DBRef,\n    BSONRegExp$1 = regexp.BSONRegExp,\n    Binary$1 = binary.Binary;\n\nvar deserialize = function deserialize(buffer, options, isArray) {\n  options = options == null ? {} : options;\n  var index = options && options.index ? options.index : 0;\n  // Read the document size\n  var size = buffer[index] | buffer[index + 1] << 8 | buffer[index + 2] << 16 | buffer[index + 3] << 24;\n\n  if (size < 5) {\n    throw new Error('bson size must be >= 5, is ' + size);\n  }\n\n  if (options.allowObjectSmallerThanBufferSize && buffer.length < size) {\n    throw new Error('buffer length ' + buffer.length + ' must be >= bson size ' + size);\n  }\n\n  if (!options.allowObjectSmallerThanBufferSize && buffer.length !== size) {\n    throw new Error('buffer length ' + buffer.length + ' must === bson size ' + size);\n  }\n\n  if (size + index > buffer.length) {\n    throw new Error('(bson size ' + size + ' + options.index ' + index + ' must be <= buffer length ' + buffer.length + ')');\n  }\n\n  // Illegal end value\n  if (buffer[index + size - 1] !== 0) {\n    throw new Error(\"One object, sized correctly, with a spot for an EOO, but the EOO isn't 0x00\");\n  }\n\n  // Start deserializtion\n  return deserializeObject(buffer, index, options, isArray);\n};\n\nvar deserializeObject = function deserializeObject(buffer, index, options, isArray) {\n  var evalFunctions = options['evalFunctions'] == null ? false : options['evalFunctions'];\n  var cacheFunctions = options['cacheFunctions'] == null ? false : options['cacheFunctions'];\n  var cacheFunctionsCrc32 = options['cacheFunctionsCrc32'] == null ? false : options['cacheFunctionsCrc32'];\n\n  if (!cacheFunctionsCrc32) var crc32 = null;\n\n  var fieldsAsRaw = options['fieldsAsRaw'] == null ? null : options['fieldsAsRaw'];\n\n  // Return raw bson buffer instead of parsing it\n  var raw = options['raw'] == null ? false : options['raw'];\n\n  // Return BSONRegExp objects instead of native regular expressions\n  var bsonRegExp = typeof options['bsonRegExp'] === 'boolean' ? options['bsonRegExp'] : false;\n\n  // Controls the promotion of values vs wrapper classes\n  var promoteBuffers = options['promoteBuffers'] == null ? false : options['promoteBuffers'];\n  var promoteLongs = options['promoteLongs'] == null ? true : options['promoteLongs'];\n  var promoteValues = options['promoteValues'] == null ? true : options['promoteValues'];\n\n  // Set the start index\n  var startIndex = index;\n\n  // Validate that we have at least 4 bytes of buffer\n  if (buffer.length < 5) throw new Error('corrupt bson message < 5 bytes long');\n\n  // Read the document size\n  var size = buffer[index++] | buffer[index++] << 8 | buffer[index++] << 16 | buffer[index++] << 24;\n\n  // Ensure buffer is valid size\n  if (size < 5 || size > buffer.length) throw new Error('corrupt bson message');\n\n  // Create holding object\n  var object = isArray ? [] : {};\n  // Used for arrays to skip having to perform utf8 decoding\n  var arrayIndex = 0,\n      done = false;\n\n  // While we have more left data left keep parsing\n  while (!done) {\n    // Read the type\n    var elementType = buffer[index++];\n\n    // If we get a zero it's the last byte, exit\n    if (elementType === 0) break;\n\n    // Get the start search index\n    var i = index;\n    // Locate the end of the c string\n    while (buffer[i] !== 0x00 && i < buffer.length) {\n      i++;\n    }\n\n    // If are at the end of the buffer there is a problem with the document\n    if (i >= buffer.length) throw new Error('Bad BSON Document: illegal CString');\n    var name = isArray ? arrayIndex++ : buffer.toString('utf8', index, i);\n\n    index = i + 1;\n\n    if (elementType === BSON.BSON_DATA_STRING) {\n      var stringSize = buffer[index++] | buffer[index++] << 8 | buffer[index++] << 16 | buffer[index++] << 24;\n      if (stringSize <= 0 || stringSize > buffer.length - index || buffer[index + stringSize - 1] !== 0) throw new Error('bad string length in bson');\n\n      var s = buffer.toString('utf8', index, index + stringSize - 1);\n      for (i = 0; i < s.length; i++) {\n        if (s.charCodeAt(i) === 0xfffd) {\n          throw new Error('Invalid UTF-8 string in BSON document');\n        }\n      }\n\n      object[name] = s;\n      index = index + stringSize;\n    } else if (elementType === BSON.BSON_DATA_OID) {\n      var oid = new Buffer(12);\n      buffer.copy(oid, 0, index, index + 12);\n      object[name] = new ObjectID$1(oid);\n      index = index + 12;\n    } else if (elementType === BSON.BSON_DATA_INT && promoteValues === false) {\n      object[name] = new int_32(buffer[index++] | buffer[index++] << 8 | buffer[index++] << 16 | buffer[index++] << 24);\n    } else if (elementType === BSON.BSON_DATA_INT) {\n      object[name] = buffer[index++] | buffer[index++] << 8 | buffer[index++] << 16 | buffer[index++] << 24;\n    } else if (elementType === BSON.BSON_DATA_NUMBER && promoteValues === false) {\n      object[name] = new Double$1(buffer.readDoubleLE(index));\n      index = index + 8;\n    } else if (elementType === BSON.BSON_DATA_NUMBER) {\n      object[name] = buffer.readDoubleLE(index);\n      index = index + 8;\n    } else if (elementType === BSON.BSON_DATA_DATE) {\n      var lowBits = buffer[index++] | buffer[index++] << 8 | buffer[index++] << 16 | buffer[index++] << 24;\n      var highBits = buffer[index++] | buffer[index++] << 8 | buffer[index++] << 16 | buffer[index++] << 24;\n      object[name] = new Date(new Long$1(lowBits, highBits).toNumber());\n    } else if (elementType === BSON.BSON_DATA_BOOLEAN) {\n      if (buffer[index] !== 0 && buffer[index] !== 1) throw new Error('illegal boolean type value');\n      object[name] = buffer[index++] === 1;\n    } else if (elementType === BSON.BSON_DATA_OBJECT) {\n      var _index = index;\n      var objectSize = buffer[index] | buffer[index + 1] << 8 | buffer[index + 2] << 16 | buffer[index + 3] << 24;\n      if (objectSize <= 0 || objectSize > buffer.length - index) throw new Error('bad embedded document length in bson');\n\n      // We have a raw value\n      if (raw) {\n        object[name] = buffer.slice(index, index + objectSize);\n      } else {\n        object[name] = deserializeObject(buffer, _index, options, false);\n      }\n\n      index = index + objectSize;\n    } else if (elementType === BSON.BSON_DATA_ARRAY) {\n      _index = index;\n      objectSize = buffer[index] | buffer[index + 1] << 8 | buffer[index + 2] << 16 | buffer[index + 3] << 24;\n      var arrayOptions = options;\n\n      // Stop index\n      var stopIndex = index + objectSize;\n\n      // All elements of array to be returned as raw bson\n      if (fieldsAsRaw && fieldsAsRaw[name]) {\n        arrayOptions = {};\n        for (var n in options) {\n          arrayOptions[n] = options[n];\n        }arrayOptions['raw'] = true;\n      }\n\n      object[name] = deserializeObject(buffer, _index, arrayOptions, true);\n      index = index + objectSize;\n\n      if (buffer[index - 1] !== 0) throw new Error('invalid array terminator byte');\n      if (index !== stopIndex) throw new Error('corrupted array bson');\n    } else if (elementType === BSON.BSON_DATA_UNDEFINED) {\n      object[name] = undefined;\n    } else if (elementType === BSON.BSON_DATA_NULL) {\n      object[name] = null;\n    } else if (elementType === BSON.BSON_DATA_LONG) {\n      // Unpack the low and high bits\n      lowBits = buffer[index++] | buffer[index++] << 8 | buffer[index++] << 16 | buffer[index++] << 24;\n      highBits = buffer[index++] | buffer[index++] << 8 | buffer[index++] << 16 | buffer[index++] << 24;\n      var long = new Long$1(lowBits, highBits);\n      // Promote the long if possible\n      if (promoteLongs && promoteValues === true) {\n        object[name] = long.lessThanOrEqual(JS_INT_MAX_LONG) && long.greaterThanOrEqual(JS_INT_MIN_LONG) ? long.toNumber() : long;\n      } else {\n        object[name] = long;\n      }\n    } else if (elementType === BSON.BSON_DATA_DECIMAL128) {\n      // Buffer to contain the decimal bytes\n      var bytes = new Buffer(16);\n      // Copy the next 16 bytes into the bytes buffer\n      buffer.copy(bytes, 0, index, index + 16);\n      // Update index\n      index = index + 16;\n      // Assign the new Decimal128 value\n      var decimal128$$1 = new decimal128(bytes);\n      // If we have an alternative mapper use that\n      object[name] = decimal128$$1.toObject ? decimal128$$1.toObject() : decimal128$$1;\n    } else if (elementType === BSON.BSON_DATA_BINARY) {\n      var binarySize = buffer[index++] | buffer[index++] << 8 | buffer[index++] << 16 | buffer[index++] << 24;\n      var totalBinarySize = binarySize;\n      var subType = buffer[index++];\n\n      // Did we have a negative binary size, throw\n      if (binarySize < 0) throw new Error('Negative binary type element size found');\n\n      // Is the length longer than the document\n      if (binarySize > buffer.length) throw new Error('Binary type size larger than document size');\n\n      // Decode as raw Buffer object if options specifies it\n      if (buffer['slice'] != null) {\n        // If we have subtype 2 skip the 4 bytes for the size\n        if (subType === Binary$1.SUBTYPE_BYTE_ARRAY) {\n          binarySize = buffer[index++] | buffer[index++] << 8 | buffer[index++] << 16 | buffer[index++] << 24;\n          if (binarySize < 0) throw new Error('Negative binary type element size found for subtype 0x02');\n          if (binarySize > totalBinarySize - 4) throw new Error('Binary type with subtype 0x02 contains to long binary size');\n          if (binarySize < totalBinarySize - 4) throw new Error('Binary type with subtype 0x02 contains to short binary size');\n        }\n\n        if (promoteBuffers && promoteValues) {\n          object[name] = buffer.slice(index, index + binarySize);\n        } else {\n          object[name] = new Binary$1(buffer.slice(index, index + binarySize), subType);\n        }\n      } else {\n        var _buffer = typeof Uint8Array !== 'undefined' ? new Uint8Array(new ArrayBuffer(binarySize)) : new Array(binarySize);\n        // If we have subtype 2 skip the 4 bytes for the size\n        if (subType === Binary$1.SUBTYPE_BYTE_ARRAY) {\n          binarySize = buffer[index++] | buffer[index++] << 8 | buffer[index++] << 16 | buffer[index++] << 24;\n          if (binarySize < 0) throw new Error('Negative binary type element size found for subtype 0x02');\n          if (binarySize > totalBinarySize - 4) throw new Error('Binary type with subtype 0x02 contains to long binary size');\n          if (binarySize < totalBinarySize - 4) throw new Error('Binary type with subtype 0x02 contains to short binary size');\n        }\n\n        // Copy the data\n        for (i = 0; i < binarySize; i++) {\n          _buffer[i] = buffer[index + i];\n        }\n\n        if (promoteBuffers && promoteValues) {\n          object[name] = _buffer;\n        } else {\n          object[name] = new Binary$1(_buffer, subType);\n        }\n      }\n\n      // Update the index\n      index = index + binarySize;\n    } else if (elementType === BSON.BSON_DATA_REGEXP && bsonRegExp === false) {\n      // Get the start search index\n      i = index;\n      // Locate the end of the c string\n      while (buffer[i] !== 0x00 && i < buffer.length) {\n        i++;\n      }\n      // If are at the end of the buffer there is a problem with the document\n      if (i >= buffer.length) throw new Error('Bad BSON Document: illegal CString');\n      // Return the C string\n      var source = buffer.toString('utf8', index, i);\n      // Create the regexp\n      index = i + 1;\n\n      // Get the start search index\n      i = index;\n      // Locate the end of the c string\n      while (buffer[i] !== 0x00 && i < buffer.length) {\n        i++;\n      }\n      // If are at the end of the buffer there is a problem with the document\n      if (i >= buffer.length) throw new Error('Bad BSON Document: illegal CString');\n      // Return the C string\n      var regExpOptions = buffer.toString('utf8', index, i);\n      index = i + 1;\n\n      // For each option add the corresponding one for javascript\n      var optionsArray = new Array(regExpOptions.length);\n\n      // Parse options\n      for (i = 0; i < regExpOptions.length; i++) {\n        switch (regExpOptions[i]) {\n          case 'm':\n            optionsArray[i] = 'm';\n            break;\n          case 's':\n            optionsArray[i] = 'g';\n            break;\n          case 'i':\n            optionsArray[i] = 'i';\n            break;\n        }\n      }\n\n      object[name] = new RegExp(source, optionsArray.join(''));\n    } else if (elementType === BSON.BSON_DATA_REGEXP && bsonRegExp === true) {\n      // Get the start search index\n      i = index;\n      // Locate the end of the c string\n      while (buffer[i] !== 0x00 && i < buffer.length) {\n        i++;\n      }\n      // If are at the end of the buffer there is a problem with the document\n      if (i >= buffer.length) throw new Error('Bad BSON Document: illegal CString');\n      // Return the C string\n      source = buffer.toString('utf8', index, i);\n      index = i + 1;\n\n      // Get the start search index\n      i = index;\n      // Locate the end of the c string\n      while (buffer[i] !== 0x00 && i < buffer.length) {\n        i++;\n      }\n      // If are at the end of the buffer there is a problem with the document\n      if (i >= buffer.length) throw new Error('Bad BSON Document: illegal CString');\n      // Return the C string\n      regExpOptions = buffer.toString('utf8', index, i);\n      index = i + 1;\n\n      // Set the object\n      object[name] = new BSONRegExp$1(source, regExpOptions);\n    } else if (elementType === BSON.BSON_DATA_SYMBOL) {\n      stringSize = buffer[index++] | buffer[index++] << 8 | buffer[index++] << 16 | buffer[index++] << 24;\n      if (stringSize <= 0 || stringSize > buffer.length - index || buffer[index + stringSize - 1] !== 0) throw new Error('bad string length in bson');\n      // symbol is deprecated - upgrade to string.\n      object[name] = buffer.toString('utf8', index, index + stringSize - 1);\n      index = index + stringSize;\n    } else if (elementType === BSON.BSON_DATA_TIMESTAMP) {\n      lowBits = buffer[index++] | buffer[index++] << 8 | buffer[index++] << 16 | buffer[index++] << 24;\n      highBits = buffer[index++] | buffer[index++] << 8 | buffer[index++] << 16 | buffer[index++] << 24;\n\n      object[name] = new Timestamp$1(lowBits, highBits);\n    } else if (elementType === BSON.BSON_DATA_MIN_KEY) {\n      object[name] = new MinKey$1();\n    } else if (elementType === BSON.BSON_DATA_MAX_KEY) {\n      object[name] = new MaxKey$1();\n    } else if (elementType === BSON.BSON_DATA_CODE) {\n      stringSize = buffer[index++] | buffer[index++] << 8 | buffer[index++] << 16 | buffer[index++] << 24;\n      if (stringSize <= 0 || stringSize > buffer.length - index || buffer[index + stringSize - 1] !== 0) throw new Error('bad string length in bson');\n      var functionString = buffer.toString('utf8', index, index + stringSize - 1);\n\n      // If we are evaluating the functions\n      if (evalFunctions) {\n        // If we have cache enabled let's look for the md5 of the function in the cache\n        if (cacheFunctions) {\n          var hash = cacheFunctionsCrc32 ? crc32(functionString) : functionString;\n          // Got to do this to avoid V8 deoptimizing the call due to finding eval\n          object[name] = isolateEvalWithHash(functionCache, hash, functionString, object);\n        } else {\n          object[name] = isolateEval(functionString);\n        }\n      } else {\n        object[name] = new Code$1(functionString);\n      }\n\n      // Update parse index position\n      index = index + stringSize;\n    } else if (elementType === BSON.BSON_DATA_CODE_W_SCOPE) {\n      var totalSize = buffer[index++] | buffer[index++] << 8 | buffer[index++] << 16 | buffer[index++] << 24;\n\n      // Element cannot be shorter than totalSize + stringSize + documentSize + terminator\n      if (totalSize < 4 + 4 + 4 + 1) {\n        throw new Error('code_w_scope total size shorter minimum expected length');\n      }\n\n      // Get the code string size\n      stringSize = buffer[index++] | buffer[index++] << 8 | buffer[index++] << 16 | buffer[index++] << 24;\n      // Check if we have a valid string\n      if (stringSize <= 0 || stringSize > buffer.length - index || buffer[index + stringSize - 1] !== 0) throw new Error('bad string length in bson');\n\n      // Javascript function\n      functionString = buffer.toString('utf8', index, index + stringSize - 1);\n      // Update parse index position\n      index = index + stringSize;\n      // Parse the element\n      _index = index;\n      // Decode the size of the object document\n      objectSize = buffer[index] | buffer[index + 1] << 8 | buffer[index + 2] << 16 | buffer[index + 3] << 24;\n      // Decode the scope object\n      var scopeObject = deserializeObject(buffer, _index, options, false);\n      // Adjust the index\n      index = index + objectSize;\n\n      // Check if field length is to short\n      if (totalSize < 4 + 4 + objectSize + stringSize) {\n        throw new Error('code_w_scope total size is to short, truncating scope');\n      }\n\n      // Check if totalSize field is to long\n      if (totalSize > 4 + 4 + objectSize + stringSize) {\n        throw new Error('code_w_scope total size is to long, clips outer document');\n      }\n\n      // If we are evaluating the functions\n      if (evalFunctions) {\n        // If we have cache enabled let's look for the md5 of the function in the cache\n        if (cacheFunctions) {\n          hash = cacheFunctionsCrc32 ? crc32(functionString) : functionString;\n          // Got to do this to avoid V8 deoptimizing the call due to finding eval\n          object[name] = isolateEvalWithHash(functionCache, hash, functionString, object);\n        } else {\n          object[name] = isolateEval(functionString);\n        }\n\n        object[name].scope = scopeObject;\n      } else {\n        object[name] = new Code$1(functionString, scopeObject);\n      }\n    } else if (elementType === BSON.BSON_DATA_DBPOINTER) {\n      // Get the code string size\n      stringSize = buffer[index++] | buffer[index++] << 8 | buffer[index++] << 16 | buffer[index++] << 24;\n      // Check if we have a valid string\n      if (stringSize <= 0 || stringSize > buffer.length - index || buffer[index + stringSize - 1] !== 0) throw new Error('bad string length in bson');\n      // Namespace\n      var namespace = buffer.toString('utf8', index, index + stringSize - 1);\n      // Update parse index position\n      index = index + stringSize;\n\n      // Read the oid\n      var oidBuffer = new Buffer(12);\n      buffer.copy(oidBuffer, 0, index, index + 12);\n      oid = new ObjectID$1(oidBuffer);\n\n      // Update the index\n      index = index + 12;\n      for (i = 0; i < namespace.length; i++) {\n        if (namespace.charCodeAt(i) === 0xfffd) {\n          throw new Error('Invalid UTF-8 string in BSON document');\n        }\n      }\n\n      // Upgrade to DBRef type\n      object[name] = new DBRef$1(namespace, oid);\n    } else {\n      throw new Error('Detected unknown BSON type ' + elementType.toString(16) + ' for fieldname \"' + name + '\", are you using the latest BSON parser?');\n    }\n  }\n\n  // Check if the deserialization was against a valid array/object\n  if (size !== index - startIndex) {\n    if (isArray) throw new Error('corrupt array bson');\n    throw new Error('corrupt object bson');\n  }\n\n  // check if object's $ keys are those of a DBRef\n  var dollarKeys = Object.keys(object).filter(function (k) {\n    return k.startsWith('$');\n  });\n  var valid = true;\n  dollarKeys.forEach(function (k) {\n    if (['$ref', '$id', '$db'].indexOf(k) === -1) valid = false;\n  });\n\n  // if a $key not in \"$ref\", \"$id\", \"$db\", don't make a DBRef\n  if (!valid) return object;\n\n  if (object['$id'] != null && object['$ref'] != null) {\n    var copy = Object.assign({}, object);\n    delete copy.$ref;\n    delete copy.$id;\n    delete copy.$db;\n    return new DBRef$1(object.$ref, object.$id, object.$db || null, copy);\n  }\n\n  return object;\n};\n\n/**\n * Ensure eval is isolated.\n *\n * @ignore\n * @api private\n */\nvar isolateEvalWithHash = function isolateEvalWithHash(functionCache, hash, functionString, object) {\n  // Contains the value we are going to set\n  var value = null;\n\n  // Check for cache hit, eval if missing and return cached function\n  if (functionCache[hash] == null) {\n    eval('value = ' + functionString);\n    functionCache[hash] = value;\n  }\n  // Set the object\n  return functionCache[hash].bind(object);\n};\n\n/**\n * Ensure eval is isolated.\n *\n * @ignore\n * @api private\n */\nvar isolateEval = function isolateEval(functionString) {\n  // Contains the value we are going to set\n  var value = null;\n  // Eval the function\n  eval('value = ' + functionString);\n  return value;\n};\n\nvar BSON = {};\n\n/**\n * Contains the function cache if we have that enable to allow for avoiding the eval step on each deserialization, comparison is by md5\n *\n * @ignore\n * @api private\n */\nvar functionCache = BSON.functionCache = {};\n\n/**\n * Number BSON Type\n *\n * @classconstant BSON_DATA_NUMBER\n **/\nBSON.BSON_DATA_NUMBER = 1;\n/**\n * String BSON Type\n *\n * @classconstant BSON_DATA_STRING\n **/\nBSON.BSON_DATA_STRING = 2;\n/**\n * Object BSON Type\n *\n * @classconstant BSON_DATA_OBJECT\n **/\nBSON.BSON_DATA_OBJECT = 3;\n/**\n * Array BSON Type\n *\n * @classconstant BSON_DATA_ARRAY\n **/\nBSON.BSON_DATA_ARRAY = 4;\n/**\n * Binary BSON Type\n *\n * @classconstant BSON_DATA_BINARY\n **/\nBSON.BSON_DATA_BINARY = 5;\n/**\n * Binary BSON Type\n *\n * @classconstant BSON_DATA_UNDEFINED\n **/\nBSON.BSON_DATA_UNDEFINED = 6;\n/**\n * ObjectID BSON Type\n *\n * @classconstant BSON_DATA_OID\n **/\nBSON.BSON_DATA_OID = 7;\n/**\n * Boolean BSON Type\n *\n * @classconstant BSON_DATA_BOOLEAN\n **/\nBSON.BSON_DATA_BOOLEAN = 8;\n/**\n * Date BSON Type\n *\n * @classconstant BSON_DATA_DATE\n **/\nBSON.BSON_DATA_DATE = 9;\n/**\n * null BSON Type\n *\n * @classconstant BSON_DATA_NULL\n **/\nBSON.BSON_DATA_NULL = 10;\n/**\n * RegExp BSON Type\n *\n * @classconstant BSON_DATA_REGEXP\n **/\nBSON.BSON_DATA_REGEXP = 11;\n/**\n * Code BSON Type\n *\n * @classconstant BSON_DATA_DBPOINTER\n **/\nBSON.BSON_DATA_DBPOINTER = 12;\n/**\n * Code BSON Type\n *\n * @classconstant BSON_DATA_CODE\n **/\nBSON.BSON_DATA_CODE = 13;\n/**\n * Symbol BSON Type\n *\n * @classconstant BSON_DATA_SYMBOL\n **/\nBSON.BSON_DATA_SYMBOL = 14;\n/**\n * Code with Scope BSON Type\n *\n * @classconstant BSON_DATA_CODE_W_SCOPE\n **/\nBSON.BSON_DATA_CODE_W_SCOPE = 15;\n/**\n * 32 bit Integer BSON Type\n *\n * @classconstant BSON_DATA_INT\n **/\nBSON.BSON_DATA_INT = 16;\n/**\n * Timestamp BSON Type\n *\n * @classconstant BSON_DATA_TIMESTAMP\n **/\nBSON.BSON_DATA_TIMESTAMP = 17;\n/**\n * Long BSON Type\n *\n * @classconstant BSON_DATA_LONG\n **/\nBSON.BSON_DATA_LONG = 18;\n/**\n * Long BSON Type\n *\n * @classconstant BSON_DATA_DECIMAL128\n **/\nBSON.BSON_DATA_DECIMAL128 = 19;\n/**\n * MinKey BSON Type\n *\n * @classconstant BSON_DATA_MIN_KEY\n **/\nBSON.BSON_DATA_MIN_KEY = 0xff;\n/**\n * MaxKey BSON Type\n *\n * @classconstant BSON_DATA_MAX_KEY\n **/\nBSON.BSON_DATA_MAX_KEY = 0x7f;\n\n/**\n * Binary Default Type\n *\n * @classconstant BSON_BINARY_SUBTYPE_DEFAULT\n **/\nBSON.BSON_BINARY_SUBTYPE_DEFAULT = 0;\n/**\n * Binary Function Type\n *\n * @classconstant BSON_BINARY_SUBTYPE_FUNCTION\n **/\nBSON.BSON_BINARY_SUBTYPE_FUNCTION = 1;\n/**\n * Binary Byte Array Type\n *\n * @classconstant BSON_BINARY_SUBTYPE_BYTE_ARRAY\n **/\nBSON.BSON_BINARY_SUBTYPE_BYTE_ARRAY = 2;\n/**\n * Binary UUID Type\n *\n * @classconstant BSON_BINARY_SUBTYPE_UUID\n **/\nBSON.BSON_BINARY_SUBTYPE_UUID = 3;\n/**\n * Binary MD5 Type\n *\n * @classconstant BSON_BINARY_SUBTYPE_MD5\n **/\nBSON.BSON_BINARY_SUBTYPE_MD5 = 4;\n/**\n * Binary User Defined Type\n *\n * @classconstant BSON_BINARY_SUBTYPE_USER_DEFINED\n **/\nBSON.BSON_BINARY_SUBTYPE_USER_DEFINED = 128;\n\n// BSON MAX VALUES\nBSON.BSON_INT32_MAX = 0x7fffffff;\nBSON.BSON_INT32_MIN = -0x80000000;\n\nBSON.BSON_INT64_MAX = Math.pow(2, 63) - 1;\nBSON.BSON_INT64_MIN = -Math.pow(2, 63);\n\n// JS MAX PRECISE VALUES\nBSON.JS_INT_MAX = 0x20000000000000; // Any integer up to 2^53 can be precisely represented by a double.\nBSON.JS_INT_MIN = -0x20000000000000; // Any integer down to -2^53 can be precisely represented by a double.\n\n// Internal long versions\nvar JS_INT_MAX_LONG = Long$1.fromNumber(0x20000000000000); // Any integer up to 2^53 can be precisely represented by a double.\nvar JS_INT_MIN_LONG = Long$1.fromNumber(-0x20000000000000); // Any integer down to -2^53 can be precisely represented by a double.\n\nvar deserializer = deserialize;\n\n// Copyright (c) 2008, Fair Oaks Labs, Inc.\n// All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without\n// modification, are permitted provided that the following conditions are met:\n//\n//  * Redistributions of source code must retain the above copyright notice,\n//    this list of conditions and the following disclaimer.\n//\n//  * Redistributions in binary form must reproduce the above copyright notice,\n//    this list of conditions and the following disclaimer in the documentation\n//    and/or other materials provided with the distribution.\n//\n//  * Neither the name of Fair Oaks Labs, Inc. nor the names of its contributors\n//    may be used to endorse or promote products derived from this software\n//    without specific prior written permission.\n//\n// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n// AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n// IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n// ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n// LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n// SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n// INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n// CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n// ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n// POSSIBILITY OF SUCH DAMAGE.\n//\n//\n// Modifications to writeIEEE754 to support negative zeroes made by Brian White\n\nvar readIEEE754 = function readIEEE754(buffer, offset, endian, mLen, nBytes) {\n  var e,\n      m,\n      bBE = endian === 'big',\n      eLen = nBytes * 8 - mLen - 1,\n      eMax = (1 << eLen) - 1,\n      eBias = eMax >> 1,\n      nBits = -7,\n      i = bBE ? 0 : nBytes - 1,\n      d = bBE ? 1 : -1,\n      s = buffer[offset + i];\n\n  i += d;\n\n  e = s & (1 << -nBits) - 1;\n  s >>= -nBits;\n  nBits += eLen;\n  for (; nBits > 0; e = e * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & (1 << -nBits) - 1;\n  e >>= -nBits;\n  nBits += mLen;\n  for (; nBits > 0; m = m * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias;\n  } else if (e === eMax) {\n    return m ? NaN : (s ? -1 : 1) * Infinity;\n  } else {\n    m = m + Math.pow(2, mLen);\n    e = e - eBias;\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen);\n};\n\nvar writeIEEE754 = function writeIEEE754(buffer, value, offset, endian, mLen, nBytes) {\n  var e,\n      m,\n      c,\n      bBE = endian === 'big',\n      eLen = nBytes * 8 - mLen - 1,\n      eMax = (1 << eLen) - 1,\n      eBias = eMax >> 1,\n      rt = mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0,\n      i = bBE ? nBytes - 1 : 0,\n      d = bBE ? -1 : 1,\n      s = value < 0 || value === 0 && 1 / value < 0 ? 1 : 0;\n\n  value = Math.abs(value);\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0;\n    e = eMax;\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2);\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--;\n      c *= 2;\n    }\n    if (e + eBias >= 1) {\n      value += rt / c;\n    } else {\n      value += rt * Math.pow(2, 1 - eBias);\n    }\n    if (value * c >= 2) {\n      e++;\n      c /= 2;\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0;\n      e = eMax;\n    } else if (e + eBias >= 1) {\n      m = (value * c - 1) * Math.pow(2, mLen);\n      e = e + eBias;\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen);\n      e = 0;\n    }\n  }\n\n  if (isNaN(value)) m = 0;\n\n  while (mLen >= 8) {\n    buffer[offset + i] = m & 0xff;\n    i += d;\n    m /= 256;\n    mLen -= 8;\n  }\n\n  e = e << mLen | m;\n\n  if (isNaN(value)) e += 8;\n\n  eLen += mLen;\n\n  while (eLen > 0) {\n    buffer[offset + i] = e & 0xff;\n    i += d;\n    e /= 256;\n    eLen -= 8;\n  }\n\n  buffer[offset + i - d] |= s * 128;\n};\n\nvar readIEEE754_1 = readIEEE754;\nvar writeIEEE754_1 = writeIEEE754;\n\nvar float_parser = {\n  readIEEE754: readIEEE754_1,\n  writeIEEE754: writeIEEE754_1\n};\n\n/**\n * Normalizes our expected stringified form of a function across versions of node\n * @param {Function} fn The function to stringify\n */\n\nfunction normalizedFunctionString(fn) {\n  return fn.toString().replace('function(', 'function (');\n}\n\nvar utils = {\n  normalizedFunctionString: normalizedFunctionString\n};\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n  return typeof obj;\n} : function (obj) {\n  return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n};\n\nvar writeIEEE754$1 = float_parser.writeIEEE754,\n    Long$2 = long_1.Long,\n    MinKey$2 = min_key.MinKey,\n    Binary$2 = binary.Binary;\n\nvar normalizedFunctionString$1 = utils.normalizedFunctionString;\n\n// try {\n//   var _Buffer = Uint8Array;\n// } catch (e) {\n//   _Buffer = Buffer;\n// }\n\nvar regexp$1 = /\\x00/; // eslint-disable-line no-control-regex\n\n// To ensure that 0.4 of node works correctly\nvar isDate = function isDate(d) {\n  return (typeof d === 'undefined' ? 'undefined' : _typeof(d)) === 'object' && Object.prototype.toString.call(d) === '[object Date]';\n};\n\nvar isRegExp = function isRegExp(d) {\n  return Object.prototype.toString.call(d) === '[object RegExp]';\n};\n\nvar serializeString = function serializeString(buffer, key, value, index, isArray) {\n  // Encode String type\n  buffer[index++] = BSON$1.BSON_DATA_STRING;\n  // Number of written bytes\n  var numberOfWrittenBytes = !isArray ? buffer.write(key, index, 'utf8') : buffer.write(key, index, 'ascii');\n  // Encode the name\n  index = index + numberOfWrittenBytes + 1;\n  buffer[index - 1] = 0;\n  // Write the string\n  var size = buffer.write(value, index + 4, 'utf8');\n  // Write the size of the string to buffer\n  buffer[index + 3] = size + 1 >> 24 & 0xff;\n  buffer[index + 2] = size + 1 >> 16 & 0xff;\n  buffer[index + 1] = size + 1 >> 8 & 0xff;\n  buffer[index] = size + 1 & 0xff;\n  // Update index\n  index = index + 4 + size;\n  // Write zero\n  buffer[index++] = 0;\n  return index;\n};\n\nvar serializeNumber = function serializeNumber(buffer, key, value, index, isArray) {\n  // We have an integer value\n  if (Math.floor(value) === value && value >= BSON$1.JS_INT_MIN && value <= BSON$1.JS_INT_MAX) {\n    // If the value fits in 32 bits encode as int, if it fits in a double\n    // encode it as a double, otherwise long\n    if (value >= BSON$1.BSON_INT32_MIN && value <= BSON$1.BSON_INT32_MAX) {\n      // Set int type 32 bits or less\n      buffer[index++] = BSON$1.BSON_DATA_INT;\n      // Number of written bytes\n      var numberOfWrittenBytes = !isArray ? buffer.write(key, index, 'utf8') : buffer.write(key, index, 'ascii');\n      // Encode the name\n      index = index + numberOfWrittenBytes;\n      buffer[index++] = 0;\n      // Write the int value\n      buffer[index++] = value & 0xff;\n      buffer[index++] = value >> 8 & 0xff;\n      buffer[index++] = value >> 16 & 0xff;\n      buffer[index++] = value >> 24 & 0xff;\n    } else if (value >= BSON$1.JS_INT_MIN && value <= BSON$1.JS_INT_MAX) {\n      // Encode as double\n      buffer[index++] = BSON$1.BSON_DATA_NUMBER;\n      // Number of written bytes\n      numberOfWrittenBytes = !isArray ? buffer.write(key, index, 'utf8') : buffer.write(key, index, 'ascii');\n      // Encode the name\n      index = index + numberOfWrittenBytes;\n      buffer[index++] = 0;\n      // Write float\n      writeIEEE754$1(buffer, value, index, 'little', 52, 8);\n      // Ajust index\n      index = index + 8;\n    } else {\n      // Set long type\n      buffer[index++] = BSON$1.BSON_DATA_LONG;\n      // Number of written bytes\n      numberOfWrittenBytes = !isArray ? buffer.write(key, index, 'utf8') : buffer.write(key, index, 'ascii');\n      // Encode the name\n      index = index + numberOfWrittenBytes;\n      buffer[index++] = 0;\n      var longVal = Long$2.fromNumber(value);\n      var lowBits = longVal.getLowBits();\n      var highBits = longVal.getHighBits();\n      // Encode low bits\n      buffer[index++] = lowBits & 0xff;\n      buffer[index++] = lowBits >> 8 & 0xff;\n      buffer[index++] = lowBits >> 16 & 0xff;\n      buffer[index++] = lowBits >> 24 & 0xff;\n      // Encode high bits\n      buffer[index++] = highBits & 0xff;\n      buffer[index++] = highBits >> 8 & 0xff;\n      buffer[index++] = highBits >> 16 & 0xff;\n      buffer[index++] = highBits >> 24 & 0xff;\n    }\n  } else {\n    // Encode as double\n    buffer[index++] = BSON$1.BSON_DATA_NUMBER;\n    // Number of written bytes\n    numberOfWrittenBytes = !isArray ? buffer.write(key, index, 'utf8') : buffer.write(key, index, 'ascii');\n    // Encode the name\n    index = index + numberOfWrittenBytes;\n    buffer[index++] = 0;\n    // Write float\n    writeIEEE754$1(buffer, value, index, 'little', 52, 8);\n    // Ajust index\n    index = index + 8;\n  }\n\n  return index;\n};\n\nvar serializeNull = function serializeNull(buffer, key, value, index, isArray) {\n  // Set long type\n  buffer[index++] = BSON$1.BSON_DATA_NULL;\n\n  // Number of written bytes\n  var numberOfWrittenBytes = !isArray ? buffer.write(key, index, 'utf8') : buffer.write(key, index, 'ascii');\n\n  // Encode the name\n  index = index + numberOfWrittenBytes;\n  buffer[index++] = 0;\n  return index;\n};\n\nvar serializeBoolean = function serializeBoolean(buffer, key, value, index, isArray) {\n  // Write the type\n  buffer[index++] = BSON$1.BSON_DATA_BOOLEAN;\n  // Number of written bytes\n  var numberOfWrittenBytes = !isArray ? buffer.write(key, index, 'utf8') : buffer.write(key, index, 'ascii');\n  // Encode the name\n  index = index + numberOfWrittenBytes;\n  buffer[index++] = 0;\n  // Encode the boolean value\n  buffer[index++] = value ? 1 : 0;\n  return index;\n};\n\nvar serializeDate = function serializeDate(buffer, key, value, index, isArray) {\n  // Write the type\n  buffer[index++] = BSON$1.BSON_DATA_DATE;\n  // Number of written bytes\n  var numberOfWrittenBytes = !isArray ? buffer.write(key, index, 'utf8') : buffer.write(key, index, 'ascii');\n  // Encode the name\n  index = index + numberOfWrittenBytes;\n  buffer[index++] = 0;\n\n  // Write the date\n  var dateInMilis = Long$2.fromNumber(value.getTime());\n  var lowBits = dateInMilis.getLowBits();\n  var highBits = dateInMilis.getHighBits();\n  // Encode low bits\n  buffer[index++] = lowBits & 0xff;\n  buffer[index++] = lowBits >> 8 & 0xff;\n  buffer[index++] = lowBits >> 16 & 0xff;\n  buffer[index++] = lowBits >> 24 & 0xff;\n  // Encode high bits\n  buffer[index++] = highBits & 0xff;\n  buffer[index++] = highBits >> 8 & 0xff;\n  buffer[index++] = highBits >> 16 & 0xff;\n  buffer[index++] = highBits >> 24 & 0xff;\n  return index;\n};\n\nvar serializeRegExp = function serializeRegExp(buffer, key, value, index, isArray) {\n  // Write the type\n  buffer[index++] = BSON$1.BSON_DATA_REGEXP;\n  // Number of written bytes\n  var numberOfWrittenBytes = !isArray ? buffer.write(key, index, 'utf8') : buffer.write(key, index, 'ascii');\n\n  // Encode the name\n  index = index + numberOfWrittenBytes;\n  buffer[index++] = 0;\n  if (value.source && value.source.match(regexp$1) != null) {\n    throw Error('value ' + value.source + ' must not contain null bytes');\n  }\n  // Adjust the index\n  index = index + buffer.write(value.source, index, 'utf8');\n  // Write zero\n  buffer[index++] = 0x00;\n  // Write the parameters\n  if (value.ignoreCase) buffer[index++] = 0x69; // i\n  if (value.global) buffer[index++] = 0x73; // s\n  if (value.multiline) buffer[index++] = 0x6d; // m\n\n  // Add ending zero\n  buffer[index++] = 0x00;\n  return index;\n};\n\nvar serializeBSONRegExp = function serializeBSONRegExp(buffer, key, value, index, isArray) {\n  // Write the type\n  buffer[index++] = BSON$1.BSON_DATA_REGEXP;\n  // Number of written bytes\n  var numberOfWrittenBytes = !isArray ? buffer.write(key, index, 'utf8') : buffer.write(key, index, 'ascii');\n  // Encode the name\n  index = index + numberOfWrittenBytes;\n  buffer[index++] = 0;\n\n  // Check the pattern for 0 bytes\n  if (value.pattern.match(regexp$1) != null) {\n    // The BSON spec doesn't allow keys with null bytes because keys are\n    // null-terminated.\n    throw Error('pattern ' + value.pattern + ' must not contain null bytes');\n  }\n\n  // Adjust the index\n  index = index + buffer.write(value.pattern, index, 'utf8');\n  // Write zero\n  buffer[index++] = 0x00;\n  // Write the options\n  index = index + buffer.write(value.options.split('').sort().join(''), index, 'utf8');\n  // Add ending zero\n  buffer[index++] = 0x00;\n  return index;\n};\n\nvar serializeMinMax = function serializeMinMax(buffer, key, value, index, isArray) {\n  // Write the type of either min or max key\n  if (value === null) {\n    buffer[index++] = BSON$1.BSON_DATA_NULL;\n  } else if (value instanceof MinKey$2) {\n    buffer[index++] = BSON$1.BSON_DATA_MIN_KEY;\n  } else {\n    buffer[index++] = BSON$1.BSON_DATA_MAX_KEY;\n  }\n\n  // Number of written bytes\n  var numberOfWrittenBytes = !isArray ? buffer.write(key, index, 'utf8') : buffer.write(key, index, 'ascii');\n  // Encode the name\n  index = index + numberOfWrittenBytes;\n  buffer[index++] = 0;\n  return index;\n};\n\nvar serializeObjectId = function serializeObjectId(buffer, key, value, index, isArray) {\n  // Write the type\n  buffer[index++] = BSON$1.BSON_DATA_OID;\n  // Number of written bytes\n  var numberOfWrittenBytes = !isArray ? buffer.write(key, index, 'utf8') : buffer.write(key, index, 'ascii');\n\n  // Encode the name\n  index = index + numberOfWrittenBytes;\n  buffer[index++] = 0;\n\n  // Write the objectId into the shared buffer\n  if (typeof value.id === 'string') {\n    buffer.write(value.id, index, 'binary');\n  } else if (value.id && value.id.copy) {\n    value.id.copy(buffer, index, 0, 12);\n  } else {\n    throw new TypeError('object [' + JSON.stringify(value) + '] is not a valid ObjectId');\n  }\n\n  // Ajust index\n  return index + 12;\n};\n\nvar serializeBuffer = function serializeBuffer(buffer, key, value, index, isArray) {\n  // Write the type\n  buffer[index++] = BSON$1.BSON_DATA_BINARY;\n  // Number of written bytes\n  var numberOfWrittenBytes = !isArray ? buffer.write(key, index, 'utf8') : buffer.write(key, index, 'ascii');\n  // Encode the name\n  index = index + numberOfWrittenBytes;\n  buffer[index++] = 0;\n  // Get size of the buffer (current write point)\n  var size = value.length;\n  // Write the size of the string to buffer\n  buffer[index++] = size & 0xff;\n  buffer[index++] = size >> 8 & 0xff;\n  buffer[index++] = size >> 16 & 0xff;\n  buffer[index++] = size >> 24 & 0xff;\n  // Write the default subtype\n  buffer[index++] = BSON$1.BSON_BINARY_SUBTYPE_DEFAULT;\n  // Copy the content form the binary field to the buffer\n  value.copy(buffer, index, 0, size);\n  // Adjust the index\n  index = index + size;\n  return index;\n};\n\nvar serializeObject = function serializeObject(buffer, key, value, index, checkKeys, depth, serializeFunctions, ignoreUndefined, isArray, path) {\n  for (var i = 0; i < path.length; i++) {\n    if (path[i] === value) throw new Error('cyclic dependency detected');\n  }\n\n  // Push value to stack\n  path.push(value);\n  // Write the type\n  buffer[index++] = Array.isArray(value) ? BSON$1.BSON_DATA_ARRAY : BSON$1.BSON_DATA_OBJECT;\n  // Number of written bytes\n  var numberOfWrittenBytes = !isArray ? buffer.write(key, index, 'utf8') : buffer.write(key, index, 'ascii');\n  // Encode the name\n  index = index + numberOfWrittenBytes;\n  buffer[index++] = 0;\n  var endIndex = serializeInto(buffer, value, checkKeys, index, depth + 1, serializeFunctions, ignoreUndefined, path);\n  // Pop stack\n  path.pop();\n  return endIndex;\n};\n\nvar serializeDecimal128 = function serializeDecimal128(buffer, key, value, index, isArray) {\n  buffer[index++] = BSON$1.BSON_DATA_DECIMAL128;\n  // Number of written bytes\n  var numberOfWrittenBytes = !isArray ? buffer.write(key, index, 'utf8') : buffer.write(key, index, 'ascii');\n  // Encode the name\n  index = index + numberOfWrittenBytes;\n  buffer[index++] = 0;\n  // Write the data from the value\n  value.bytes.copy(buffer, index, 0, 16);\n  return index + 16;\n};\n\nvar serializeLong = function serializeLong(buffer, key, value, index, isArray) {\n  // Write the type\n  buffer[index++] = value._bsontype === 'Long' ? BSON$1.BSON_DATA_LONG : BSON$1.BSON_DATA_TIMESTAMP;\n  // Number of written bytes\n  var numberOfWrittenBytes = !isArray ? buffer.write(key, index, 'utf8') : buffer.write(key, index, 'ascii');\n  // Encode the name\n  index = index + numberOfWrittenBytes;\n  buffer[index++] = 0;\n  // Write the date\n  var lowBits = value.getLowBits();\n  var highBits = value.getHighBits();\n  // Encode low bits\n  buffer[index++] = lowBits & 0xff;\n  buffer[index++] = lowBits >> 8 & 0xff;\n  buffer[index++] = lowBits >> 16 & 0xff;\n  buffer[index++] = lowBits >> 24 & 0xff;\n  // Encode high bits\n  buffer[index++] = highBits & 0xff;\n  buffer[index++] = highBits >> 8 & 0xff;\n  buffer[index++] = highBits >> 16 & 0xff;\n  buffer[index++] = highBits >> 24 & 0xff;\n  return index;\n};\n\nvar serializeInt32 = function serializeInt32(buffer, key, value, index, isArray) {\n  // Set int type 32 bits or less\n  buffer[index++] = BSON$1.BSON_DATA_INT;\n  // Number of written bytes\n  var numberOfWrittenBytes = !isArray ? buffer.write(key, index, 'utf8') : buffer.write(key, index, 'ascii');\n  // Encode the name\n  index = index + numberOfWrittenBytes;\n  buffer[index++] = 0;\n  // Write the int value\n  buffer[index++] = value & 0xff;\n  buffer[index++] = value >> 8 & 0xff;\n  buffer[index++] = value >> 16 & 0xff;\n  buffer[index++] = value >> 24 & 0xff;\n  return index;\n};\n\nvar serializeDouble = function serializeDouble(buffer, key, value, index, isArray) {\n  // Encode as double\n  buffer[index++] = BSON$1.BSON_DATA_NUMBER;\n\n  // Number of written bytes\n  var numberOfWrittenBytes = !isArray ? buffer.write(key, index, 'utf8') : buffer.write(key, index, 'ascii');\n\n  // Encode the name\n  index = index + numberOfWrittenBytes;\n  buffer[index++] = 0;\n\n  // Write float\n  writeIEEE754$1(buffer, value.value, index, 'little', 52, 8);\n\n  // Adjust index\n  index = index + 8;\n  return index;\n};\n\nvar serializeFunction = function serializeFunction(buffer, key, value, index, checkKeys, depth, isArray) {\n  buffer[index++] = BSON$1.BSON_DATA_CODE;\n  // Number of written bytes\n  var numberOfWrittenBytes = !isArray ? buffer.write(key, index, 'utf8') : buffer.write(key, index, 'ascii');\n  // Encode the name\n  index = index + numberOfWrittenBytes;\n  buffer[index++] = 0;\n  // Function string\n  var functionString = normalizedFunctionString$1(value);\n\n  // Write the string\n  var size = buffer.write(functionString, index + 4, 'utf8') + 1;\n  // Write the size of the string to buffer\n  buffer[index] = size & 0xff;\n  buffer[index + 1] = size >> 8 & 0xff;\n  buffer[index + 2] = size >> 16 & 0xff;\n  buffer[index + 3] = size >> 24 & 0xff;\n  // Update index\n  index = index + 4 + size - 1;\n  // Write zero\n  buffer[index++] = 0;\n  return index;\n};\n\nvar serializeCode = function serializeCode(buffer, key, value, index, checkKeys, depth, serializeFunctions, ignoreUndefined, isArray) {\n  if (value.scope && _typeof(value.scope) === 'object') {\n    // Write the type\n    buffer[index++] = BSON$1.BSON_DATA_CODE_W_SCOPE;\n    // Number of written bytes\n    var numberOfWrittenBytes = !isArray ? buffer.write(key, index, 'utf8') : buffer.write(key, index, 'ascii');\n    // Encode the name\n    index = index + numberOfWrittenBytes;\n    buffer[index++] = 0;\n\n    // Starting index\n    var startIndex = index;\n\n    // Serialize the function\n    // Get the function string\n    var functionString = typeof value.code === 'string' ? value.code : value.code.toString();\n    // Index adjustment\n    index = index + 4;\n    // Write string into buffer\n    var codeSize = buffer.write(functionString, index + 4, 'utf8') + 1;\n    // Write the size of the string to buffer\n    buffer[index] = codeSize & 0xff;\n    buffer[index + 1] = codeSize >> 8 & 0xff;\n    buffer[index + 2] = codeSize >> 16 & 0xff;\n    buffer[index + 3] = codeSize >> 24 & 0xff;\n    // Write end 0\n    buffer[index + 4 + codeSize - 1] = 0;\n    // Write the\n    index = index + codeSize + 4;\n\n    //\n    // Serialize the scope value\n    var endIndex = serializeInto(buffer, value.scope, checkKeys, index, depth + 1, serializeFunctions, ignoreUndefined);\n    index = endIndex - 1;\n\n    // Writ the total\n    var totalSize = endIndex - startIndex;\n\n    // Write the total size of the object\n    buffer[startIndex++] = totalSize & 0xff;\n    buffer[startIndex++] = totalSize >> 8 & 0xff;\n    buffer[startIndex++] = totalSize >> 16 & 0xff;\n    buffer[startIndex++] = totalSize >> 24 & 0xff;\n    // Write trailing zero\n    buffer[index++] = 0;\n  } else {\n    buffer[index++] = BSON$1.BSON_DATA_CODE;\n    // Number of written bytes\n    numberOfWrittenBytes = !isArray ? buffer.write(key, index, 'utf8') : buffer.write(key, index, 'ascii');\n    // Encode the name\n    index = index + numberOfWrittenBytes;\n    buffer[index++] = 0;\n    // Function string\n    functionString = value.code.toString();\n    // Write the string\n    var size = buffer.write(functionString, index + 4, 'utf8') + 1;\n    // Write the size of the string to buffer\n    buffer[index] = size & 0xff;\n    buffer[index + 1] = size >> 8 & 0xff;\n    buffer[index + 2] = size >> 16 & 0xff;\n    buffer[index + 3] = size >> 24 & 0xff;\n    // Update index\n    index = index + 4 + size - 1;\n    // Write zero\n    buffer[index++] = 0;\n  }\n\n  return index;\n};\n\nvar serializeBinary = function serializeBinary(buffer, key, value, index, isArray) {\n  // Write the type\n  buffer[index++] = BSON$1.BSON_DATA_BINARY;\n  // Number of written bytes\n  var numberOfWrittenBytes = !isArray ? buffer.write(key, index, 'utf8') : buffer.write(key, index, 'ascii');\n  // Encode the name\n  index = index + numberOfWrittenBytes;\n  buffer[index++] = 0;\n  // Extract the buffer\n  var data = value.value(true);\n  // Calculate size\n  var size = value.position;\n  // Add the deprecated 02 type 4 bytes of size to total\n  if (value.sub_type === Binary$2.SUBTYPE_BYTE_ARRAY) size = size + 4;\n  // Write the size of the string to buffer\n  buffer[index++] = size & 0xff;\n  buffer[index++] = size >> 8 & 0xff;\n  buffer[index++] = size >> 16 & 0xff;\n  buffer[index++] = size >> 24 & 0xff;\n  // Write the subtype to the buffer\n  buffer[index++] = value.sub_type;\n\n  // If we have binary type 2 the 4 first bytes are the size\n  if (value.sub_type === Binary$2.SUBTYPE_BYTE_ARRAY) {\n    size = size - 4;\n    buffer[index++] = size & 0xff;\n    buffer[index++] = size >> 8 & 0xff;\n    buffer[index++] = size >> 16 & 0xff;\n    buffer[index++] = size >> 24 & 0xff;\n  }\n\n  // Write the data to the object\n  data.copy(buffer, index, 0, value.position);\n  // Adjust the index\n  index = index + value.position;\n  return index;\n};\n\nvar serializeSymbol = function serializeSymbol(buffer, key, value, index, isArray) {\n  // Write the type\n  buffer[index++] = BSON$1.BSON_DATA_SYMBOL;\n  // Number of written bytes\n  var numberOfWrittenBytes = !isArray ? buffer.write(key, index, 'utf8') : buffer.write(key, index, 'ascii');\n  // Encode the name\n  index = index + numberOfWrittenBytes;\n  buffer[index++] = 0;\n  // Write the string\n  var size = buffer.write(value.value, index + 4, 'utf8') + 1;\n  // Write the size of the string to buffer\n  buffer[index] = size & 0xff;\n  buffer[index + 1] = size >> 8 & 0xff;\n  buffer[index + 2] = size >> 16 & 0xff;\n  buffer[index + 3] = size >> 24 & 0xff;\n  // Update index\n  index = index + 4 + size - 1;\n  // Write zero\n  buffer[index++] = 0x00;\n  return index;\n};\n\nvar serializeDBRef = function serializeDBRef(buffer, key, value, index, depth, serializeFunctions, isArray) {\n  // Write the type\n  buffer[index++] = BSON$1.BSON_DATA_OBJECT;\n  // Number of written bytes\n  var numberOfWrittenBytes = !isArray ? buffer.write(key, index, 'utf8') : buffer.write(key, index, 'ascii');\n\n  // Encode the name\n  index = index + numberOfWrittenBytes;\n  buffer[index++] = 0;\n\n  var startIndex = index;\n  var endIndex;\n  var output = {\n    $ref: value.collection,\n    $id: value.oid\n  };\n\n  if (value.db != null) output.$db = value.db;\n\n  output = Object.assign(output, value.fields);\n  endIndex = serializeInto(buffer, output, false, index, depth + 1, serializeFunctions);\n\n  // Calculate object size\n  var size = endIndex - startIndex;\n  // Write the size\n  buffer[startIndex++] = size & 0xff;\n  buffer[startIndex++] = size >> 8 & 0xff;\n  buffer[startIndex++] = size >> 16 & 0xff;\n  buffer[startIndex++] = size >> 24 & 0xff;\n  // Set index\n  return endIndex;\n};\n\nvar serializeInto = function serializeInto(buffer, object, checkKeys, startingIndex, depth, serializeFunctions, ignoreUndefined, path) {\n  startingIndex = startingIndex || 0;\n  path = path || [];\n\n  // Push the object to the path\n  path.push(object);\n\n  // Start place to serialize into\n  var index = startingIndex + 4;\n\n  // Special case isArray\n  if (Array.isArray(object)) {\n    // Get object keys\n    for (var i = 0; i < object.length; i++) {\n      var key = '' + i;\n      var value = object[i];\n\n      // Is there an override value\n      if (value && value.toBSON) {\n        if (typeof value.toBSON !== 'function') throw new TypeError('toBSON is not a function');\n        value = value.toBSON();\n      }\n\n      var type = typeof value === 'undefined' ? 'undefined' : _typeof(value);\n      if (type === 'string') {\n        index = serializeString(buffer, key, value, index, true);\n      } else if (type === 'number') {\n        index = serializeNumber(buffer, key, value, index, true);\n      } else if (type === 'boolean') {\n        index = serializeBoolean(buffer, key, value, index, true);\n      } else if (value instanceof Date || isDate(value)) {\n        index = serializeDate(buffer, key, value, index, true);\n      } else if (value === undefined) {\n        index = serializeNull(buffer, key, value, index, true);\n      } else if (value === null) {\n        index = serializeNull(buffer, key, value, index, true);\n      } else if (value['_bsontype'] === 'ObjectID') {\n        index = serializeObjectId(buffer, key, value, index, true);\n      } else if (Buffer.isBuffer(value)) {\n        index = serializeBuffer(buffer, key, value, index, true);\n      } else if (value instanceof RegExp || isRegExp(value)) {\n        index = serializeRegExp(buffer, key, value, index, true);\n      } else if (type === 'object' && value['_bsontype'] == null) {\n        index = serializeObject(buffer, key, value, index, checkKeys, depth, serializeFunctions, ignoreUndefined, true, path);\n      } else if (type === 'object' && value['_bsontype'] === 'Decimal128') {\n        index = serializeDecimal128(buffer, key, value, index, true);\n      } else if (value['_bsontype'] === 'Long' || value['_bsontype'] === 'Timestamp') {\n        index = serializeLong(buffer, key, value, index, true);\n      } else if (value['_bsontype'] === 'Double') {\n        index = serializeDouble(buffer, key, value, index, true);\n      } else if (typeof value === 'function' && serializeFunctions) {\n        index = serializeFunction(buffer, key, value, index, checkKeys, depth, serializeFunctions, true);\n      } else if (value['_bsontype'] === 'Code') {\n        index = serializeCode(buffer, key, value, index, checkKeys, depth, serializeFunctions, ignoreUndefined, true);\n      } else if (value['_bsontype'] === 'Binary') {\n        index = serializeBinary(buffer, key, value, index, true);\n      } else if (value['_bsontype'] === 'Symbol') {\n        index = serializeSymbol(buffer, key, value, index, true);\n      } else if (value['_bsontype'] === 'DBRef') {\n        index = serializeDBRef(buffer, key, value, index, depth, serializeFunctions, true);\n      } else if (value['_bsontype'] === 'BSONRegExp') {\n        index = serializeBSONRegExp(buffer, key, value, index, true);\n      } else if (value['_bsontype'] === 'Int32') {\n        index = serializeInt32(buffer, key, value, index, true);\n      } else if (value['_bsontype'] === 'MinKey' || value['_bsontype'] === 'MaxKey') {\n        index = serializeMinMax(buffer, key, value, index, true);\n      }\n    }\n  } else if (object instanceof map) {\n    var iterator = object.entries();\n    var done = false;\n\n    while (!done) {\n      // Unpack the next entry\n      var entry = iterator.next();\n      done = entry.done;\n      // Are we done, then skip and terminate\n      if (done) continue;\n\n      // Get the entry values\n      key = entry.value[0];\n      value = entry.value[1];\n\n      // Check the type of the value\n      type = typeof value === 'undefined' ? 'undefined' : _typeof(value);\n\n      // Check the key and throw error if it's illegal\n      if (key !== '$db' && key !== '$ref' && key !== '$id') {\n        if (key.match(regexp$1) != null) {\n          // The BSON spec doesn't allow keys with null bytes because keys are\n          // null-terminated.\n          throw Error('key ' + key + ' must not contain null bytes');\n        }\n\n        if (checkKeys) {\n          if ('$' === key[0]) {\n            throw Error('key ' + key + \" must not start with '$'\");\n          } else if (~key.indexOf('.')) {\n            throw Error('key ' + key + \" must not contain '.'\");\n          }\n        }\n      }\n\n      if (type === 'string') {\n        index = serializeString(buffer, key, value, index);\n      } else if (type === 'number') {\n        index = serializeNumber(buffer, key, value, index);\n      } else if (type === 'boolean') {\n        index = serializeBoolean(buffer, key, value, index);\n      } else if (value instanceof Date || isDate(value)) {\n        index = serializeDate(buffer, key, value, index);\n      } else if (value === null || value === undefined && ignoreUndefined === false) {\n        index = serializeNull(buffer, key, value, index);\n      } else if (value['_bsontype'] === 'ObjectID') {\n        index = serializeObjectId(buffer, key, value, index);\n      } else if (Buffer.isBuffer(value)) {\n        index = serializeBuffer(buffer, key, value, index);\n      } else if (value instanceof RegExp || isRegExp(value)) {\n        index = serializeRegExp(buffer, key, value, index);\n      } else if (type === 'object' && value['_bsontype'] == null) {\n        index = serializeObject(buffer, key, value, index, checkKeys, depth, serializeFunctions, ignoreUndefined, false, path);\n      } else if (type === 'object' && value['_bsontype'] === 'Decimal128') {\n        index = serializeDecimal128(buffer, key, value, index);\n      } else if (value['_bsontype'] === 'Long' || value['_bsontype'] === 'Timestamp') {\n        index = serializeLong(buffer, key, value, index);\n      } else if (value['_bsontype'] === 'Double') {\n        index = serializeDouble(buffer, key, value, index);\n      } else if (value['_bsontype'] === 'Code') {\n        index = serializeCode(buffer, key, value, index, checkKeys, depth, serializeFunctions, ignoreUndefined);\n      } else if (typeof value === 'function' && serializeFunctions) {\n        index = serializeFunction(buffer, key, value, index, checkKeys, depth, serializeFunctions);\n      } else if (value['_bsontype'] === 'Binary') {\n        index = serializeBinary(buffer, key, value, index);\n      } else if (value['_bsontype'] === 'Symbol') {\n        index = serializeSymbol(buffer, key, value, index);\n      } else if (value['_bsontype'] === 'DBRef') {\n        index = serializeDBRef(buffer, key, value, index, depth, serializeFunctions);\n      } else if (value['_bsontype'] === 'BSONRegExp') {\n        index = serializeBSONRegExp(buffer, key, value, index);\n      } else if (value['_bsontype'] === 'Int32') {\n        index = serializeInt32(buffer, key, value, index);\n      } else if (value['_bsontype'] === 'MinKey' || value['_bsontype'] === 'MaxKey') {\n        index = serializeMinMax(buffer, key, value, index);\n      }\n    }\n  } else {\n    // Did we provide a custom serialization method\n    if (object.toBSON) {\n      if (typeof object.toBSON !== 'function') throw new TypeError('toBSON is not a function');\n      object = object.toBSON();\n      if (object != null && (typeof object === 'undefined' ? 'undefined' : _typeof(object)) !== 'object') throw new TypeError('toBSON function did not return an object');\n    }\n\n    // Iterate over all the keys\n    for (key in object) {\n      value = object[key];\n      // Is there an override value\n      if (value && value.toBSON) {\n        if (typeof value.toBSON !== 'function') throw new TypeError('toBSON is not a function');\n        value = value.toBSON();\n      }\n\n      // Check the type of the value\n      type = typeof value === 'undefined' ? 'undefined' : _typeof(value);\n\n      // Check the key and throw error if it's illegal\n      if (key !== '$db' && key !== '$ref' && key !== '$id') {\n        if (key.match(regexp$1) != null) {\n          // The BSON spec doesn't allow keys with null bytes because keys are\n          // null-terminated.\n          throw Error('key ' + key + ' must not contain null bytes');\n        }\n\n        if (checkKeys) {\n          if ('$' === key[0]) {\n            throw Error('key ' + key + \" must not start with '$'\");\n          } else if (~key.indexOf('.')) {\n            throw Error('key ' + key + \" must not contain '.'\");\n          }\n        }\n      }\n\n      if (type === 'string') {\n        index = serializeString(buffer, key, value, index);\n      } else if (type === 'number') {\n        index = serializeNumber(buffer, key, value, index);\n      } else if (type === 'boolean') {\n        index = serializeBoolean(buffer, key, value, index);\n      } else if (value instanceof Date || isDate(value)) {\n        index = serializeDate(buffer, key, value, index);\n      } else if (value === undefined) {\n        if (ignoreUndefined === false) index = serializeNull(buffer, key, value, index);\n      } else if (value === null) {\n        index = serializeNull(buffer, key, value, index);\n      } else if (value['_bsontype'] === 'ObjectID') {\n        index = serializeObjectId(buffer, key, value, index);\n      } else if (Buffer.isBuffer(value)) {\n        index = serializeBuffer(buffer, key, value, index);\n      } else if (value instanceof RegExp || isRegExp(value)) {\n        index = serializeRegExp(buffer, key, value, index);\n      } else if (type === 'object' && value['_bsontype'] == null) {\n        index = serializeObject(buffer, key, value, index, checkKeys, depth, serializeFunctions, ignoreUndefined, false, path);\n      } else if (type === 'object' && value['_bsontype'] === 'Decimal128') {\n        index = serializeDecimal128(buffer, key, value, index);\n      } else if (value['_bsontype'] === 'Long' || value['_bsontype'] === 'Timestamp') {\n        index = serializeLong(buffer, key, value, index);\n      } else if (value['_bsontype'] === 'Double') {\n        index = serializeDouble(buffer, key, value, index);\n      } else if (value['_bsontype'] === 'Code') {\n        index = serializeCode(buffer, key, value, index, checkKeys, depth, serializeFunctions, ignoreUndefined);\n      } else if (typeof value === 'function' && serializeFunctions) {\n        index = serializeFunction(buffer, key, value, index, checkKeys, depth, serializeFunctions);\n      } else if (value['_bsontype'] === 'Binary') {\n        index = serializeBinary(buffer, key, value, index);\n      } else if (value['_bsontype'] === 'Symbol') {\n        index = serializeSymbol(buffer, key, value, index);\n      } else if (value['_bsontype'] === 'DBRef') {\n        index = serializeDBRef(buffer, key, value, index, depth, serializeFunctions);\n      } else if (value['_bsontype'] === 'BSONRegExp') {\n        index = serializeBSONRegExp(buffer, key, value, index);\n      } else if (value['_bsontype'] === 'Int32') {\n        index = serializeInt32(buffer, key, value, index);\n      } else if (value['_bsontype'] === 'MinKey' || value['_bsontype'] === 'MaxKey') {\n        index = serializeMinMax(buffer, key, value, index);\n      }\n    }\n  }\n\n  // Remove the path\n  path.pop();\n\n  // Final padding byte for object\n  buffer[index++] = 0x00;\n\n  // Final size\n  var size = index - startingIndex;\n  // Write the size of the object\n  buffer[startingIndex++] = size & 0xff;\n  buffer[startingIndex++] = size >> 8 & 0xff;\n  buffer[startingIndex++] = size >> 16 & 0xff;\n  buffer[startingIndex++] = size >> 24 & 0xff;\n  return index;\n};\n\nvar BSON$1 = {};\n\n/**\n * Contains the function cache if we have that enable to allow for avoiding the eval step on each deserialization, comparison is by md5\n *\n * @ignore\n * @api private\n */\n// var functionCache = (BSON.functionCache = {});\n\n/**\n * Number BSON Type\n *\n * @classconstant BSON_DATA_NUMBER\n **/\nBSON$1.BSON_DATA_NUMBER = 1;\n/**\n * String BSON Type\n *\n * @classconstant BSON_DATA_STRING\n **/\nBSON$1.BSON_DATA_STRING = 2;\n/**\n * Object BSON Type\n *\n * @classconstant BSON_DATA_OBJECT\n **/\nBSON$1.BSON_DATA_OBJECT = 3;\n/**\n * Array BSON Type\n *\n * @classconstant BSON_DATA_ARRAY\n **/\nBSON$1.BSON_DATA_ARRAY = 4;\n/**\n * Binary BSON Type\n *\n * @classconstant BSON_DATA_BINARY\n **/\nBSON$1.BSON_DATA_BINARY = 5;\n/**\n * ObjectID BSON Type, deprecated\n *\n * @classconstant BSON_DATA_UNDEFINED\n **/\nBSON$1.BSON_DATA_UNDEFINED = 6;\n/**\n * ObjectID BSON Type\n *\n * @classconstant BSON_DATA_OID\n **/\nBSON$1.BSON_DATA_OID = 7;\n/**\n * Boolean BSON Type\n *\n * @classconstant BSON_DATA_BOOLEAN\n **/\nBSON$1.BSON_DATA_BOOLEAN = 8;\n/**\n * Date BSON Type\n *\n * @classconstant BSON_DATA_DATE\n **/\nBSON$1.BSON_DATA_DATE = 9;\n/**\n * null BSON Type\n *\n * @classconstant BSON_DATA_NULL\n **/\nBSON$1.BSON_DATA_NULL = 10;\n/**\n * RegExp BSON Type\n *\n * @classconstant BSON_DATA_REGEXP\n **/\nBSON$1.BSON_DATA_REGEXP = 11;\n/**\n * Code BSON Type\n *\n * @classconstant BSON_DATA_CODE\n **/\nBSON$1.BSON_DATA_CODE = 13;\n/**\n * Symbol BSON Type\n *\n * @classconstant BSON_DATA_SYMBOL\n **/\nBSON$1.BSON_DATA_SYMBOL = 14;\n/**\n * Code with Scope BSON Type\n *\n * @classconstant BSON_DATA_CODE_W_SCOPE\n **/\nBSON$1.BSON_DATA_CODE_W_SCOPE = 15;\n/**\n * 32 bit Integer BSON Type\n *\n * @classconstant BSON_DATA_INT\n **/\nBSON$1.BSON_DATA_INT = 16;\n/**\n * Timestamp BSON Type\n *\n * @classconstant BSON_DATA_TIMESTAMP\n **/\nBSON$1.BSON_DATA_TIMESTAMP = 17;\n/**\n * Long BSON Type\n *\n * @classconstant BSON_DATA_LONG\n **/\nBSON$1.BSON_DATA_LONG = 18;\n/**\n * Long BSON Type\n *\n * @classconstant BSON_DATA_DECIMAL128\n **/\nBSON$1.BSON_DATA_DECIMAL128 = 19;\n/**\n * MinKey BSON Type\n *\n * @classconstant BSON_DATA_MIN_KEY\n **/\nBSON$1.BSON_DATA_MIN_KEY = 0xff;\n/**\n * MaxKey BSON Type\n *\n * @classconstant BSON_DATA_MAX_KEY\n **/\nBSON$1.BSON_DATA_MAX_KEY = 0x7f;\n/**\n * Binary Default Type\n *\n * @classconstant BSON_BINARY_SUBTYPE_DEFAULT\n **/\nBSON$1.BSON_BINARY_SUBTYPE_DEFAULT = 0;\n/**\n * Binary Function Type\n *\n * @classconstant BSON_BINARY_SUBTYPE_FUNCTION\n **/\nBSON$1.BSON_BINARY_SUBTYPE_FUNCTION = 1;\n/**\n * Binary Byte Array Type\n *\n * @classconstant BSON_BINARY_SUBTYPE_BYTE_ARRAY\n **/\nBSON$1.BSON_BINARY_SUBTYPE_BYTE_ARRAY = 2;\n/**\n * Binary UUID Type\n *\n * @classconstant BSON_BINARY_SUBTYPE_UUID\n **/\nBSON$1.BSON_BINARY_SUBTYPE_UUID = 3;\n/**\n * Binary MD5 Type\n *\n * @classconstant BSON_BINARY_SUBTYPE_MD5\n **/\nBSON$1.BSON_BINARY_SUBTYPE_MD5 = 4;\n/**\n * Binary User Defined Type\n *\n * @classconstant BSON_BINARY_SUBTYPE_USER_DEFINED\n **/\nBSON$1.BSON_BINARY_SUBTYPE_USER_DEFINED = 128;\n\n// BSON MAX VALUES\nBSON$1.BSON_INT32_MAX = 0x7fffffff;\nBSON$1.BSON_INT32_MIN = -0x80000000;\n\nBSON$1.BSON_INT64_MAX = Math.pow(2, 63) - 1;\nBSON$1.BSON_INT64_MIN = -Math.pow(2, 63);\n\n// JS MAX PRECISE VALUES\nBSON$1.JS_INT_MAX = 0x20000000000000; // Any integer up to 2^53 can be precisely represented by a double.\nBSON$1.JS_INT_MIN = -0x20000000000000; // Any integer down to -2^53 can be precisely represented by a double.\n\n// Internal long versions\n// var JS_INT_MAX_LONG = Long.fromNumber(0x20000000000000); // Any integer up to 2^53 can be precisely represented by a double.\n// var JS_INT_MIN_LONG = Long.fromNumber(-0x20000000000000); // Any integer down to -2^53 can be precisely represented by a double.\n\nvar serializer = serializeInto;\n\nvar Long$3 = long_1.Long,\n    Double$2 = double_1.Double,\n    Timestamp$2 = timestamp.Timestamp,\n    ObjectID$2 = objectid.ObjectID,\n    _Symbol$1 = symbol.Symbol,\n    BSONRegExp$2 = regexp.BSONRegExp,\n    Code$2 = code.Code,\n    MinKey$3 = min_key.MinKey,\n    MaxKey$2 = max_key.MaxKey,\n    DBRef$2 = db_ref.DBRef,\n    Binary$3 = binary.Binary;\n\nvar normalizedFunctionString$2 = utils.normalizedFunctionString;\n\n// To ensure that 0.4 of node works correctly\nvar isDate$1 = function isDate(d) {\n  return (typeof d === 'undefined' ? 'undefined' : _typeof(d)) === 'object' && Object.prototype.toString.call(d) === '[object Date]';\n};\n\nvar calculateObjectSize = function calculateObjectSize(object, serializeFunctions, ignoreUndefined) {\n  var totalLength = 4 + 1;\n\n  if (Array.isArray(object)) {\n    for (var i = 0; i < object.length; i++) {\n      totalLength += calculateElement(i.toString(), object[i], serializeFunctions, true, ignoreUndefined);\n    }\n  } else {\n    // If we have toBSON defined, override the current object\n\n    if (object.toBSON) {\n      object = object.toBSON();\n    }\n\n    // Calculate size\n    for (var key in object) {\n      totalLength += calculateElement(key, object[key], serializeFunctions, false, ignoreUndefined);\n    }\n  }\n\n  return totalLength;\n};\n\n/**\n * @ignore\n * @api private\n */\nfunction calculateElement(name, value, serializeFunctions, isArray, ignoreUndefined) {\n  // If we have toBSON defined, override the current object\n  if (value && value.toBSON) {\n    value = value.toBSON();\n  }\n\n  switch (typeof value === 'undefined' ? 'undefined' : _typeof(value)) {\n    case 'string':\n      return 1 + Buffer.byteLength(name, 'utf8') + 1 + 4 + Buffer.byteLength(value, 'utf8') + 1;\n    case 'number':\n      if (Math.floor(value) === value && value >= BSON$2.JS_INT_MIN && value <= BSON$2.JS_INT_MAX) {\n        if (value >= BSON$2.BSON_INT32_MIN && value <= BSON$2.BSON_INT32_MAX) {\n          // 32 bit\n          return (name != null ? Buffer.byteLength(name, 'utf8') + 1 : 0) + (4 + 1);\n        } else {\n          return (name != null ? Buffer.byteLength(name, 'utf8') + 1 : 0) + (8 + 1);\n        }\n      } else {\n        // 64 bit\n        return (name != null ? Buffer.byteLength(name, 'utf8') + 1 : 0) + (8 + 1);\n      }\n    case 'undefined':\n      if (isArray || !ignoreUndefined) return (name != null ? Buffer.byteLength(name, 'utf8') + 1 : 0) + 1;\n      return 0;\n    case 'boolean':\n      return (name != null ? Buffer.byteLength(name, 'utf8') + 1 : 0) + (1 + 1);\n    case 'object':\n      if (value == null || value instanceof MinKey$3 || value instanceof MaxKey$2 || value['_bsontype'] === 'MinKey' || value['_bsontype'] === 'MaxKey') {\n        return (name != null ? Buffer.byteLength(name, 'utf8') + 1 : 0) + 1;\n      } else if (value instanceof ObjectID$2 || value['_bsontype'] === 'ObjectID') {\n        return (name != null ? Buffer.byteLength(name, 'utf8') + 1 : 0) + (12 + 1);\n      } else if (value instanceof Date || isDate$1(value)) {\n        return (name != null ? Buffer.byteLength(name, 'utf8') + 1 : 0) + (8 + 1);\n      } else if (typeof Buffer !== 'undefined' && Buffer.isBuffer(value)) {\n        return (name != null ? Buffer.byteLength(name, 'utf8') + 1 : 0) + (1 + 4 + 1) + value.length;\n      } else if (value instanceof Long$3 || value instanceof Double$2 || value instanceof Timestamp$2 || value['_bsontype'] === 'Long' || value['_bsontype'] === 'Double' || value['_bsontype'] === 'Timestamp') {\n        return (name != null ? Buffer.byteLength(name, 'utf8') + 1 : 0) + (8 + 1);\n      } else if (value instanceof decimal128 || value['_bsontype'] === 'Decimal128') {\n        return (name != null ? Buffer.byteLength(name, 'utf8') + 1 : 0) + (16 + 1);\n      } else if (value instanceof Code$2 || value['_bsontype'] === 'Code') {\n        // Calculate size depending on the availability of a scope\n        if (value.scope != null && Object.keys(value.scope).length > 0) {\n          return (name != null ? Buffer.byteLength(name, 'utf8') + 1 : 0) + 1 + 4 + 4 + Buffer.byteLength(value.code.toString(), 'utf8') + 1 + calculateObjectSize(value.scope, serializeFunctions, ignoreUndefined);\n        } else {\n          return (name != null ? Buffer.byteLength(name, 'utf8') + 1 : 0) + 1 + 4 + Buffer.byteLength(value.code.toString(), 'utf8') + 1;\n        }\n      } else if (value instanceof Binary$3 || value['_bsontype'] === 'Binary') {\n        // Check what kind of subtype we have\n        if (value.sub_type === Binary$3.SUBTYPE_BYTE_ARRAY) {\n          return (name != null ? Buffer.byteLength(name, 'utf8') + 1 : 0) + (value.position + 1 + 4 + 1 + 4);\n        } else {\n          return (name != null ? Buffer.byteLength(name, 'utf8') + 1 : 0) + (value.position + 1 + 4 + 1);\n        }\n      } else if (value instanceof _Symbol$1 || value['_bsontype'] === 'Symbol') {\n        return (name != null ? Buffer.byteLength(name, 'utf8') + 1 : 0) + Buffer.byteLength(value.value, 'utf8') + 4 + 1 + 1;\n      } else if (value instanceof DBRef$2 || value['_bsontype'] === 'DBRef') {\n        // Set up correct object for serialization\n        var ordered_values = {\n          $ref: value.collection,\n          $id: value.oid\n        };\n\n        // Add db reference if it exists\n        if (value.db != null) {\n          ordered_values['$db'] = value.db;\n        }\n\n        ordered_values = Object.assign(ordered_values, value.fields);\n\n        return (name != null ? Buffer.byteLength(name, 'utf8') + 1 : 0) + 1 + calculateObjectSize(ordered_values, serializeFunctions, ignoreUndefined);\n      } else if (value instanceof RegExp || Object.prototype.toString.call(value) === '[object RegExp]') {\n        return (name != null ? Buffer.byteLength(name, 'utf8') + 1 : 0) + 1 + Buffer.byteLength(value.source, 'utf8') + 1 + (value.global ? 1 : 0) + (value.ignoreCase ? 1 : 0) + (value.multiline ? 1 : 0) + 1;\n      } else if (value instanceof BSONRegExp$2 || value['_bsontype'] === 'BSONRegExp') {\n        return (name != null ? Buffer.byteLength(name, 'utf8') + 1 : 0) + 1 + Buffer.byteLength(value.pattern, 'utf8') + 1 + Buffer.byteLength(value.options, 'utf8') + 1;\n      } else {\n        return (name != null ? Buffer.byteLength(name, 'utf8') + 1 : 0) + calculateObjectSize(value, serializeFunctions, ignoreUndefined) + 1;\n      }\n    case 'function':\n      // WTF for 0.4.X where typeof /someregexp/ === 'function'\n      if (value instanceof RegExp || Object.prototype.toString.call(value) === '[object RegExp]' || String.call(value) === '[object RegExp]') {\n        return (name != null ? Buffer.byteLength(name, 'utf8') + 1 : 0) + 1 + Buffer.byteLength(value.source, 'utf8') + 1 + (value.global ? 1 : 0) + (value.ignoreCase ? 1 : 0) + (value.multiline ? 1 : 0) + 1;\n      } else {\n        if (serializeFunctions && value.scope != null && Object.keys(value.scope).length > 0) {\n          return (name != null ? Buffer.byteLength(name, 'utf8') + 1 : 0) + 1 + 4 + 4 + Buffer.byteLength(normalizedFunctionString$2(value), 'utf8') + 1 + calculateObjectSize(value.scope, serializeFunctions, ignoreUndefined);\n        } else if (serializeFunctions) {\n          return (name != null ? Buffer.byteLength(name, 'utf8') + 1 : 0) + 1 + 4 + Buffer.byteLength(normalizedFunctionString$2(value), 'utf8') + 1;\n        }\n      }\n  }\n\n  return 0;\n}\n\nvar BSON$2 = {};\n\n// BSON MAX VALUES\nBSON$2.BSON_INT32_MAX = 0x7fffffff;\nBSON$2.BSON_INT32_MIN = -0x80000000;\n\n// JS MAX PRECISE VALUES\nBSON$2.JS_INT_MAX = 0x20000000000000; // Any integer up to 2^53 can be precisely represented by a double.\nBSON$2.JS_INT_MIN = -0x20000000000000; // Any integer down to -2^53 can be precisely represented by a double.\n\nvar calculate_size = calculateObjectSize;\n\n// Parts of the parser\n\n\n/**\n * @ignore\n * @api private\n */\n// Default Max Size\nvar MAXSIZE = 1024 * 1024 * 17;\n\n// Current Internal Temporary Serialization Buffer\nvar buffer = new Buffer(MAXSIZE);\n\nvar BSON$3 = function BSON() {};\n\n/**\n * Serialize a Javascript object.\n *\n * @param {Object} object the Javascript object to serialize.\n * @param {Boolean} [options.checkKeys] the serializer will check if keys are valid.\n * @param {Boolean} [options.serializeFunctions=false] serialize the javascript functions **(default:false)**.\n * @param {Boolean} [options.ignoreUndefined=true] ignore undefined fields **(default:true)**.\n * @param {Number} [options.minInternalBufferSize=1024*1024*17] minimum size of the internal temporary serialization buffer **(default:1024*1024*17)**.\n * @return {Buffer} returns the Buffer object containing the serialized object.\n * @api public\n */\nBSON$3.prototype.serialize = function serialize(object, options) {\n  options = options || {};\n  // Unpack the options\n  var checkKeys = typeof options.checkKeys === 'boolean' ? options.checkKeys : false;\n  var serializeFunctions = typeof options.serializeFunctions === 'boolean' ? options.serializeFunctions : false;\n  var ignoreUndefined = typeof options.ignoreUndefined === 'boolean' ? options.ignoreUndefined : true;\n  var minInternalBufferSize = typeof options.minInternalBufferSize === 'number' ? options.minInternalBufferSize : MAXSIZE;\n\n  // Resize the internal serialization buffer if needed\n  if (buffer.length < minInternalBufferSize) {\n    buffer = new Buffer(minInternalBufferSize);\n  }\n\n  // Attempt to serialize\n  var serializationIndex = serializer(buffer, object, checkKeys, 0, 0, serializeFunctions, ignoreUndefined, []);\n  // Create the final buffer\n  var finishedBuffer = new Buffer(serializationIndex);\n  // Copy into the finished buffer\n  buffer.copy(finishedBuffer, 0, 0, finishedBuffer.length);\n  // Return the buffer\n  return finishedBuffer;\n};\n\n/**\n * Serialize a Javascript object using a predefined Buffer and index into the buffer, useful when pre-allocating the space for serialization.\n *\n * @param {Object} object the Javascript object to serialize.\n * @param {Buffer} buffer the Buffer you pre-allocated to store the serialized BSON object.\n * @param {Boolean} [options.checkKeys] the serializer will check if keys are valid.\n * @param {Boolean} [options.serializeFunctions=false] serialize the javascript functions **(default:false)**.\n * @param {Boolean} [options.ignoreUndefined=true] ignore undefined fields **(default:true)**.\n * @param {Number} [options.index] the index in the buffer where we wish to start serializing into.\n * @return {Number} returns the index pointing to the last written byte in the buffer.\n * @api public\n */\nBSON$3.prototype.serializeWithBufferAndIndex = function (object, finalBuffer, options) {\n  options = options || {};\n  // Unpack the options\n  var checkKeys = typeof options.checkKeys === 'boolean' ? options.checkKeys : false;\n  var serializeFunctions = typeof options.serializeFunctions === 'boolean' ? options.serializeFunctions : false;\n  var ignoreUndefined = typeof options.ignoreUndefined === 'boolean' ? options.ignoreUndefined : true;\n  var startIndex = typeof options.index === 'number' ? options.index : 0;\n\n  // Attempt to serialize\n  var serializationIndex = serializer(buffer, object, checkKeys, 0, 0, serializeFunctions, ignoreUndefined);\n  buffer.copy(finalBuffer, startIndex, 0, serializationIndex);\n\n  // Return the index\n  return startIndex + serializationIndex - 1;\n};\n\n/**\n * Deserialize data as BSON.\n *\n * @param {Buffer} buffer the buffer containing the serialized set of BSON documents.\n * @param {Object} [options.evalFunctions=false] evaluate functions in the BSON document scoped to the object deserialized.\n * @param {Object} [options.cacheFunctions=false] cache evaluated functions for reuse.\n * @param {Object} [options.cacheFunctionsCrc32=false] use a crc32 code for caching, otherwise use the string of the function.\n * @param {Object} [options.promoteLongs=true] when deserializing a Long will fit it into a Number if it's smaller than 53 bits\n * @param {Object} [options.promoteBuffers=false] when deserializing a Binary will return it as a node.js Buffer instance.\n * @param {Object} [options.promoteValues=false] when deserializing will promote BSON values to their Node.js closest equivalent types.\n * @param {Object} [options.fieldsAsRaw=null] allow to specify if there what fields we wish to return as unserialized raw buffer.\n * @param {Object} [options.bsonRegExp=false] return BSON regular expressions as BSONRegExp instances.\n * @param {boolean} [options.allowObjectSmallerThanBufferSize=false] allows the buffer to be larger than the parsed BSON object\n * @return {Object} returns the deserialized Javascript Object.\n * @api public\n */\nBSON$3.prototype.deserialize = function (buffer, options) {\n  return deserializer(buffer, options);\n};\n\n/**\n * Calculate the bson size for a passed in Javascript object.\n *\n * @param {Object} object the Javascript object to calculate the BSON byte size for.\n * @param {Boolean} [options.serializeFunctions=false] serialize the javascript functions **(default:false)**.\n * @param {Boolean} [options.ignoreUndefined=true] ignore undefined fields **(default:true)**.\n * @return {Number} returns the number of bytes the BSON object will take up.\n * @api public\n */\nBSON$3.prototype.calculateObjectSize = function (object, options) {\n  options = options || {};\n\n  var serializeFunctions = typeof options.serializeFunctions === 'boolean' ? options.serializeFunctions : false;\n  var ignoreUndefined = typeof options.ignoreUndefined === 'boolean' ? options.ignoreUndefined : true;\n\n  return calculate_size(object, serializeFunctions, ignoreUndefined);\n};\n\n/**\n * Deserialize stream data as BSON documents.\n *\n * @param {Buffer} data the buffer containing the serialized set of BSON documents.\n * @param {Number} startIndex the start index in the data Buffer where the deserialization is to start.\n * @param {Number} numberOfDocuments number of documents to deserialize.\n * @param {Array} documents an array where to store the deserialized documents.\n * @param {Number} docStartIndex the index in the documents array from where to start inserting documents.\n * @param {Object} [options] additional options used for the deserialization.\n * @param {Object} [options.evalFunctions=false] evaluate functions in the BSON document scoped to the object deserialized.\n * @param {Object} [options.cacheFunctions=false] cache evaluated functions for reuse.\n * @param {Object} [options.cacheFunctionsCrc32=false] use a crc32 code for caching, otherwise use the string of the function.\n * @param {Object} [options.promoteLongs=true] when deserializing a Long will fit it into a Number if it's smaller than 53 bits\n * @param {Object} [options.promoteBuffers=false] when deserializing a Binary will return it as a node.js Buffer instance.\n * @param {Object} [options.promoteValues=false] when deserializing will promote BSON values to their Node.js closest equivalent types.\n * @param {Object} [options.fieldsAsRaw=null] allow to specify if there what fields we wish to return as unserialized raw buffer.\n * @param {Object} [options.bsonRegExp=false] return BSON regular expressions as BSONRegExp instances.\n * @return {Number} returns the next index in the buffer after deserialization **x** numbers of documents.\n * @api public\n */\nBSON$3.prototype.deserializeStream = function (data, startIndex, numberOfDocuments, documents, docStartIndex, options) {\n  options = Object.assign({ allowObjectSmallerThanBufferSize: true }, options);\n  var index = startIndex;\n  // Loop over all documents\n  for (var i = 0; i < numberOfDocuments; i++) {\n    // Find size of the document\n    var size = data[index] | data[index + 1] << 8 | data[index + 2] << 16 | data[index + 3] << 24;\n    // Update options with index\n    options.index = index;\n    // Parse the document at this point\n    documents[docStartIndex + i] = this.deserialize(data, options);\n    // Adjust index by the document size\n    index = index + size;\n  }\n\n  // Return object containing end index of parsing and list of documents\n  return index;\n};\n\n/**\n * @ignore\n * @api private\n */\n// BSON MAX VALUES\nBSON$3.BSON_INT32_MAX = 0x7fffffff;\nBSON$3.BSON_INT32_MIN = -0x80000000;\n\nBSON$3.BSON_INT64_MAX = Math.pow(2, 63) - 1;\nBSON$3.BSON_INT64_MIN = -Math.pow(2, 63);\n\n// JS MAX PRECISE VALUES\nBSON$3.JS_INT_MAX = 0x20000000000000; // Any integer up to 2^53 can be precisely represented by a double.\nBSON$3.JS_INT_MIN = -0x20000000000000; // Any integer down to -2^53 can be precisely represented by a double.\n\n// Internal long versions\n// var JS_INT_MAX_LONG = Long.fromNumber(0x20000000000000); // Any integer up to 2^53 can be precisely represented by a double.\n// var JS_INT_MIN_LONG = Long.fromNumber(-0x20000000000000); // Any integer down to -2^53 can be precisely represented by a double.\n\n/**\n * Number BSON Type\n *\n * @classconstant BSON_DATA_NUMBER\n **/\nBSON$3.BSON_DATA_NUMBER = 1;\n/**\n * String BSON Type\n *\n * @classconstant BSON_DATA_STRING\n **/\nBSON$3.BSON_DATA_STRING = 2;\n/**\n * Object BSON Type\n *\n * @classconstant BSON_DATA_OBJECT\n **/\nBSON$3.BSON_DATA_OBJECT = 3;\n/**\n * Array BSON Type\n *\n * @classconstant BSON_DATA_ARRAY\n **/\nBSON$3.BSON_DATA_ARRAY = 4;\n/**\n * Binary BSON Type\n *\n * @classconstant BSON_DATA_BINARY\n **/\nBSON$3.BSON_DATA_BINARY = 5;\n/**\n * ObjectID BSON Type\n *\n * @classconstant BSON_DATA_OID\n **/\nBSON$3.BSON_DATA_OID = 7;\n/**\n * Boolean BSON Type\n *\n * @classconstant BSON_DATA_BOOLEAN\n **/\nBSON$3.BSON_DATA_BOOLEAN = 8;\n/**\n * Date BSON Type\n *\n * @classconstant BSON_DATA_DATE\n **/\nBSON$3.BSON_DATA_DATE = 9;\n/**\n * null BSON Type\n *\n * @classconstant BSON_DATA_NULL\n **/\nBSON$3.BSON_DATA_NULL = 10;\n/**\n * RegExp BSON Type\n *\n * @classconstant BSON_DATA_REGEXP\n **/\nBSON$3.BSON_DATA_REGEXP = 11;\n/**\n * Code BSON Type\n *\n * @classconstant BSON_DATA_CODE\n **/\nBSON$3.BSON_DATA_CODE = 13;\n/**\n * Symbol BSON Type\n *\n * @classconstant BSON_DATA_SYMBOL\n **/\nBSON$3.BSON_DATA_SYMBOL = 14;\n/**\n * Code with Scope BSON Type\n *\n * @classconstant BSON_DATA_CODE_W_SCOPE\n **/\nBSON$3.BSON_DATA_CODE_W_SCOPE = 15;\n/**\n * 32 bit Integer BSON Type\n *\n * @classconstant BSON_DATA_INT\n **/\nBSON$3.BSON_DATA_INT = 16;\n/**\n * Timestamp BSON Type\n *\n * @classconstant BSON_DATA_TIMESTAMP\n **/\nBSON$3.BSON_DATA_TIMESTAMP = 17;\n/**\n * Long BSON Type\n *\n * @classconstant BSON_DATA_LONG\n **/\nBSON$3.BSON_DATA_LONG = 18;\n/**\n * MinKey BSON Type\n *\n * @classconstant BSON_DATA_MIN_KEY\n **/\nBSON$3.BSON_DATA_MIN_KEY = 0xff;\n/**\n * MaxKey BSON Type\n *\n * @classconstant BSON_DATA_MAX_KEY\n **/\nBSON$3.BSON_DATA_MAX_KEY = 0x7f;\n\n/**\n * Binary Default Type\n *\n * @classconstant BSON_BINARY_SUBTYPE_DEFAULT\n **/\nBSON$3.BSON_BINARY_SUBTYPE_DEFAULT = 0;\n/**\n * Binary Function Type\n *\n * @classconstant BSON_BINARY_SUBTYPE_FUNCTION\n **/\nBSON$3.BSON_BINARY_SUBTYPE_FUNCTION = 1;\n/**\n * Binary Byte Array Type\n *\n * @classconstant BSON_BINARY_SUBTYPE_BYTE_ARRAY\n **/\nBSON$3.BSON_BINARY_SUBTYPE_BYTE_ARRAY = 2;\n/**\n * Binary UUID Type\n *\n * @classconstant BSON_BINARY_SUBTYPE_UUID\n **/\nBSON$3.BSON_BINARY_SUBTYPE_UUID = 3;\n/**\n * Binary MD5 Type\n *\n * @classconstant BSON_BINARY_SUBTYPE_MD5\n **/\nBSON$3.BSON_BINARY_SUBTYPE_MD5 = 4;\n/**\n * Binary User Defined Type\n *\n * @classconstant BSON_BINARY_SUBTYPE_USER_DEFINED\n **/\nBSON$3.BSON_BINARY_SUBTYPE_USER_DEFINED = 128;\n\n// Return BSON\nvar bson = BSON$3;\nvar Code_1$1 = code;\nvar Map_1 = map;\nvar Symbol_1$1 = symbol;\nvar BSON_1 = BSON$3;\nvar DBRef_1$1 = db_ref;\nvar Binary_1$1 = binary;\nvar ObjectID_1$1 = objectid;\nvar Long_1$1 = long_1;\nvar Timestamp_1$1 = timestamp;\nvar Double_1$1 = double_1;\nvar Int32_1$1 = int_32;\nvar MinKey_1$1 = min_key;\nvar MaxKey_1$1 = max_key;\nvar BSONRegExp_1$1 = regexp;\nvar Decimal128_1$1 = decimal128;\nbson.Code = Code_1$1;\nbson.Map = Map_1;\nbson.Symbol = Symbol_1$1;\nbson.BSON = BSON_1;\nbson.DBRef = DBRef_1$1;\nbson.Binary = Binary_1$1;\nbson.ObjectID = ObjectID_1$1;\nbson.Long = Long_1$1;\nbson.Timestamp = Timestamp_1$1;\nbson.Double = Double_1$1;\nbson.Int32 = Int32_1$1;\nbson.MinKey = MinKey_1$1;\nbson.MaxKey = MaxKey_1$1;\nbson.BSONRegExp = BSONRegExp_1$1;\nbson.Decimal128 = Decimal128_1$1;\n\n// BSON MAX VALUES\nbson.BSON_INT32_MAX = 0x7fffffff;\nbson.BSON_INT32_MIN = -0x80000000;\n\nbson.BSON_INT64_MAX = Math.pow(2, 63) - 1;\nbson.BSON_INT64_MIN = -Math.pow(2, 63);\n\n// JS MAX PRECISE VALUES\nbson.JS_INT_MAX = 0x20000000000000; // Any integer up to 2^53 can be precisely represented by a double.\nbson.JS_INT_MIN = -0x20000000000000; // Any integer down to -2^53 can be precisely represented by a double.\n\n// Add BSON types to function creation\nbson.Binary = binary;\nbson.Code = code;\nbson.DBRef = db_ref;\nbson.Decimal128 = decimal128;\nbson.Double = double_1;\nbson.Int32 = int_32;\nbson.Long = long_1;\nbson.Map = map;\nbson.MaxKey = max_key;\nbson.MinKey = min_key;\nbson.ObjectId = objectid;\nbson.ObjectID = objectid;\nbson.BSONRegExp = regexp;\nbson.Symbol = symbol;\nbson.Timestamp = timestamp;\n\n// Return the BSON\nvar jsBson = bson;\n\nreturn jsBson;\n\n})));\n\n\n\n// WEBPACK FOOTER //\n// ./~/bson/dist/bson.js","/* global window, document, fetch */\n\nimport { createStorage } from './storage';\nimport { createProviders, PROVIDER_TYPE_MONGODB_CLOUD } from './providers';\nimport { StitchError } from '../errors';\nimport * as authCommon from './common';\nimport * as common from '../common';\nimport * as _platform from 'detect-browser';\n\nconst jwtDecode = require('jwt-decode');\n\nconst EMBEDDED_USER_AUTH_DATA_PARTS = 4;\n\n/** @private */\nexport class AuthFactory {\n  constructor() {\n    throw new StitchError('Auth can only be made from the AuthFactory.create function');\n  }\n\n  static create(client, rootUrl, options) {\n    return newAuth(client, rootUrl, options);\n  }\n}\n\n/** @private */\nexport function newAuth(client, rootUrl, options) {\n  let auth = Object.create(Auth.prototype);\n  let namespace;\n  if (!client || client.clientAppID === '') {\n    namespace = 'admin';\n  } else {\n    namespace = `client.${client.clientAppID}`;\n  }\n\n  options = Object.assign({\n    codec: authCommon.APP_CLIENT_CODEC,\n    namespace: namespace,\n    storageType: 'localStorage'\n  }, options);\n\n  auth.client = client;\n  auth.rootUrl = rootUrl;\n  auth.codec = options.codec;\n  auth.platform = options.platform || _platform;\n  auth.storage = createStorage(options);\n  auth.providers = createProviders(auth, options);\n\n  return Promise.all([\n    auth._get(),\n    auth.storage.get(authCommon.REFRESH_TOKEN_KEY),\n    auth.storage.get(authCommon.USER_LOGGED_IN_PT_KEY),\n    auth.storage.get(authCommon.DEVICE_ID_KEY)\n  ]).then(([authObj, rt, loggedInProviderType, deviceId]) => {\n    auth.auth = authObj;\n    auth.authedId = authObj.userId;\n    auth.rt = rt;\n    auth.loggedInProviderType = loggedInProviderType;\n    auth.deviceId = deviceId;\n\n    return auth;\n  });\n}\n\n/** @private */\nexport class Auth {\n  constructor(client, rootUrl, options) {\n    throw new StitchError('Auth can only be made from the AuthFactory.create function');\n  }\n\n  /**\n   * Create the device info for this client.\n   *\n   * @private\n   * @memberof module:auth\n   * @method getDeviceInfo\n   * @param {String} appId The app ID for this client\n   * @param {String} appVersion The version of the app\n   * @returns {Object} The device info object\n   */\n  getDeviceInfo(deviceId, appId, appVersion = '') {\n    const deviceInfo = { appId, appVersion, sdkVersion: common.SDK_VERSION };\n\n    if (deviceId) {\n      deviceInfo.deviceId = deviceId;\n    }\n\n    if (this.platform) {\n      deviceInfo.platform = this.platform.name;\n      deviceInfo.platformVersion = this.platform.version;\n    }\n\n    return deviceInfo;\n  }\n\n  provider(name) {\n    if (!this.providers.hasOwnProperty(name)) {\n      throw new Error('Invalid auth provider specified: ' + name);\n    }\n\n    return this.providers[name];\n  }\n\n  refreshToken() {\n    return this.client.doSessionPost()\n      .then((json) => this.set(json));\n  }\n\n  pageRootUrl() {\n    return [window.location.protocol, '//', window.location.host, window.location.pathname].join('');\n  }\n\n  error() {\n    return this._error;\n  }\n\n  isAppClient() {\n    if (!this.client) {\n      return true; // Handle the case where Auth is constructed with null\n    }\n    return this.client.type === common.APP_CLIENT_TYPE;\n  }\n\n  handleRedirect() {\n    if (typeof (window) === 'undefined') {\n      // This means we're running in some environment other\n      // than a browser - so handling a redirect makes no sense here.\n      return;\n    }\n    if (!window.location || !window.location.hash) {\n      return;\n    }\n\n    return Promise.all([\n      this.storage.get(authCommon.STATE_KEY),\n      this.storage.get(authCommon.STITCH_REDIRECT_PROVIDER)\n    ]).then(([ourState, redirectProvider]) => {\n      let redirectFragment = window.location.hash.substring(1);\n      const redirectState = this.parseRedirectFragment(redirectFragment, ourState);\n      if (redirectState.lastError || (redirectState.found && !redirectProvider)) {\n        console.error(`StitchClient: error from redirect: ${redirectState.lastError ?\n          redirectState.lastError : 'provider type not set'}`);\n        this._error = redirectState.lastError;\n        window.history.replaceState(null, '', this.pageRootUrl());\n        return Promise.reject();\n      }\n\n      if (!redirectState.found) {\n        return Promise.reject();\n      }\n\n      return Promise.all(\n        [\n          this.storage.remove(authCommon.STATE_KEY),\n          this.storage.remove(authCommon.STITCH_REDIRECT_PROVIDER)\n        ]\n      ).then(() => ({redirectState, redirectProvider}));\n    }).then(({redirectState, redirectProvider}) => {\n      if (!redirectState.stateValid) {\n        console.error('StitchClient: state values did not match!');\n        window.history.replaceState(null, '', this.pageRootUrl());\n        return;\n      }\n\n      if (!redirectState.ua) {\n        console.error('StitchClient: no UA value was returned from redirect!');\n        return;\n      }\n\n      // If we get here, the state is valid - set auth appropriately.\n      return this.set(redirectState.ua, redirectProvider);\n    }).then(() => window.history.replaceState(null, '', this.pageRootUrl()))\n      .catch(error => {\n        if (error) {\n          throw error;\n        }\n      });\n  }\n\n  getCookie(name) {\n    let splitCookies = document.cookie.split(' ');\n    for (let i = 0; i < splitCookies.length; i++) {\n      let cookie = splitCookies[i];\n      let sepIdx = cookie.indexOf('=');\n      let cookieName = cookie.substring(0, sepIdx);\n      if (cookieName === name) {\n        let cookieVal = cookie.substring(sepIdx + 1, cookie.length);\n        if (cookieVal[cookieVal.length - 1] === ';') {\n          return cookieVal.substring(0, cookie.length - 1);\n        }\n        return cookieVal;\n      }\n    }\n  }\n\n  handleCookie() {\n    if (typeof (window) === 'undefined' || typeof (document) === 'undefined') {\n      // This means we're running in some environment other\n      // than a browser - so handling a cookie makes no sense here.\n      return;\n    }\n    if (!document.cookie) {\n      return;\n    }\n\n    let uaCookie = this.getCookie(authCommon.USER_AUTH_COOKIE_NAME);\n    if (!uaCookie) {\n      return;\n    }\n\n    document.cookie = `${authCommon.USER_AUTH_COOKIE_NAME}=; Path=/; Expires=Thu, 01 Jan 1970 00:00:00 GMT;`;\n    const userAuth = this.unmarshallUserAuth(uaCookie);\n    return this.set(userAuth, PROVIDER_TYPE_MONGODB_CLOUD).then(() =>\n      window.history.replaceState(null, '', this.pageRootUrl())\n    );\n  }\n\n  clear() {\n    this.auth = null;\n    this.authedId = null;\n    this.rt = null;\n    this.loggedInProviderType = null;\n\n    return Promise.all(\n      [\n        this.storage.remove(authCommon.USER_AUTH_KEY),\n        this.storage.remove(authCommon.REFRESH_TOKEN_KEY),\n        this.storage.remove(authCommon.USER_LOGGED_IN_PT_KEY),\n        this.storage.remove(authCommon.STITCH_REDIRECT_PROVIDER)\n      ]\n    );\n  }\n\n  getDeviceId() {\n    return this.deviceId;\n  }\n\n  // Returns whether or not the access token is expired or is going to expire within 'withinSeconds'\n  // seconds, according to current system time. Returns false if the token is malformed in any way.\n  isAccessTokenExpired(withinSeconds = authCommon.DEFAULT_ACCESS_TOKEN_EXPIRE_WITHIN_SECS) {\n    const token = this.getAccessToken();\n    if (!token) {\n      return false;\n    }\n\n    let decodedToken;\n    try {\n      decodedToken = jwtDecode(token);\n    } catch (e) {\n      return false;\n    }\n\n    if (!decodedToken) {\n      return false;\n    }\n\n    return decodedToken.exp && Math.floor(Date.now() / 1000) >= decodedToken.exp - withinSeconds;\n  }\n\n  getAccessToken() {\n    return this.auth.accessToken;\n  }\n\n  getRefreshToken() {\n    return this.rt;\n  }\n\n  set(json, authType = '') {\n    if (!json) {\n      return;\n    }\n\n    let newUserAuth = {};\n    let setters = [];\n\n    if (authType) {\n      this.loggedInProviderType = authType;\n      setters.push(this.storage.set(authCommon.USER_LOGGED_IN_PT_KEY, authType));\n    }\n\n    if (json[this.codec.refreshToken]) {\n      this.rt = json[this.codec.refreshToken];\n      delete json[this.codec.refreshToken];\n      setters.push(this.storage.set(authCommon.REFRESH_TOKEN_KEY, this.rt));\n    }\n\n    if (json[this.codec.deviceId]) {\n      this.deviceId = json[this.codec.deviceId];\n      delete json[this.codec.deviceId];\n      setters.push(this.storage.set(authCommon.DEVICE_ID_KEY, this.deviceId));\n    }\n\n    // Merge in new fields with old fields. Typically the first json value\n    // is complete with every field inside a user auth, but subsequent requests\n    // do not include everything. This merging behavior is safe so long as json\n    // value responses with absent fields do not indicate that the field should\n    // be unset.\n    if (json[this.codec.accessToken]) {\n      newUserAuth.accessToken = json[this.codec.accessToken];\n    }\n    if (json[this.codec.userId]) {\n      newUserAuth.userId = json[this.codec.userId];\n    }\n\n    this.auth = Object.assign(this.auth ? this.auth : {}, newUserAuth);\n    this.authedId = this.auth.userId;\n    setters.push(this.storage.set(authCommon.USER_AUTH_KEY, JSON.stringify(this.auth)));\n    return Promise.all(setters).then(() => this.auth);\n  }\n\n  _get() {\n    return this.storage.get(authCommon.USER_AUTH_KEY).then((data) => {\n      if (!data) {\n        return {};\n      }\n\n      try {\n        return JSON.parse(data);\n      } catch (e) {\n        // Need to back out and clear auth otherwise we will never\n        // be able to do anything useful.\n        return this.clear().then(() => {\n          throw new StitchError('Failure retrieving stored auth');\n        });\n      }\n    });\n  }\n\n  getLoggedInProviderType() {\n    return this.loggedInProviderType;\n  }\n\n  parseRedirectFragment(fragment, ourState) {\n    // After being redirected from oauth, the URL will look like:\n    // https://todo.examples.stitch.mongodb.com/#_stitch_state=...&_stitch_ua=...\n    // This function parses out stitch-specific tokens from the fragment and\n    // builds an object describing the result.\n    const vars = fragment.split('&');\n    const result = { ua: null, found: false, stateValid: false, lastError: null };\n    let shouldBreak = false;\n    for (let i = 0; i < vars.length && !shouldBreak; ++i) {\n      const pairParts = vars[i].split('=');\n      const pairKey = decodeURIComponent(pairParts[0]);\n      switch (pairKey) {\n      case authCommon.STITCH_ERROR_KEY:\n        result.lastError = decodeURIComponent(pairParts[1]);\n        result.found = true;\n        shouldBreak = true;\n        break;\n      case authCommon.USER_AUTH_KEY:\n        try {\n          result.ua = this.unmarshallUserAuth(decodeURIComponent(pairParts[1]));\n          result.found = true;\n        } catch (e) {\n          result.lastError = e;\n        }\n        continue;\n      case authCommon.STITCH_LINK_KEY:\n        result.found = true;\n        continue;\n      case authCommon.STATE_KEY:\n        result.found = true;\n        let theirState = decodeURIComponent(pairParts[1]);\n        if (ourState && ourState === theirState) {\n          result.stateValid = true;\n        }\n        continue;\n      default: continue;\n      }\n    }\n\n    return result;\n  }\n\n  unmarshallUserAuth(data) {\n    let parts = data.split('$');\n    if (parts.length !== EMBEDDED_USER_AUTH_DATA_PARTS) {\n      throw new RangeError('invalid user auth data provided: ' + data);\n    }\n\n    return {\n      [this.codec.accessToken]: parts[0],\n      [this.codec.refreshToken]: parts[1],\n      [this.codec.userId]: parts[2],\n      [this.codec.deviceId]: parts[3]\n    };\n  }\n\n  fetchArgsWithLink(fetchArgs, link) {\n    if (link) {\n      fetchArgs.headers.Authorization = `Bearer ${this.getAccessToken()}`;\n    }\n\n    return fetchArgs;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/auth/index.js","import { USER_AUTH_KEY, REFRESH_TOKEN_KEY, DEVICE_ID_KEY, STATE_KEY } from './common';\n\nexport class MemoryStorage {\n  constructor() {\n    this._data = {};\n    this._orderedKeys = [];\n    this.length = 0;\n  }\n\n  getItem(key) {\n    return (key in this._data) ? this._data[key] : null;\n  }\n\n  setItem(key, value) {\n    this._orderedKeys.push(key);\n    this._data[key] = value;\n    this.length++;\n    return this._data[key];\n  }\n\n  removeItem(key) {\n    this._orderedKeys.pop(key);\n    delete this._data[key];\n    this.length--;\n    return undefined;\n  }\n\n  key(index) {\n    return this._orderedKeys[index];\n  }\n}\n\nconst _VERSION = 1;\nconst _VERSION_KEY = '__stitch_storage_version__';\n\n/**\n  * Run a migration on the currently used storage\n  * that checks to see if the current version is up to date.\n  * If the version has not been set, this method will migrate\n  * to the latest version.\n  *\n  * @private\n  * @param {Integer} version version number of storage\n  * @param {Object} storage storage class being checked\n  * @returns {Promise} nullable promise containing migration logic\n  */\nfunction _runMigration(version, storage) {\n  switch (version) {\n  case null:\n  case undefined:\n    // return a promise,\n    // mapping each of the store's keys to a Promise\n    // that fetches the each value for each key,\n    // sets the old value to the new \"namespaced\" key\n    // remove the old key value pair,\n    // and set the version number\n    let migrations = [\n      USER_AUTH_KEY,\n      REFRESH_TOKEN_KEY,\n      DEVICE_ID_KEY,\n      STATE_KEY\n    ].map(key =>\n      Promise.resolve(storage.store.getItem(key))\n        .then(item => !!item && storage.store.setItem(storage._generateKey(key), item))\n        .then(() => storage.store.removeItem(key))\n    );\n    return Promise.all(migrations)\n      .then(() => storage.store.setItem(_VERSION_KEY, _VERSION));\n  // in future versions, `case 1:`, `case 2:` and so on\n  // could be added to perform similar migrations\n  default: break;\n  }\n}\n\n/** @private */\nclass Storage {\n  /**\n   * @param {Storage} store implementer of Storage interface\n   * @param {String} namespace clientAppID to be used for namespacing\n   * @param\n  */\n  constructor(store, namespace) {\n    this.store = store;\n    this.namespace = `_stitch.${namespace}`;\n\n    this._migration = Promise.resolve(this.store.getItem(_VERSION_KEY))\n      .then(version => _runMigration(version, this));\n  }\n\n  _generateKey(key) {\n    return `${this.namespace}.${key}`;\n  }\n\n  get(key) {\n    return Promise.resolve(this._migration)\n      .then(() => this.store.getItem(this._generateKey(key)));\n  }\n\n  set(key, value) {\n    return Promise.resolve(this._migration)\n      .then(() => this.store.setItem(this._generateKey(key), value))\n      .then(() => value);\n  }\n\n  remove(key) {\n    return Promise.resolve(this._migration)\n      .then(() => this.store.removeItem(this._generateKey(key)));\n  }\n}\n\nexport function createStorage(options) {\n  let { storageType, storage, namespace } = options;\n\n  if (storageType === 'localStorage') {\n    if ((typeof window !== 'undefined') && 'localStorage' in window && window.localStorage !== null) {\n      return new Storage(window.localStorage, namespace);\n    }\n  } else if (storageType === 'sessionStorage') {\n    if ((typeof window !== 'undefined') && 'sessionStorage' in window && window.sessionStorage !== null) {\n      return new Storage(window.sessionStorage, namespace);\n    }\n  } else if (storageType == 'customStorage') { //eslint-disable-line eqeqeq\n    return new Storage(storage, namespace);\n  }\n\n  // default to memory storage\n  return new Storage(new MemoryStorage(), namespace);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/auth/storage.js","import { StitchClientFactory } from './client';\nimport { StitchAdminClientFactory } from './admin';\nimport { BSON } from 'mongodb-extjson';\n\nexport {\n  StitchClientFactory,\n  StitchAdminClientFactory,\n  BSON\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","import { serviceResponse } from '../../util';\n\n/**\n * Convenience wrapper around AWS S3 service (not meant to be instantiated directly,\n * use `.service('aws-s3', '<service-name>')` on a {@link StitchClient} instance).\n *\n * @class\n * @return {S3Service} a S3Service instance.\n */\nclass S3Service {\n  constructor(stitchClient, serviceName) {\n    this.client = stitchClient;\n    this.serviceName = serviceName;\n  }\n\n  /**\n   * Put an object to S3 via Stitch. For small uploads\n   *\n   * @param {String} bucket which S3 bucket to use\n   * @param {String} key which key (filename) to use\n   * @param {String} acl which policy to apply\n   * @param {String} contentType content type of uploaded data\n   * @param {String|BSON.Binary} body the content to put in the bucket\n   * @return {Promise} which resolves to an object containing a single field \"location\"\n   *                   which is the URL of the object that was put into the S3 bucket\n   */\n  put(bucket, key, acl, contentType, body) {\n    return serviceResponse(this, {\n      action: 'put',\n      args: { bucket, key, acl, contentType, body }\n    });\n  }\n\n  /**\n   * Sign a policy for putting via Stitch. For large uploads\n   *\n   * @param {String} bucket which S3 bucket to use\n   * @param {String} key which key (filename) to use\n   * @param {String} acl which policy to apply\n   * @param {String} contentType content type of uploaded data\n   * @return {Promise}\n   */\n  signPolicy(bucket, key, acl, contentType) {\n    return serviceResponse(this, {\n      action: 'signPolicy',\n      args: { bucket, key, acl, contentType }\n    });\n  }\n}\n\nexport default S3Service;\n\n\n\n// WEBPACK FOOTER //\n// ./src/services/aws/s3_service.js","import { serviceResponse } from '../../util';\n\n/**\n * Convenience wrapper around AWS SES service (not meant to be instantiated directly,\n * use `.service('aws-ses', '<service-name>')` on a {@link StitchClient} instance).\n *\n * @class\n * @return {SESService} a SESService instance.\n */\nclass SESService {\n  constructor(stitchClient, serviceName) {\n    this.client = stitchClient;\n    this.serviceName = serviceName;\n  }\n\n  /**\n   * Send an email\n   *\n   * @method\n   * @param {String} fromAddress the email to send from\n   * @param {String} toAddress the email to send to\n   * @param {String} subject the subject of the email\n   * @param {String} body the body of the email\n   * @return {Promise} resolving to an object which contains the single string field\n   *                   \"messageId\", which is the SES message ID for the email message.\n   */\n  send(fromAddress, toAddress, subject, body) {\n    return serviceResponse(this, {\n      action: 'send',\n      args: { fromAddress, toAddress, subject, body }\n    });\n  }\n}\n\nexport default SESService;\n\n\n\n// WEBPACK FOOTER //\n// ./src/services/aws/ses_service.js","import { serviceResponse } from '../../util';\n\n/**\n * Convenience wrapper for HTTP service (not meant to be instantiated directly,\n * use `.service('http', '<service-name>')` on a {@link StitchClient} instance).\n *\n * @class\n * @return {HTTPService} a HTTPService instance.\n */\nclass HTTPService {\n  constructor(client, serviceName) {\n    this.client = client;\n    this.serviceName = serviceName;\n  }\n\n  /**\n   * Send a GET request to a resource (result must be application/json)\n   *\n   * @param {String|Object} urlOrOptions the url to request, or an object of GET args\n   * @param {Object} [options] optional settings for the GET operation\n   * @param {String} [options.authUrl] url that grants a cookie\n   * @return {Promise}\n   */\n  get(urlOrOptions, options = {}) {\n    return buildResponse('get', this, buildArgs(urlOrOptions, options));\n  }\n\n  /**\n   * Send a POST request to a resource with payload\n   *\n   * @param {String|Object} urlOrOptions the url to request, or an object of POST args\n   * @param {Object} [options] optional settings for the POST operation\n   * @param {String} [options.authUrl] url that grants a cookie\n   * @return {Promise}\n   */\n  post(urlOrOptions, options = {}) {\n    return buildResponse('post', this, buildArgs(urlOrOptions, options));\n  }\n\n  /**\n   * Send a PUT request to a resource with payload\n   *\n   * @param {String|Object} urlOrOptions the url to request, or an object of PUT args\n   * @param {Object} [options] optional settings for the PUT operation\n   * @param {String} [options.authUrl] url that grants a cookie\n   * @return {Promise}\n   */\n  put(urlOrOptions, options = {}) {\n    return buildResponse('put', this, buildArgs(urlOrOptions, options));\n  }\n\n  /**\n   * Send a PATCH request to a resource with payload\n   *\n   * @param {String|Object} urlOrOptions the url to request, or an object of PATCH args\n   * @param {Object} [options] optional settings for the PATCH operation\n   * @param {String} [options.authUrl] url that grants a cookie\n   * @return {Promise}\n   */\n  patch(urlOrOptions, options = {}) {\n    return buildResponse('patch', this, buildArgs(urlOrOptions, options));\n  }\n\n  /**\n   * Send a DELETE request to a resource\n   *\n   * @param {String|Object} urlOrOptions the url to request, or an object of DELETE args\n   * @param {Object} [options] optional settings for the DELETE operation\n   * @param {String} [options.authUrl] url that grants a cookie\n   * @return {Promise}\n   */\n  delete(urlOrOptions, options = {}) {\n    return buildResponse('delete', this, buildArgs(urlOrOptions, options));\n  }\n\n  /**\n   * Send a HEAD request to a resource\n   *\n   * @param {String|Object} urlOrOptions the url to request, or an object of HEAD args\n   * @param {Object} [options] optional settings for the HEAD operation\n   * @param {String} [options.authUrl] url that grants a cookie\n   * @return {Promise}\n   */\n  head(urlOrOptions, options = {}) {\n    return buildResponse('head', this, buildArgs(urlOrOptions, options));\n  }\n}\n\nfunction buildArgs(urlOrOptions, options) {\n  let args;\n  if (typeof urlOrOptions !== 'string') {\n    args = urlOrOptions;\n  } else {\n    args = { url: urlOrOptions };\n    if (!!options.authUrl) args.authUrl = options.authUrl;\n  }\n\n  return args;\n}\n\nfunction buildResponse(action, service, args) {\n  return serviceResponse(service, {\n    action,\n    args\n  });\n}\n\nexport default HTTPService;\n\n\n\n// WEBPACK FOOTER //\n// ./src/services/http/http_service.js","import S3Service from './aws/s3_service';\nimport SESService from './aws/ses_service';\nimport HTTPService from './http/http_service';\nimport MongoDBService from './mongodb/mongodb_service';\nimport TwilioService from './twilio/twilio_service';\n\nexport default {\n  'aws-s3': S3Service,\n  'aws-ses': SESService,\n  'aws_s3': S3Service,\n  'aws_ses': SESService,\n  'http': HTTPService,\n  'mongodb': MongoDBService,\n  'twilio': TwilioService\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/services/index.js","import { serviceResponse } from '../../util';\n\n/**\n * Creates a new Collection instance (not meant to be instantiated directly,\n * use `.collection()` on a {@link DB} instance).\n *\n * @class\n * @return {Collection} a Collection instance.\n */\nclass Collection {\n  /**\n   * @hideconstructor\n   */\n  constructor(db, name) {\n    this.db = db;\n    this.name = name;\n  }\n\n  /**\n   * Inserts a single document.\n   *\n   * @method\n   * @param {Object} doc The document to insert.\n   * @return {Promise<Object, Error>} a Promise for the operation.\n   */\n  insertOne(doc) {\n    const args = { document: doc };\n    return buildResponse('insertOne', this, buildArgs(this, args));\n  }\n\n  /**\n   * Inserts multiple documents.\n   *\n   * @method\n   * @param {Array} docs The documents to insert.\n   * @return {Promise<Object, Error>} Returns a Promise for the operation.\n   */\n  insertMany(docs) {\n    const args = { documents: Array.isArray(docs) ? docs : [ docs ] };\n    return buildResponse('insertMany', this, buildArgs(this, args));\n  }\n\n  /**\n   * Deletes a single document.\n   *\n   * @method\n   * @param {Object} query The query used to match a single document.\n   * @return {Promise<Object, Error>} Returns a Promise for the operation.\n   */\n  deleteOne(query) {\n    return buildResponse('deleteOne', this, buildArgs(this, { query }));\n  }\n\n  /**\n   * Deletes all documents matching query.\n   *\n   * @method\n   * @param {Object} query The query used to match the documents to delete.\n   * @return {Promise<Object, Error>} Returns a Promise for the operation.\n   */\n  deleteMany(query) {\n    return buildResponse('deleteMany', this, buildArgs(this, { query }));\n  }\n\n  /**\n   * Updates a single document.\n   *\n   * @method\n   * @param {Object} query The query used to match a single document.\n   * @param {Object} update The update operations to perform on the matching document.\n   * @param {Object} [options] Additional options object.\n   * @param {Boolean} [options.upsert=false] Perform an upsert operation.\n   * @return {Promise<Object, Error>} A Promise for the operation.\n   */\n  updateOne(query, update, options = {}) {\n    return updateOp(this, false, query, update, options);\n  }\n\n  /**\n   * Updates multiple documents.\n   *\n   * @method\n   * @param {Object} query The query used to match the documents.\n   * @param {Object} update The update operations to perform on the matching documents.\n   * @param {Object} [options] Additional options object.\n   * @param {Boolean} [options.upsert=false] Perform an upsert operation.\n   * @return {Promise<Object, Error>} Returns a Promise for the operation.\n   */\n  updateMany(query, update) {\n    return updateOp(this, true, query, update);\n  }\n\n  /**\n   * Finds documents.\n   *\n   * @method\n   * @param {Object} query The query used to match documents.\n   * @param {Object} [project] The query document projection.\n   * @return {MongoQuery} An object which allows for `limit` and `sort` parameters to be set.\n   * `execute` will return a {Promise} for the operation.\n   */\n  find(query, project) {\n    return new MongoQuery(this, query, project);\n  }\n\n  /**\n   * Finds one document.\n   *\n   * @method\n   * @param {Object} query The query used to match documents.\n   * @param {Object} [project] The query document projection.\n   * @return {Promise<Object, Error>} Returns a Promise for the operation\n   */\n  findOne(query, project) {\n    return buildResponse('findOne', this, buildArgs(this, { query, project }));\n  }\n\n  /**\n   * Executes an aggregation pipeline.\n   *\n   * @param {Array} pipeline The aggregation pipeline.\n   * @returns {Array} The results of the aggregation.\n   */\n  aggregate(pipeline) {\n    return aggregateOp(this, pipeline);\n  }\n\n  /**\n   * Gets the number of documents matching the filter.\n   *\n   * @param {Object} query The query used to match documents.\n   * @param {Object} options Additional count options.\n   * @param {Number} [options.limit=null] The maximum number of documents to return.\n   * @return {Number} The results of the count operation.\n   */\n  count(query, options = {}) {\n    let outgoingOptions;\n    if (options.limit) {\n      outgoingOptions = { limit: options.limit };\n    }\n\n    return buildResponse('count', this, buildArgs(this, { count: true, query }, outgoingOptions));\n  }\n}\n\n// private\n\nfunction updateOp(service, isMulti, query, update, options = {}) {\n  const action = isMulti ? 'updateMany' : 'updateOne';\n\n  let outgoingOptions;\n  if (!isMulti && options.upsert) {\n    outgoingOptions = { upsert: true };\n  }\n\n  return buildResponse(action, service, buildArgs(service, { query, update }, outgoingOptions));\n}\n\nfunction findOp({ service, query, project, limit, sort }) {\n  return buildResponse('find', service, buildArgs(service, { query, project, limit, sort }));\n}\n\nfunction aggregateOp(service, pipeline) {\n  return buildResponse('aggregate', service, buildArgs(service, { pipeline }));\n}\n\nfunction buildArgs({ db: { name: database }, name: collection }, args, options = {}) {\n  return Object.assign(\n    { database, collection },\n    args,\n    options\n  );\n}\n\nfunction buildResponse(action, service, args) {\n  return serviceResponse(service.db, {\n    serviceName: service.db.service,\n    action,\n    args\n  });\n}\n\n// mongo query (find) support\n\nfunction MongoQuery(service, query, project) {\n  if (this instanceof MongoQuery) {\n    this.service = service;\n    this.query = query;\n    this.project = project;\n    return this;\n  }\n  return new MongoQuery(service, query, project);\n}\n\nMongoQuery.prototype.limit = function(limit) {\n  this.limit = limit;\n  return this;\n};\n\nMongoQuery.prototype.sort = function(sort) {\n  this.sort = sort;\n  return this;\n};\n\nMongoQuery.prototype.execute = function(resolve) {\n  return findOp(this);\n};\n\nexport default Collection;\n\n\n\n// WEBPACK FOOTER //\n// ./src/services/mongodb/collection.js","import Collection from './collection';\n\n/**\n * Creates a new DB instance (not meant to be instantiated directly, use `.db()` on\n * a {@link MongoDBService} instance).\n * @class\n * @return {DB} a DB instance.\n */\nclass DB {\n  /**\n   * @hideconstructor\n   */\n  constructor(client, service, name) {\n    this.client = client;\n    this.service = service;\n    this.name = name;\n  }\n\n  /**\n   * Returns a Collection instance representing a MongoDB Collection object.\n   *\n   * @method\n   * @param {String} name The collection name.\n   * @param {Object} [options] Additional options.\n   * @return {Collection} returns a Collection instance representing a MongoDb collection.\n   */\n  collection(name, options = {}) {\n    return new Collection(this, name, options);\n  }\n}\n\nexport default DB;\n\n\n\n// WEBPACK FOOTER //\n// ./src/services/mongodb/db.js","import DB from './db';\n\n/**\n * Creates a new MongoDBService instance (not meant to be instantiated directly, use\n * `.service('mongodb', '<service-name>')` on a {@link StitchClient} instance.\n *\n * @class\n * @return {MongoDBService} a MongoDBService instance.\n */\nclass MongoDBService {\n  /**\n   * @hideconstructor\n   */\n  constructor(stitchClient, serviceName) {\n    this.stitchClient = stitchClient;\n    this.serviceName = serviceName;\n  }\n\n  /**\n   * Get a DB instance\n   *\n   * @method\n   * @param {String} databaseName The MongoDB database name\n   * @param {Object} [options] Additional options.\n   * @return {DB} returns a DB instance representing a MongoDB database.\n   */\n  db(databaseName, options = {}) {\n    return new DB(this.stitchClient, this.serviceName, databaseName);\n  }\n}\n\n\nexport default MongoDBService;\n\n\n\n// WEBPACK FOOTER //\n// ./src/services/mongodb/mongodb_service.js","import { serviceResponse } from '../../util';\n\n/**\n * Create a new TwilioService instance (not meant to be instantiated directly,\n * use `.service('twilio', '<service-name>')` on a {@link StitchClient} instance).\n *\n * @class\n * @return {TwilioService} a TwilioService instance.\n */\nclass TwilioService {\n  constructor(stitchClient, serviceName) {\n    this.client = stitchClient;\n    this.serviceName = serviceName;\n  }\n\n  /**\n   * Send a text message to a number\n   *\n   * @method\n   * @param {String} from number to send from\n   * @param {String} to number to send to\n   * @param {String} body SMS body content\n   * @return {Promise} which resolves to 'null' when message is sent successfully,\n   *                   or is rejected when there is an error\n   */\n  send(from, to, body) {\n    return serviceResponse(this, {\n      action: 'send',\n      args: { from, to, body }\n    });\n  }\n}\n\nexport default TwilioService;\n\n\n\n// WEBPACK FOOTER //\n// ./src/services/twilio/twilio_service.js","'use strict';\n\n/**\n * Module dependencies.\n * @ignore\n */\nfunction convert(integer) {\n  var str = Number(integer).toString(16);\n  return str.length === 1 ? '0' + str : str;\n}\n\nfunction toExtendedJSON(obj) {\n  var base64String = Buffer.isBuffer(obj.buffer)\n    ? obj.buffer.toString('base64')\n    : Buffer.from(obj.buffer).toString('base64');\n\n  return {\n    $binary: {\n      base64: base64String,\n      subType: convert(obj.sub_type)\n    }\n  };\n}\n\nfunction fromExtendedJSON(BSON, doc) {\n  var type = doc.$binary.subType ? parseInt(doc.$binary.subType, 16) : 0;\n\n  var data = new Buffer(doc.$binary.base64, 'base64');\n\n  return new BSON.Binary(data, type);\n}\n\nmodule.exports = {\n  toExtendedJSON: toExtendedJSON,\n  fromExtendedJSON: fromExtendedJSON\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/mongodb-extjson/lib/bson/binary.js","'use strict';\n\nfunction toExtendedJSON(obj) {\n  if (obj.scope) {\n    return { $code: obj.code, $scope: obj.scope };\n  }\n\n  return { $code: obj.code };\n}\n\nfunction fromExtendedJSON(BSON, doc) {\n  return new BSON.Code(doc.$code, doc.$scope);\n}\n\nmodule.exports = {\n  toExtendedJSON: toExtendedJSON,\n  fromExtendedJSON: fromExtendedJSON\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/mongodb-extjson/lib/bson/code.js","'use strict';\n\nfunction toExtendedJSON(obj) {\n  var o = {\n    $ref: obj.collection,\n    $id: obj.oid\n  };\n  if (obj.db) o.$db = obj.db;\n  o = Object.assign(o, obj.fields);\n  return o;\n}\n\nfunction fromExtendedJSON(BSON, doc) {\n  var copy = Object.assign({}, doc);\n  ['$ref', '$id', '$db'].forEach(k => delete copy[k]);\n  return new BSON.DBRef(doc.$ref, doc.$id, doc.$db, copy);\n}\n\nmodule.exports = {\n  toExtendedJSON: toExtendedJSON,\n  fromExtendedJSON: fromExtendedJSON\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/mongodb-extjson/lib/bson/db_ref.js","'use strict';\n\nfunction toExtendedJSON(obj) {\n  return { $numberDecimal: obj.toString() };\n}\n\nfunction fromExtendedJSON(BSON, doc) {\n  return new BSON.Decimal128.fromString(doc.$numberDecimal);\n}\n\nmodule.exports = {\n  toExtendedJSON: toExtendedJSON,\n  fromExtendedJSON: fromExtendedJSON\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/mongodb-extjson/lib/bson/decimal128.js","'use strict';\n\nfunction toExtendedJSON(obj, options) {\n  if (options && options.relaxed && isFinite(obj.value)) return obj.value;\n  return { $numberDouble: obj.value.toString() };\n}\n\nfunction fromExtendedJSON(BSON, doc, options) {\n  return options && options.relaxed\n    ? parseFloat(doc.$numberDouble)\n    : new BSON.Double(parseFloat(doc.$numberDouble));\n}\n\nmodule.exports = {\n  toExtendedJSON: toExtendedJSON,\n  fromExtendedJSON: fromExtendedJSON\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/mongodb-extjson/lib/bson/double.js","'use strict';\n\nvar Binary = require('./binary');\nvar Code = require('./code');\nvar DBRef = require('./db_ref');\nvar Decimal128 = require('./decimal128');\nvar Double = require('./double');\nvar Int32 = require('./int_32');\nvar Long = require('./long');\nvar MaxKey = require('./max_key');\nvar MinKey = require('./min_key');\nvar ObjectID = require('./objectid');\nvar BSONRegExp = require('./regexp');\nvar Symbol = require('./symbol');\nvar Timestamp = require('./timestamp');\n\nmodule.exports = {\n  Binary: Binary,\n  Code: Code,\n  DBRef: DBRef,\n  Decimal128: Decimal128,\n  Double: Double,\n  Int32: Int32,\n  Long: Long,\n  MaxKey: MaxKey,\n  MinKey: MinKey,\n  ObjectID: ObjectID,\n  BSONRegExp: BSONRegExp,\n  Symbol: Symbol,\n  Timestamp: Timestamp\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/mongodb-extjson/lib/bson/index.js","'use strict';\n\nfunction toExtendedJSON(obj, options) {\n  if (options && options.relaxed) return obj.value;\n  return { $numberInt: obj.value.toString() };\n}\n\nfunction fromExtendedJSON(BSON, doc, options) {\n  return options && options.relaxed ? parseInt(doc.$numberInt, 10) : new BSON.Int32(doc.$numberInt);\n}\n\nmodule.exports = {\n  toExtendedJSON: toExtendedJSON,\n  fromExtendedJSON: fromExtendedJSON\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/mongodb-extjson/lib/bson/int_32.js","'use strict';\n\nfunction toExtendedJSON(obj, options) {\n  if (options && options.relaxed) return obj.toNumber();\n  return { $numberLong: obj.toString() };\n}\n\nfunction fromExtendedJSON(BSON, doc, options) {\n  const result = BSON.Long.fromString(doc.$numberLong);\n  return options && options.relaxed ? result.toNumber() : result;\n}\n\nmodule.exports = {\n  toExtendedJSON: toExtendedJSON,\n  fromExtendedJSON: fromExtendedJSON\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/mongodb-extjson/lib/bson/long.js","'use strict';\n\nfunction toExtendedJSON() {\n  return { $maxKey: 1 };\n}\n\nfunction fromExtendedJSON(BSON) {\n  return new BSON.MaxKey();\n}\n\nmodule.exports = {\n  toExtendedJSON: toExtendedJSON,\n  fromExtendedJSON: fromExtendedJSON\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/mongodb-extjson/lib/bson/max_key.js","'use strict';\n\nfunction toExtendedJSON() {\n  return { $minKey: 1 };\n}\n\nfunction fromExtendedJSON(BSON) {\n  return new BSON.MinKey();\n}\n\nmodule.exports = {\n  toExtendedJSON: toExtendedJSON,\n  fromExtendedJSON: fromExtendedJSON\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/mongodb-extjson/lib/bson/min_key.js","'use strict';\n\nfunction toExtendedJSON(obj) {\n  if (obj.toHexString) return { $oid: obj.toHexString() };\n  return { $oid: obj.toString('hex') };\n}\n\nfunction fromExtendedJSON(BSON, doc) {\n  return new BSON.ObjectID(doc.$oid);\n}\n\nmodule.exports = {\n  toExtendedJSON: toExtendedJSON,\n  fromExtendedJSON: fromExtendedJSON\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/mongodb-extjson/lib/bson/objectid.js","'use strict';\n\nfunction toExtendedJSON(obj) {\n  return { $regularExpression: { pattern: obj.pattern, options: obj.options } };\n}\n\nfunction fromExtendedJSON(BSON, doc) {\n  return new BSON.BSONRegExp(\n    doc.$regularExpression.pattern,\n    doc.$regularExpression.options\n      .split('')\n      .sort()\n      .join('')\n  );\n}\n\nmodule.exports = {\n  toExtendedJSON: toExtendedJSON,\n  fromExtendedJSON: fromExtendedJSON\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/mongodb-extjson/lib/bson/regexp.js","'use strict';\n\nfunction toExtendedJSON(obj) {\n  return { $symbol: obj.value };\n}\n\nfunction fromExtendedJSON(BSON, doc) {\n  return new BSON.Symbol(doc.$symbol);\n}\n\nmodule.exports = {\n  toExtendedJSON: toExtendedJSON,\n  fromExtendedJSON: fromExtendedJSON\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/mongodb-extjson/lib/bson/symbol.js","'use strict';\n\nfunction toExtendedJSON(obj) {\n  return {\n    $timestamp: {\n      t: obj.high_,\n      i: obj.low_\n    }\n  };\n}\n\nfunction fromExtendedJSON(BSON, doc) {\n  return new BSON.Timestamp(doc.$timestamp.i, doc.$timestamp.t);\n}\n\nmodule.exports = {\n  toExtendedJSON: toExtendedJSON,\n  fromExtendedJSON: fromExtendedJSON\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/mongodb-extjson/lib/bson/timestamp.js","'use strict';\n\nlet codecs = require('./bson'),\n  BSON = require('bson');\n\nvar BSONTypes = [\n  'Binary',\n  'Code',\n  'DBRef',\n  'Decimal128',\n  'Double',\n  'Int32',\n  'Long',\n  'MaxKey',\n  'MinKey',\n  'ObjectID',\n  'BSONRegExp',\n  'Symbol',\n  'Timestamp'\n];\n\nsetBSONModule(BSON);\n\n// all the types where we don't need to do any special processing and can just pass the EJSON\n//straight to type.fromExtendedJSON\nvar keysToCodecs = {\n  $oid: codecs.ObjectID,\n  $binary: codecs.Binary,\n  $symbol: codecs.Symbol,\n  $numberInt: codecs.Int32,\n  $numberDecimal: codecs.Decimal128,\n  $numberDouble: codecs.Double,\n  $numberLong: codecs.Long,\n  $minKey: codecs.MinKey,\n  $maxKey: codecs.MaxKey,\n  $regularExpression: codecs.BSONRegExp,\n  $timestamp: codecs.Timestamp\n};\n\nfunction setBSONModule(module) {\n  BSONTypes.forEach(t => {\n    if (!module[t]) throw new Error('passed in module does not contain all BSON types required');\n  });\n  BSON = module;\n}\n\nfunction deserializeValue(self, key, value, options) {\n  if (typeof value === 'number') {\n    // if it's an integer, should interpret as smallest BSON integer\n    // that can represent it exactly. (if out of range, interpret as double.)\n    if (Math.floor(value) === value) {\n      let int32Range = value >= BSON_INT32_MIN && value <= BSON_INT32_MAX,\n        int64Range = value >= BSON_INT64_MIN && value <= BSON_INT64_MAX;\n\n      if (int32Range) return options.strict ? new BSON.Int32(value) : value;\n      if (int64Range) return options.strict ? new BSON.Long.fromNumber(value) : value;\n    }\n    // If the number is a non-integer or out of integer range, should interpret as BSON Double.\n    return new BSON.Double(value);\n  }\n\n  // from here on out we're looking for bson types, so bail if its not an object\n  if (value == null || typeof value !== 'object') return value;\n\n  // upgrade deprecated undefined to null\n  if (value.$undefined) return null;\n\n  var keys = Object.keys(value).filter(k => k.startsWith('$') && value[k] != null);\n  for (let i = 0; i < keys.length; i++) {\n    let c = keysToCodecs[keys[i]];\n    if (c) return c.fromExtendedJSON(BSON, value, options);\n  }\n\n  if (value.$date != null) {\n    let d = value.$date,\n      date = new Date();\n\n    if (typeof d === 'string') date.setTime(Date.parse(d));\n    else if (d instanceof BSON.Long) date.setTime(d.toNumber());\n    else if (typeof d === 'number' && options.relaxed) date.setTime(d);\n    return date;\n  }\n\n  if (value.$code != null) {\n    if (value.$scope) var scope = deserializeValue(self, null, value.$scope);\n    let copy = Object.assign({}, value);\n    copy.$scope = scope;\n    return codecs.Code.fromExtendedJSON(BSON, value);\n  }\n\n  if (value.$ref != null || value.$dbPointer != null) {\n    let v = value.$ref ? value : value.$dbPointer;\n\n    // we run into this in a \"degenerate EJSON\" case (with $id and $ref order flipped)\n    // because of the order JSON.parse goes through the document\n    if (v instanceof BSON.DBRef) return v;\n\n    let dollarKeys = Object.keys(v).filter(k => k.startsWith('$')),\n      valid = true;\n    dollarKeys.forEach(k => {\n      if (['$ref', '$id', '$db'].indexOf(k) === -1) valid = false;\n    });\n\n    // only make DBRef if $ keys are all valid\n    if (valid) return codecs.DBRef.fromExtendedJSON(BSON, v);\n  }\n\n  return value;\n}\n\nconst parse = function(text, options) {\n  var self = this;\n  options = options || { relaxed: false };\n\n  // relaxed implies not strict\n  if (typeof options.relaxed === 'boolean') options.strict = !options.relaxed;\n  if (typeof options.strict === 'boolean') options.relaxed = !options.strict;\n\n  return JSON.parse(text, function(key, value) {\n    return deserializeValue(self, key, value, options);\n  });\n};\n\n//\n// Serializer\n//\n\n// MAX INT32 boundaries\nconst BSON_INT32_MAX = 0x7fffffff,\n  BSON_INT32_MIN = -0x80000000,\n  BSON_INT64_MAX = 0x7fffffffffffffff,\n  BSON_INT64_MIN = -0x8000000000000000;\n\nconst stringify = function(value, reducer, indents, options) {\n  var opts = {};\n  if (options != null && typeof options === 'object') opts = options;\n  else if (indents != null && typeof indents === 'object') {\n    opts = indents;\n    indents = 0;\n  } else if (reducer != null && typeof reducer === 'object') {\n    opts = reducer;\n    reducer = null;\n  }\n\n  var doc = Array.isArray(value) ? serializeArray(value, opts) : serializeDocument(value, opts);\n  return JSON.stringify(doc, reducer, indents);\n};\n\nfunction serializeArray(array, options) {\n  return array.map(v => serializeValue(v, options));\n}\n\nfunction getISOString(date) {\n  var isoStr = date.toISOString();\n  // we should only show milliseconds in timestamp if they're non-zero\n  return date.getUTCMilliseconds() !== 0 ? isoStr : isoStr.slice(0, -5) + 'Z';\n}\n\nfunction serializeValue(value, options) {\n  if (Array.isArray(value)) return serializeArray(value, options);\n\n  if (value === undefined) return null;\n\n  if (value instanceof Date) {\n    let dateNum = value.getTime(),\n      // is it in year range 1970-9999?\n      inRange = dateNum > -1 && dateNum < 253402318800000;\n\n    return options.relaxed && inRange\n      ? { $date: getISOString(value) }\n      : { $date: { $numberLong: value.getTime().toString() } };\n  }\n\n  if (typeof value === 'number' && !options.relaxed) {\n    // it's an integer\n    if (Math.floor(value) === value) {\n      let int32Range = value >= BSON_INT32_MIN && value <= BSON_INT32_MAX,\n        int64Range = value >= BSON_INT64_MIN && value <= BSON_INT64_MAX;\n\n      // interpret as being of the smallest BSON integer type that can represent the number exactly\n      if (int32Range) return { $numberInt: value.toString() };\n      if (int64Range) return { $numberLong: value.toString() };\n    }\n    return { $numberDouble: value.toString() };\n  }\n\n  if (value != null && typeof value === 'object') return serializeDocument(value, options);\n  return value;\n}\n\nfunction serializeDocument(doc, options) {\n  if (doc == null || typeof doc !== 'object') throw new Error('not an object instance');\n\n  // the document itself is a BSON type\n  if (doc._bsontype && BSONTypes.indexOf(doc._bsontype) !== -1) {\n    // we need to separately serialize the embedded scope document\n    if (doc._bsontype === 'Code' && doc.scope) {\n      let tempScope = serializeDocument(doc.scope, options),\n        tempDoc = Object.assign({}, doc, { scope: tempScope });\n      return codecs['Code'].toExtendedJSON(tempDoc, options);\n      // we need to separately serialize the embedded OID document\n    } else if (doc._bsontype === 'DBRef' && doc.oid) {\n      let tempId = serializeDocument(doc.oid, options),\n        tempDoc = Object.assign({}, doc, { oid: tempId });\n      return codecs['DBRef'].toExtendedJSON(tempDoc, options);\n    }\n    return codecs[doc._bsontype].toExtendedJSON(doc, options);\n  }\n\n  // the document is an object with nested BSON types\n  var _doc = {};\n  for (var name in doc) {\n    let val = doc[name];\n    if (Array.isArray(val)) {\n      _doc[name] = serializeArray(val, options);\n    } else if (val != null && val._bsontype && BSONTypes.indexOf(val._bsontype) !== -1) {\n      // we need to separately serialize the embedded scope document\n      if (val._bsontype === 'Code' && val.scope) {\n        let tempScope = serializeDocument(val.scope, options),\n          tempVal = Object.assign({}, val, { scope: tempScope });\n        _doc[name] = codecs['Code'].toExtendedJSON(tempVal, options);\n        // we need to separately serialize the embedded OID document\n      } else if (val._bsontype === 'DBRef' && val.oid) {\n        let tempId = serializeDocument(val.oid, options),\n          tempVal = Object.assign({}, val, { oid: tempId });\n        _doc[name] = codecs['DBRef'].toExtendedJSON(tempVal, options);\n      } else _doc[name] = codecs[val._bsontype].toExtendedJSON(val, options);\n    } else if (val instanceof Date) {\n      _doc[name] = serializeValue(val, options);\n    } else if (val != null && typeof val === 'object') {\n      _doc[name] = serializeDocument(val, options);\n    }\n    _doc[name] = serializeValue(val, options);\n    if (val instanceof RegExp) {\n      let flags = val.flags;\n      if (flags === undefined) {\n        flags = val.toString().match(/[gimuy]*$/)[0];\n      }\n      _doc[name] = codecs['BSONRegExp'].toExtendedJSON({ pattern: val.source, options: flags });\n    }\n  }\n\n  return _doc;\n}\n\nmodule.exports = {\n  parse: parse,\n  stringify: stringify,\n  setBSONModule: setBSONModule,\n  BSON: BSON\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/mongodb-extjson/lib/ext_json.js","'use strict'\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\n// Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction placeHoldersCount (b64) {\n  var len = b64.length\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // the number of equal signs (place holders)\n  // if there are two placeholders, than the two characters before it\n  // represent one byte\n  // if there is only one, then the three characters before it represent 2 bytes\n  // this is just a cheap hack to not do indexOf twice\n  return b64[len - 2] === '=' ? 2 : b64[len - 1] === '=' ? 1 : 0\n}\n\nfunction byteLength (b64) {\n  // base64 is 4/3 + up to two characters of the original data\n  return (b64.length * 3 / 4) - placeHoldersCount(b64)\n}\n\nfunction toByteArray (b64) {\n  var i, l, tmp, placeHolders, arr\n  var len = b64.length\n  placeHolders = placeHoldersCount(b64)\n\n  arr = new Arr((len * 3 / 4) - placeHolders)\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  l = placeHolders > 0 ? len - 4 : len\n\n  var L = 0\n\n  for (i = 0; i < l; i += 4) {\n    tmp = (revLookup[b64.charCodeAt(i)] << 18) | (revLookup[b64.charCodeAt(i + 1)] << 12) | (revLookup[b64.charCodeAt(i + 2)] << 6) | revLookup[b64.charCodeAt(i + 3)]\n    arr[L++] = (tmp >> 16) & 0xFF\n    arr[L++] = (tmp >> 8) & 0xFF\n    arr[L++] = tmp & 0xFF\n  }\n\n  if (placeHolders === 2) {\n    tmp = (revLookup[b64.charCodeAt(i)] << 2) | (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[L++] = tmp & 0xFF\n  } else if (placeHolders === 1) {\n    tmp = (revLookup[b64.charCodeAt(i)] << 10) | (revLookup[b64.charCodeAt(i + 1)] << 4) | (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[L++] = (tmp >> 8) & 0xFF\n    arr[L++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] + lookup[num >> 12 & 0x3F] + lookup[num >> 6 & 0x3F] + lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp = ((uint8[i] << 16) & 0xFF0000) + ((uint8[i + 1] << 8) & 0xFF00) + (uint8[i + 2] & 0xFF)\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var output = ''\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    output += lookup[tmp >> 2]\n    output += lookup[(tmp << 4) & 0x3F]\n    output += '=='\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + (uint8[len - 1])\n    output += lookup[tmp >> 10]\n    output += lookup[(tmp >> 4) & 0x3F]\n    output += lookup[(tmp << 2) & 0x3F]\n    output += '='\n  }\n\n  parts.push(output)\n\n  return parts.join('')\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/base64-js/index.js\n// module id = 39\n// module chunks = 0","var detectBrowser = require('./lib/detectBrowser');\n\nvar agent;\n\nif (typeof navigator !== 'undefined' && navigator) {\n  agent = navigator.userAgent;\n}\n\nmodule.exports = detectBrowser(agent);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/detect-browser/browser.js\n// module id = 40\n// module chunks = 0","var detectOS = require('./detectOS.js');\n\nmodule.exports = function detectBrowser(userAgentString) {\n  if (!userAgentString) return null;\n\n  var browsers = [\n    [ 'edge', /Edge\\/([0-9\\._]+)/ ],\n    [ 'yandexbrowser', /YaBrowser\\/([0-9\\._]+)/ ],\n    [ 'vivaldi', /Vivaldi\\/([0-9\\.]+)/ ],\n    [ 'kakaotalk', /KAKAOTALK\\s([0-9\\.]+)/ ],\n    [ 'chrome', /(?!Chrom.*OPR)Chrom(?:e|ium)\\/([0-9\\.]+)(:?\\s|$)/ ],\n    [ 'phantomjs', /PhantomJS\\/([0-9\\.]+)(:?\\s|$)/ ],\n    [ 'crios', /CriOS\\/([0-9\\.]+)(:?\\s|$)/ ],\n    [ 'firefox', /Firefox\\/([0-9\\.]+)(?:\\s|$)/ ],\n    [ 'fxios', /FxiOS\\/([0-9\\.]+)/ ],\n    [ 'opera', /Opera\\/([0-9\\.]+)(?:\\s|$)/ ],\n    [ 'opera', /OPR\\/([0-9\\.]+)(:?\\s|$)$/ ],\n    [ 'ie', /Trident\\/7\\.0.*rv\\:([0-9\\.]+).*\\).*Gecko$/ ],\n    [ 'ie', /MSIE\\s([0-9\\.]+);.*Trident\\/[4-7].0/ ],\n    [ 'ie', /MSIE\\s(7\\.0)/ ],\n    [ 'bb10', /BB10;\\sTouch.*Version\\/([0-9\\.]+)/ ],\n    [ 'android', /Android\\s([0-9\\.]+)/ ],\n    [ 'ios', /Version\\/([0-9\\._]+).*Mobile.*Safari.*/ ],\n    [ 'safari', /Version\\/([0-9\\._]+).*Safari/ ]\n  ];\n\n  return browsers.map(function (rule) {\n      if (rule[1].test(userAgentString)) {\n          var match = rule[1].exec(userAgentString);\n          var version = match && match[1].split(/[._]/).slice(0,3);\n\n          if (version && version.length < 3) {\n              Array.prototype.push.apply(version, (version.length == 1) ? [0, 0] : [0]);\n          }\n\n          return {\n              name: rule[0],\n              version: version.join('.'),\n              os: detectOS(userAgentString)\n          };\n      }\n  }).filter(Boolean).shift();\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/detect-browser/lib/detectBrowser.js\n// module id = 41\n// module chunks = 0","module.exports = function detectOS(userAgentString) {\n  var operatingSystems = [\n    {\n      name: 'iOS',\n      rule: /iP(hone|od|ad)/\n    },\n    {\n      name: 'Android OS',\n      rule: /Android/\n    },\n    {\n      name: 'BlackBerry OS',\n      rule: /BlackBerry|BB10/\n    },\n    {\n      name: 'Windows Mobile',\n      rule: /IEMobile/\n    },\n    {\n      name: 'Amazon OS',\n      rule: /Kindle/\n    },\n    {\n      name: 'Windows 3.11',\n      rule: /Win16/\n    },\n    {\n      name: 'Windows 95',\n      rule: /(Windows 95)|(Win95)|(Windows_95)/\n    },\n    {\n      name: 'Windows 98',\n      rule: /(Windows 98)|(Win98)/\n    },\n    {\n      name: 'Windows 2000',\n      rule: /(Windows NT 5.0)|(Windows 2000)/\n    },\n    {\n      name: 'Windows XP',\n      rule: /(Windows NT 5.1)|(Windows XP)/\n    },\n    {\n      name: 'Windows Server 2003',\n      rule: /(Windows NT 5.2)/\n    },\n    {\n      name: 'Windows Vista',\n      rule: /(Windows NT 6.0)/\n    },\n    {\n      name: 'Windows 7',\n      rule: /(Windows NT 6.1)/\n    },\n    {\n      name: 'Windows 8',\n      rule: /(Windows NT 6.2)/\n    },\n    {\n      name: 'Windows 8.1',\n      rule: /(Windows NT 6.3)/\n    },\n    {\n      name: 'Windows 10',\n      rule: /(Windows NT 10.0)/\n    },\n    {\n      name: 'Windows ME',\n      rule: /Windows ME/\n    },\n    {\n      name: 'Open BSD',\n      rule: /OpenBSD/\n    },\n    {\n      name: 'Sun OS',\n      rule: /SunOS/\n    },\n    {\n      name: 'Linux',\n      rule: /(Linux)|(X11)/\n    },\n    {\n      name: 'Mac OS',\n      rule: /(Mac_PowerPC)|(Macintosh)/\n    },\n    {\n      name: 'QNX',\n      rule: /QNX/\n    },\n    {\n      name: 'BeOS',\n      rule: /BeOS/\n    },\n    {\n      name: 'OS/2',\n      rule: /OS\\/2/\n    },\n    {\n      name: 'Search Bot',\n      rule: /(nuhk)|(Googlebot)|(Yammybot)|(Openbot)|(Slurp)|(MSNBot)|(Ask Jeeves\\/Teoma)|(ia_archiver)/\n    }\n  ];\n\n  var detected = operatingSystems.filter(function (os) {\n    if (userAgentString.match(os.rule)) {\n      return true;\n    }\n  });\n\n  return detected && detected[0] ? detected[0].name : null;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/detect-browser/lib/detectOS.js\n// module id = 42\n// module chunks = 0","exports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = nBytes * 8 - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = e * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = m * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = nBytes * 8 - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = (value * c - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/ieee754/index.js\n// module id = 43\n// module chunks = 0","var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/isarray/index.js\n// module id = 44\n// module chunks = 0","/**\n * The code was extracted from:\n * https://github.com/davidchambers/Base64.js\n */\n\nvar chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\n\nfunction InvalidCharacterError(message) {\n  this.message = message;\n}\n\nInvalidCharacterError.prototype = new Error();\nInvalidCharacterError.prototype.name = 'InvalidCharacterError';\n\nfunction polyfill (input) {\n  var str = String(input).replace(/=+$/, '');\n  if (str.length % 4 == 1) {\n    throw new InvalidCharacterError(\"'atob' failed: The string to be decoded is not correctly encoded.\");\n  }\n  for (\n    // initialize result and counters\n    var bc = 0, bs, buffer, idx = 0, output = '';\n    // get next character\n    buffer = str.charAt(idx++);\n    // character found in table? initialize bit storage and add its ascii value;\n    ~buffer && (bs = bc % 4 ? bs * 64 + buffer : buffer,\n      // and if not first of each 4 characters,\n      // convert the first 8 bits to one ascii character\n      bc++ % 4) ? output += String.fromCharCode(255 & bs >> (-2 * bc & 6)) : 0\n  ) {\n    // try to find character in table (0-63, not found => -1)\n    buffer = chars.indexOf(buffer);\n  }\n  return output;\n}\n\n\nmodule.exports = typeof window !== 'undefined' && window.atob && window.atob.bind(window) || polyfill;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/jwt-decode/lib/atob.js\n// module id = 45\n// module chunks = 0","var atob = require('./atob');\n\nfunction b64DecodeUnicode(str) {\n  return decodeURIComponent(atob(str).replace(/(.)/g, function (m, p) {\n    var code = p.charCodeAt(0).toString(16).toUpperCase();\n    if (code.length < 2) {\n      code = '0' + code;\n    }\n    return '%' + code;\n  }));\n}\n\nmodule.exports = function(str) {\n  var output = str.replace(/-/g, \"+\").replace(/_/g, \"/\");\n  switch (output.length % 4) {\n    case 0:\n      break;\n    case 2:\n      output += \"==\";\n      break;\n    case 3:\n      output += \"=\";\n      break;\n    default:\n      throw \"Illegal base64url string!\";\n  }\n\n  try{\n    return b64DecodeUnicode(output);\n  } catch (err) {\n    return atob(output);\n  }\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/jwt-decode/lib/base64_url_decode.js\n// module id = 46\n// module chunks = 0","'use strict';\n\nvar base64_url_decode = require('./base64_url_decode');\n\nfunction InvalidTokenError(message) {\n  this.message = message;\n}\n\nInvalidTokenError.prototype = new Error();\nInvalidTokenError.prototype.name = 'InvalidTokenError';\n\nmodule.exports = function (token,options) {\n  if (typeof token !== 'string') {\n    throw new InvalidTokenError('Invalid token specified');\n  }\n\n  options = options || {};\n  var pos = options.header === true ? 0 : 1;\n  try {\n    return JSON.parse(base64_url_decode(token.split('.')[pos]));\n  } catch (e) {\n    throw new InvalidTokenError('Invalid token specified: ' + e.message);\n  }\n};\n\nmodule.exports.InvalidTokenError = InvalidTokenError;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/jwt-decode/lib/index.js\n// module id = 47\n// module chunks = 0","/*\nobject-assign\n(c) Sindre Sorhus\n@license MIT\n*/\n\n'use strict';\n/* eslint-disable no-unused-vars */\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction shouldUseNative() {\n\ttry {\n\t\tif (!Object.assign) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Detect buggy property enumeration order in older V8 versions.\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\tvar test1 = new String('abc');  // eslint-disable-line no-new-wrappers\n\t\ttest1[5] = 'de';\n\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test2 = {};\n\t\tfor (var i = 0; i < 10; i++) {\n\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t}\n\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\treturn test2[n];\n\t\t});\n\t\tif (order2.join('') !== '0123456789') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test3 = {};\n\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\ttest3[letter] = letter;\n\t\t});\n\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t} catch (err) {\n\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\treturn false;\n\t}\n}\n\nmodule.exports = shouldUseNative() ? Object.assign : function (target, source) {\n\tvar from;\n\tvar to = toObject(target);\n\tvar symbols;\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tfrom = Object(arguments[s]);\n\n\t\tfor (var key in from) {\n\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\tto[key] = from[key];\n\t\t\t}\n\t\t}\n\n\t\tif (getOwnPropertySymbols) {\n\t\t\tsymbols = getOwnPropertySymbols(from);\n\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/object-assign/index.js\n// module id = 48\n// module chunks = 0","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/process/browser.js\n// module id = 49\n// module chunks = 0","'use strict';\nvar strictUriEncode = require('strict-uri-encode');\nvar objectAssign = require('object-assign');\n\nfunction encoderForArrayFormat(opts) {\n\tswitch (opts.arrayFormat) {\n\t\tcase 'index':\n\t\t\treturn function (key, value, index) {\n\t\t\t\treturn value === null ? [\n\t\t\t\t\tencode(key, opts),\n\t\t\t\t\t'[',\n\t\t\t\t\tindex,\n\t\t\t\t\t']'\n\t\t\t\t].join('') : [\n\t\t\t\t\tencode(key, opts),\n\t\t\t\t\t'[',\n\t\t\t\t\tencode(index, opts),\n\t\t\t\t\t']=',\n\t\t\t\t\tencode(value, opts)\n\t\t\t\t].join('');\n\t\t\t};\n\n\t\tcase 'bracket':\n\t\t\treturn function (key, value) {\n\t\t\t\treturn value === null ? encode(key, opts) : [\n\t\t\t\t\tencode(key, opts),\n\t\t\t\t\t'[]=',\n\t\t\t\t\tencode(value, opts)\n\t\t\t\t].join('');\n\t\t\t};\n\n\t\tdefault:\n\t\t\treturn function (key, value) {\n\t\t\t\treturn value === null ? encode(key, opts) : [\n\t\t\t\t\tencode(key, opts),\n\t\t\t\t\t'=',\n\t\t\t\t\tencode(value, opts)\n\t\t\t\t].join('');\n\t\t\t};\n\t}\n}\n\nfunction parserForArrayFormat(opts) {\n\tvar result;\n\n\tswitch (opts.arrayFormat) {\n\t\tcase 'index':\n\t\t\treturn function (key, value, accumulator) {\n\t\t\t\tresult = /\\[(\\d*)\\]$/.exec(key);\n\n\t\t\t\tkey = key.replace(/\\[\\d*\\]$/, '');\n\n\t\t\t\tif (!result) {\n\t\t\t\t\taccumulator[key] = value;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (accumulator[key] === undefined) {\n\t\t\t\t\taccumulator[key] = {};\n\t\t\t\t}\n\n\t\t\t\taccumulator[key][result[1]] = value;\n\t\t\t};\n\n\t\tcase 'bracket':\n\t\t\treturn function (key, value, accumulator) {\n\t\t\t\tresult = /(\\[\\])$/.exec(key);\n\t\t\t\tkey = key.replace(/\\[\\]$/, '');\n\n\t\t\t\tif (!result) {\n\t\t\t\t\taccumulator[key] = value;\n\t\t\t\t\treturn;\n\t\t\t\t} else if (accumulator[key] === undefined) {\n\t\t\t\t\taccumulator[key] = [value];\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\taccumulator[key] = [].concat(accumulator[key], value);\n\t\t\t};\n\n\t\tdefault:\n\t\t\treturn function (key, value, accumulator) {\n\t\t\t\tif (accumulator[key] === undefined) {\n\t\t\t\t\taccumulator[key] = value;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\taccumulator[key] = [].concat(accumulator[key], value);\n\t\t\t};\n\t}\n}\n\nfunction encode(value, opts) {\n\tif (opts.encode) {\n\t\treturn opts.strict ? strictUriEncode(value) : encodeURIComponent(value);\n\t}\n\n\treturn value;\n}\n\nfunction keysSorter(input) {\n\tif (Array.isArray(input)) {\n\t\treturn input.sort();\n\t} else if (typeof input === 'object') {\n\t\treturn keysSorter(Object.keys(input)).sort(function (a, b) {\n\t\t\treturn Number(a) - Number(b);\n\t\t}).map(function (key) {\n\t\t\treturn input[key];\n\t\t});\n\t}\n\n\treturn input;\n}\n\nexports.extract = function (str) {\n\treturn str.split('?')[1] || '';\n};\n\nexports.parse = function (str, opts) {\n\topts = objectAssign({arrayFormat: 'none'}, opts);\n\n\tvar formatter = parserForArrayFormat(opts);\n\n\t// Create an object with no prototype\n\t// https://github.com/sindresorhus/query-string/issues/47\n\tvar ret = Object.create(null);\n\n\tif (typeof str !== 'string') {\n\t\treturn ret;\n\t}\n\n\tstr = str.trim().replace(/^(\\?|#|&)/, '');\n\n\tif (!str) {\n\t\treturn ret;\n\t}\n\n\tstr.split('&').forEach(function (param) {\n\t\tvar parts = param.replace(/\\+/g, ' ').split('=');\n\t\t// Firefox (pre 40) decodes `%3D` to `=`\n\t\t// https://github.com/sindresorhus/query-string/pull/37\n\t\tvar key = parts.shift();\n\t\tvar val = parts.length > 0 ? parts.join('=') : undefined;\n\n\t\t// missing `=` should be `null`:\n\t\t// http://w3.org/TR/2012/WD-url-20120524/#collect-url-parameters\n\t\tval = val === undefined ? null : decodeURIComponent(val);\n\n\t\tformatter(decodeURIComponent(key), val, ret);\n\t});\n\n\treturn Object.keys(ret).sort().reduce(function (result, key) {\n\t\tvar val = ret[key];\n\t\tif (Boolean(val) && typeof val === 'object' && !Array.isArray(val)) {\n\t\t\t// Sort object keys, not values\n\t\t\tresult[key] = keysSorter(val);\n\t\t} else {\n\t\t\tresult[key] = val;\n\t\t}\n\n\t\treturn result;\n\t}, Object.create(null));\n};\n\nexports.stringify = function (obj, opts) {\n\tvar defaults = {\n\t\tencode: true,\n\t\tstrict: true,\n\t\tarrayFormat: 'none'\n\t};\n\n\topts = objectAssign(defaults, opts);\n\n\tvar formatter = encoderForArrayFormat(opts);\n\n\treturn obj ? Object.keys(obj).sort().map(function (key) {\n\t\tvar val = obj[key];\n\n\t\tif (val === undefined) {\n\t\t\treturn '';\n\t\t}\n\n\t\tif (val === null) {\n\t\t\treturn encode(key, opts);\n\t\t}\n\n\t\tif (Array.isArray(val)) {\n\t\t\tvar result = [];\n\n\t\t\tval.slice().forEach(function (val2) {\n\t\t\t\tif (val2 === undefined) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tresult.push(formatter(key, val2, result.length));\n\t\t\t});\n\n\t\t\treturn result.join('&');\n\t\t}\n\n\t\treturn encode(key, opts) + '=' + encode(val, opts);\n\t}).filter(function (x) {\n\t\treturn x.length > 0;\n\t}).join('&') : '';\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/query-string/index.js\n// module id = 50\n// module chunks = 0","'use strict';\nmodule.exports = function (str) {\n\treturn encodeURIComponent(str).replace(/[!'()*]/g, function (c) {\n\t\treturn '%' + c.charCodeAt(0).toString(16).toUpperCase();\n\t});\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/strict-uri-encode/index.js\n// module id = 51\n// module chunks = 0","(function(self) {\n  'use strict';\n\n  if (self.fetch) {\n    return\n  }\n\n  var support = {\n    searchParams: 'URLSearchParams' in self,\n    iterable: 'Symbol' in self && 'iterator' in Symbol,\n    blob: 'FileReader' in self && 'Blob' in self && (function() {\n      try {\n        new Blob()\n        return true\n      } catch(e) {\n        return false\n      }\n    })(),\n    formData: 'FormData' in self,\n    arrayBuffer: 'ArrayBuffer' in self\n  }\n\n  if (support.arrayBuffer) {\n    var viewClasses = [\n      '[object Int8Array]',\n      '[object Uint8Array]',\n      '[object Uint8ClampedArray]',\n      '[object Int16Array]',\n      '[object Uint16Array]',\n      '[object Int32Array]',\n      '[object Uint32Array]',\n      '[object Float32Array]',\n      '[object Float64Array]'\n    ]\n\n    var isDataView = function(obj) {\n      return obj && DataView.prototype.isPrototypeOf(obj)\n    }\n\n    var isArrayBufferView = ArrayBuffer.isView || function(obj) {\n      return obj && viewClasses.indexOf(Object.prototype.toString.call(obj)) > -1\n    }\n  }\n\n  function normalizeName(name) {\n    if (typeof name !== 'string') {\n      name = String(name)\n    }\n    if (/[^a-z0-9\\-#$%&'*+.\\^_`|~]/i.test(name)) {\n      throw new TypeError('Invalid character in header field name')\n    }\n    return name.toLowerCase()\n  }\n\n  function normalizeValue(value) {\n    if (typeof value !== 'string') {\n      value = String(value)\n    }\n    return value\n  }\n\n  // Build a destructive iterator for the value list\n  function iteratorFor(items) {\n    var iterator = {\n      next: function() {\n        var value = items.shift()\n        return {done: value === undefined, value: value}\n      }\n    }\n\n    if (support.iterable) {\n      iterator[Symbol.iterator] = function() {\n        return iterator\n      }\n    }\n\n    return iterator\n  }\n\n  function Headers(headers) {\n    this.map = {}\n\n    if (headers instanceof Headers) {\n      headers.forEach(function(value, name) {\n        this.append(name, value)\n      }, this)\n    } else if (Array.isArray(headers)) {\n      headers.forEach(function(header) {\n        this.append(header[0], header[1])\n      }, this)\n    } else if (headers) {\n      Object.getOwnPropertyNames(headers).forEach(function(name) {\n        this.append(name, headers[name])\n      }, this)\n    }\n  }\n\n  Headers.prototype.append = function(name, value) {\n    name = normalizeName(name)\n    value = normalizeValue(value)\n    var oldValue = this.map[name]\n    this.map[name] = oldValue ? oldValue+','+value : value\n  }\n\n  Headers.prototype['delete'] = function(name) {\n    delete this.map[normalizeName(name)]\n  }\n\n  Headers.prototype.get = function(name) {\n    name = normalizeName(name)\n    return this.has(name) ? this.map[name] : null\n  }\n\n  Headers.prototype.has = function(name) {\n    return this.map.hasOwnProperty(normalizeName(name))\n  }\n\n  Headers.prototype.set = function(name, value) {\n    this.map[normalizeName(name)] = normalizeValue(value)\n  }\n\n  Headers.prototype.forEach = function(callback, thisArg) {\n    for (var name in this.map) {\n      if (this.map.hasOwnProperty(name)) {\n        callback.call(thisArg, this.map[name], name, this)\n      }\n    }\n  }\n\n  Headers.prototype.keys = function() {\n    var items = []\n    this.forEach(function(value, name) { items.push(name) })\n    return iteratorFor(items)\n  }\n\n  Headers.prototype.values = function() {\n    var items = []\n    this.forEach(function(value) { items.push(value) })\n    return iteratorFor(items)\n  }\n\n  Headers.prototype.entries = function() {\n    var items = []\n    this.forEach(function(value, name) { items.push([name, value]) })\n    return iteratorFor(items)\n  }\n\n  if (support.iterable) {\n    Headers.prototype[Symbol.iterator] = Headers.prototype.entries\n  }\n\n  function consumed(body) {\n    if (body.bodyUsed) {\n      return Promise.reject(new TypeError('Already read'))\n    }\n    body.bodyUsed = true\n  }\n\n  function fileReaderReady(reader) {\n    return new Promise(function(resolve, reject) {\n      reader.onload = function() {\n        resolve(reader.result)\n      }\n      reader.onerror = function() {\n        reject(reader.error)\n      }\n    })\n  }\n\n  function readBlobAsArrayBuffer(blob) {\n    var reader = new FileReader()\n    var promise = fileReaderReady(reader)\n    reader.readAsArrayBuffer(blob)\n    return promise\n  }\n\n  function readBlobAsText(blob) {\n    var reader = new FileReader()\n    var promise = fileReaderReady(reader)\n    reader.readAsText(blob)\n    return promise\n  }\n\n  function readArrayBufferAsText(buf) {\n    var view = new Uint8Array(buf)\n    var chars = new Array(view.length)\n\n    for (var i = 0; i < view.length; i++) {\n      chars[i] = String.fromCharCode(view[i])\n    }\n    return chars.join('')\n  }\n\n  function bufferClone(buf) {\n    if (buf.slice) {\n      return buf.slice(0)\n    } else {\n      var view = new Uint8Array(buf.byteLength)\n      view.set(new Uint8Array(buf))\n      return view.buffer\n    }\n  }\n\n  function Body() {\n    this.bodyUsed = false\n\n    this._initBody = function(body) {\n      this._bodyInit = body\n      if (!body) {\n        this._bodyText = ''\n      } else if (typeof body === 'string') {\n        this._bodyText = body\n      } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n        this._bodyBlob = body\n      } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n        this._bodyFormData = body\n      } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n        this._bodyText = body.toString()\n      } else if (support.arrayBuffer && support.blob && isDataView(body)) {\n        this._bodyArrayBuffer = bufferClone(body.buffer)\n        // IE 10-11 can't handle a DataView body.\n        this._bodyInit = new Blob([this._bodyArrayBuffer])\n      } else if (support.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body))) {\n        this._bodyArrayBuffer = bufferClone(body)\n      } else {\n        throw new Error('unsupported BodyInit type')\n      }\n\n      if (!this.headers.get('content-type')) {\n        if (typeof body === 'string') {\n          this.headers.set('content-type', 'text/plain;charset=UTF-8')\n        } else if (this._bodyBlob && this._bodyBlob.type) {\n          this.headers.set('content-type', this._bodyBlob.type)\n        } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n          this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8')\n        }\n      }\n    }\n\n    if (support.blob) {\n      this.blob = function() {\n        var rejected = consumed(this)\n        if (rejected) {\n          return rejected\n        }\n\n        if (this._bodyBlob) {\n          return Promise.resolve(this._bodyBlob)\n        } else if (this._bodyArrayBuffer) {\n          return Promise.resolve(new Blob([this._bodyArrayBuffer]))\n        } else if (this._bodyFormData) {\n          throw new Error('could not read FormData body as blob')\n        } else {\n          return Promise.resolve(new Blob([this._bodyText]))\n        }\n      }\n\n      this.arrayBuffer = function() {\n        if (this._bodyArrayBuffer) {\n          return consumed(this) || Promise.resolve(this._bodyArrayBuffer)\n        } else {\n          return this.blob().then(readBlobAsArrayBuffer)\n        }\n      }\n    }\n\n    this.text = function() {\n      var rejected = consumed(this)\n      if (rejected) {\n        return rejected\n      }\n\n      if (this._bodyBlob) {\n        return readBlobAsText(this._bodyBlob)\n      } else if (this._bodyArrayBuffer) {\n        return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer))\n      } else if (this._bodyFormData) {\n        throw new Error('could not read FormData body as text')\n      } else {\n        return Promise.resolve(this._bodyText)\n      }\n    }\n\n    if (support.formData) {\n      this.formData = function() {\n        return this.text().then(decode)\n      }\n    }\n\n    this.json = function() {\n      return this.text().then(JSON.parse)\n    }\n\n    return this\n  }\n\n  // HTTP methods whose capitalization should be normalized\n  var methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT']\n\n  function normalizeMethod(method) {\n    var upcased = method.toUpperCase()\n    return (methods.indexOf(upcased) > -1) ? upcased : method\n  }\n\n  function Request(input, options) {\n    options = options || {}\n    var body = options.body\n\n    if (input instanceof Request) {\n      if (input.bodyUsed) {\n        throw new TypeError('Already read')\n      }\n      this.url = input.url\n      this.credentials = input.credentials\n      if (!options.headers) {\n        this.headers = new Headers(input.headers)\n      }\n      this.method = input.method\n      this.mode = input.mode\n      if (!body && input._bodyInit != null) {\n        body = input._bodyInit\n        input.bodyUsed = true\n      }\n    } else {\n      this.url = String(input)\n    }\n\n    this.credentials = options.credentials || this.credentials || 'omit'\n    if (options.headers || !this.headers) {\n      this.headers = new Headers(options.headers)\n    }\n    this.method = normalizeMethod(options.method || this.method || 'GET')\n    this.mode = options.mode || this.mode || null\n    this.referrer = null\n\n    if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n      throw new TypeError('Body not allowed for GET or HEAD requests')\n    }\n    this._initBody(body)\n  }\n\n  Request.prototype.clone = function() {\n    return new Request(this, { body: this._bodyInit })\n  }\n\n  function decode(body) {\n    var form = new FormData()\n    body.trim().split('&').forEach(function(bytes) {\n      if (bytes) {\n        var split = bytes.split('=')\n        var name = split.shift().replace(/\\+/g, ' ')\n        var value = split.join('=').replace(/\\+/g, ' ')\n        form.append(decodeURIComponent(name), decodeURIComponent(value))\n      }\n    })\n    return form\n  }\n\n  function parseHeaders(rawHeaders) {\n    var headers = new Headers()\n    // Replace instances of \\r\\n and \\n followed by at least one space or horizontal tab with a space\n    // https://tools.ietf.org/html/rfc7230#section-3.2\n    var preProcessedHeaders = rawHeaders.replace(/\\r?\\n[\\t ]+/g, ' ')\n    preProcessedHeaders.split(/\\r?\\n/).forEach(function(line) {\n      var parts = line.split(':')\n      var key = parts.shift().trim()\n      if (key) {\n        var value = parts.join(':').trim()\n        headers.append(key, value)\n      }\n    })\n    return headers\n  }\n\n  Body.call(Request.prototype)\n\n  function Response(bodyInit, options) {\n    if (!options) {\n      options = {}\n    }\n\n    this.type = 'default'\n    this.status = options.status === undefined ? 200 : options.status\n    this.ok = this.status >= 200 && this.status < 300\n    this.statusText = 'statusText' in options ? options.statusText : 'OK'\n    this.headers = new Headers(options.headers)\n    this.url = options.url || ''\n    this._initBody(bodyInit)\n  }\n\n  Body.call(Response.prototype)\n\n  Response.prototype.clone = function() {\n    return new Response(this._bodyInit, {\n      status: this.status,\n      statusText: this.statusText,\n      headers: new Headers(this.headers),\n      url: this.url\n    })\n  }\n\n  Response.error = function() {\n    var response = new Response(null, {status: 0, statusText: ''})\n    response.type = 'error'\n    return response\n  }\n\n  var redirectStatuses = [301, 302, 303, 307, 308]\n\n  Response.redirect = function(url, status) {\n    if (redirectStatuses.indexOf(status) === -1) {\n      throw new RangeError('Invalid status code')\n    }\n\n    return new Response(null, {status: status, headers: {location: url}})\n  }\n\n  self.Headers = Headers\n  self.Request = Request\n  self.Response = Response\n\n  self.fetch = function(input, init) {\n    return new Promise(function(resolve, reject) {\n      var request = new Request(input, init)\n      var xhr = new XMLHttpRequest()\n\n      xhr.onload = function() {\n        var options = {\n          status: xhr.status,\n          statusText: xhr.statusText,\n          headers: parseHeaders(xhr.getAllResponseHeaders() || '')\n        }\n        options.url = 'responseURL' in xhr ? xhr.responseURL : options.headers.get('X-Request-URL')\n        var body = 'response' in xhr ? xhr.response : xhr.responseText\n        resolve(new Response(body, options))\n      }\n\n      xhr.onerror = function() {\n        reject(new TypeError('Network request failed'))\n      }\n\n      xhr.ontimeout = function() {\n        reject(new TypeError('Network request failed'))\n      }\n\n      xhr.open(request.method, request.url, true)\n\n      if (request.credentials === 'include') {\n        xhr.withCredentials = true\n      } else if (request.credentials === 'omit') {\n        xhr.withCredentials = false\n      }\n\n      if ('responseType' in xhr && support.blob) {\n        xhr.responseType = 'blob'\n      }\n\n      request.headers.forEach(function(value, name) {\n        xhr.setRequestHeader(name, value)\n      })\n\n      xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit)\n    })\n  }\n  self.fetch.polyfill = true\n})(typeof self !== 'undefined' ? self : this);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/whatwg-fetch/fetch.js\n// module id = 52\n// module chunks = 0"],"sourceRoot":""}